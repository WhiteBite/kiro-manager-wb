<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kiro Account Manager</title>
  <style>
    
  :root {
    /* Brand Colors */
    --accent: #3fb68b;
    --accent-hover: #4ec9a0;
    --accent-dim: rgba(63, 182, 139, 0.12);
    --accent-glow: rgba(63, 182, 139, 0.4);
    --danger: #e55353;
    --danger-dim: rgba(229, 83, 83, 0.12);
    --warning: #d9a334;
    --warning-dim: rgba(217, 163, 52, 0.12);
    --success: #3fb68b;
    
    /* Fixed Dark Theme - improved contrast */
    --muted: #999999;
    --border: rgba(128, 128, 128, 0.2);
    --bg: #1e1e1e;
    --bg-hover: rgba(255, 255, 255, 0.05);
    --bg-active: rgba(63, 182, 139, 0.2);
    --bg-elevated: rgba(255, 255, 255, 0.03);
    --fg: #e0e0e0;
    --fg-secondary: #b0b0b0;
    --input-bg: #3c3c3c;
    --input-border: rgba(128, 128, 128, 0.3);
    
    /* Glass effect */
    --glass-bg: rgba(255, 255, 255, 0.02);
    --glass-border: rgba(255, 255, 255, 0.08);
    
    /* Typography */
    --font-size-xs: 11px;
    --font-size-sm: 12px;
    --font-size-base: 13px;
    --font-size-md: 14px;
    --font-size-lg: 16px;
    --font-size-xl: 18px;
    --font-size-2xl: 20px;
    --line-height-tight: 1.3;
    --line-height-base: 1.5;
    --line-height-relaxed: 1.6;
    
    /* Spacing Scale (4px base) */
    --space-0: 0;
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    
    /* Touch-friendly sizes */
    --touch-target: 44px;
    --button-min-height: 36px;
    --input-min-height: 32px;
    --icon-size-sm: 16px;
    --icon-size-md: 20px;
    --icon-size-lg: 24px;
    
    /* Spacing & Radius */
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 10px;
    --radius-xl: 12px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition: 0.15s ease;
    --transition-normal: 0.2s ease;
    --transition-slow: 0.3s ease;
    
    /* Shadows */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.4);
    
    /* Z-index layers */
    --z-base: 1;
    --z-dropdown: 10;
    --z-sticky: 20;
    --z-drawer: 50;
    --z-fab: 80;
    --z-overlay: 100;
    --z-modal: 200;
    --z-dialog: 300;
    --z-toast: 400;
    
    /* VS Code variable fallbacks for Kiro Desktop compatibility */
    --vscode-foreground: #e0e0e0;
    --vscode-sideBar-background: #1e1e1e;
    --vscode-input-background: #3c3c3c;
    --vscode-input-foreground: #e0e0e0;
    --vscode-dropdown-background: #3c3c3c;
    --vscode-dropdown-foreground: #e0e0e0;
    --vscode-terminal-background: #1e1e1e;
    --vscode-editorWidget-background: #252526;
    --vscode-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --vscode-editor-font-family: 'Consolas', 'Courier New', monospace;
  }

    
  /* Reset */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body { height: 100%; overflow: hidden; background-color: #1e1e1e; }
  
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    font-size: var(--font-size-base, 13px);
    line-height: var(--line-height-base, 1.5);
    color: var(--fg, #e0e0e0);
    background: var(--bg, #1e1e1e);
    background-color: #1e1e1e;
    display: flex;
    flex-direction: column;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .app { 
    display: flex; 
    flex-direction: column; 
    height: 100%; 
    overflow: hidden; /* Don't scroll the whole app */
  }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes fadeInFast {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-8px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  .tab-content {
    animation: fadeIn 0.2s ease-out;
  }
  
  .animate-fade-in {
    animation: fadeIn 0.2s ease-out;
  }
  
  .animate-slide-in {
    animation: slideIn 0.2s ease-out;
  }

  /* Scrollbar - improved */
  ::-webkit-scrollbar { 
    width: 10px; 
    height: 10px;
  }
  ::-webkit-scrollbar-track { 
    background: transparent;
    border-radius: 5px;
  }
  ::-webkit-scrollbar-thumb { 
    background: rgba(128, 128, 128, 0.3); 
    border-radius: 5px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }
  ::-webkit-scrollbar-thumb:hover { 
    background: rgba(128, 128, 128, 0.5);
    background-clip: padding-box;
  }
  ::-webkit-scrollbar-thumb:active {
    background: rgba(128, 128, 128, 0.6);
    background-clip: padding-box;
  }
  ::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* Text utilities */
  .hidden { display: none !important; }
  .text-muted { color: var(--muted); }
  .text-secondary { color: var(--fg-secondary); }
  .text-accent { color: var(--accent); }
  .text-danger { color: var(--danger); }
  .text-warning { color: var(--warning); }
  .text-success { color: var(--success); }
  .font-mono { font-family: var(--vscode-editor-font-family, monospace); }
  .text-xs { font-size: var(--font-size-xs); }
  .text-sm { font-size: var(--font-size-sm); }
  .text-base { font-size: var(--font-size-base); }
  .text-md { font-size: var(--font-size-md); }
  .text-lg { font-size: var(--font-size-lg); }
  .text-center { text-align: center; }
  .text-right { text-align: right; }
  .font-medium { font-weight: 500; }
  .font-semibold { font-weight: 600; }
  
  /* Spacing utilities - margin */
  .m-0 { margin: var(--space-0); }
  .m-1 { margin: var(--space-1); }
  .m-2 { margin: var(--space-2); }
  .m-3 { margin: var(--space-3); }
  .m-4 { margin: var(--space-4); }
  .m-5 { margin: var(--space-5); }
  
  .mt-0 { margin-top: var(--space-0); }
  .mt-1 { margin-top: var(--space-1); }
  .mt-2 { margin-top: var(--space-2); }
  .mt-3 { margin-top: var(--space-3); }
  .mt-4 { margin-top: var(--space-4); }
  .mt-5 { margin-top: var(--space-5); }
  
  .mb-0 { margin-bottom: var(--space-0); }
  .mb-1 { margin-bottom: var(--space-1); }
  .mb-2 { margin-bottom: var(--space-2); }
  .mb-3 { margin-bottom: var(--space-3); }
  .mb-4 { margin-bottom: var(--space-4); }
  .mb-5 { margin-bottom: var(--space-5); }
  
  .ml-0 { margin-left: var(--space-0); }
  .ml-1 { margin-left: var(--space-1); }
  .ml-2 { margin-left: var(--space-2); }
  .ml-3 { margin-left: var(--space-3); }
  .ml-4 { margin-left: var(--space-4); }
  
  .mr-0 { margin-right: var(--space-0); }
  .mr-1 { margin-right: var(--space-1); }
  .mr-2 { margin-right: var(--space-2); }
  .mr-3 { margin-right: var(--space-3); }
  .mr-4 { margin-right: var(--space-4); }
  
  .mx-auto { margin-left: auto; margin-right: auto; }
  
  /* Spacing utilities - padding */
  .p-0 { padding: var(--space-0); }
  .p-1 { padding: var(--space-1); }
  .p-2 { padding: var(--space-2); }
  .p-3 { padding: var(--space-3); }
  .p-4 { padding: var(--space-4); }
  .p-5 { padding: var(--space-5); }
  
  .pt-0 { padding-top: var(--space-0); }
  .pt-1 { padding-top: var(--space-1); }
  .pt-2 { padding-top: var(--space-2); }
  .pt-3 { padding-top: var(--space-3); }
  .pt-4 { padding-top: var(--space-4); }
  .pt-5 { padding-top: var(--space-5); }
  
  .pb-0 { padding-bottom: var(--space-0); }
  .pb-1 { padding-bottom: var(--space-1); }
  .pb-2 { padding-bottom: var(--space-2); }
  .pb-3 { padding-bottom: var(--space-3); }
  .pb-4 { padding-bottom: var(--space-4); }
  .pb-5 { padding-bottom: var(--space-5); }
  
  .px-0 { padding-left: var(--space-0); padding-right: var(--space-0); }
  .px-1 { padding-left: var(--space-1); padding-right: var(--space-1); }
  .px-2 { padding-left: var(--space-2); padding-right: var(--space-2); }
  .px-3 { padding-left: var(--space-3); padding-right: var(--space-3); }
  .px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
  
  .py-0 { padding-top: var(--space-0); padding-bottom: var(--space-0); }
  .py-1 { padding-top: var(--space-1); padding-bottom: var(--space-1); }
  .py-2 { padding-top: var(--space-2); padding-bottom: var(--space-2); }
  .py-3 { padding-top: var(--space-3); padding-bottom: var(--space-3); }
  .py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
  
  /* Gap utilities */
  .gap-1 { gap: var(--space-1); }
  .gap-2 { gap: var(--space-2); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }
  .gap-5 { gap: var(--space-5); }
  
  /* Flex utilities */
  .flex { display: flex; }
  .flex-col { flex-direction: column; }
  .flex-row { flex-direction: row; }
  .flex-wrap { flex-wrap: wrap; }
  .flex-1 { flex: 1; }
  .items-center { align-items: center; }
  .items-start { align-items: flex-start; }
  .items-end { align-items: flex-end; }
  .justify-center { justify-content: center; }
  .justify-between { justify-content: space-between; }
  .justify-end { justify-content: flex-end; }
  
  /* Width/Height utilities */
  .w-full { width: 100%; }
  .h-full { height: 100%; }
  .min-h-touch { min-height: var(--touch-target); }
  
  /* Border utilities */
  .rounded-sm { border-radius: var(--radius-sm); }
  .rounded-md { border-radius: var(--radius-md); }
  .rounded-lg { border-radius: var(--radius-lg); }
  .rounded-full { border-radius: var(--radius-full); }
  
  /* Overflow utilities */
  .overflow-hidden { overflow: hidden; }
  .overflow-auto { overflow: auto; }
  .overflow-y-auto { overflow-y: auto; }
  .overflow-x-hidden { overflow-x: hidden; }
  
  /* Cursor utilities */
  .cursor-pointer { cursor: pointer; }
  .cursor-default { cursor: default; }
  .cursor-not-allowed { cursor: not-allowed; }
  
  /* Opacity utilities */
  .opacity-50 { opacity: 0.5; }
  .opacity-75 { opacity: 0.75; }
  .hover\:opacity-100:hover { opacity: 1; }
  
  /* Transition utilities */
  .transition { transition: all var(--transition); }
  .transition-colors { transition: color var(--transition), background-color var(--transition), border-color var(--transition); }

    
  /* === Buttons === */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: clamp(3px, 1.5vw, 6px);
    padding: clamp(4px, 2vw, 8px) clamp(8px, 3.5vw, 14px);
    min-height: clamp(24px, 9vw, 36px);
    font-size: clamp(9px, 2.8vw, 11px);
    font-family: inherit;
    font-weight: 600;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    white-space: nowrap;
    position: relative;
    overflow: hidden;
  }
  .btn:disabled { opacity: 0.5; cursor: not-allowed; }
  .btn:active:not(:disabled) { transform: scale(0.97); }
  .btn svg { 
    width: clamp(10px, 3.5vw, 14px); 
    height: clamp(10px, 3.5vw, 14px); 
    flex-shrink: 0; 
  }
  
  .btn-primary {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    color: #fff;
    box-shadow: 0 2px 12px rgba(63,182,139,0.3);
  }
  .btn-primary:hover:not(:disabled) { 
    transform: translateY(-2px); 
    box-shadow: 0 8px 24px rgba(63,182,139,0.45);
  }
  .btn-primary:active:not(:disabled) { 
    transform: scale(0.97) translateY(0); 
    box-shadow: 0 2px 8px rgba(63,182,139,0.3);
  }
  
  .btn-secondary {
    background: var(--glass-bg);
    backdrop-filter: blur(8px);
    color: var(--fg);
    border: 1px solid var(--glass-border);
  }
  .btn-secondary:hover:not(:disabled) { 
    background: rgba(128,128,128,0.15); 
    border-color: var(--border);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .btn-secondary:active:not(:disabled) { 
    transform: scale(0.97); 
    box-shadow: none;
  }
  
  .btn-danger { 
    background: linear-gradient(135deg, var(--danger) 0%, #f06b6b 100%); 
    color: #fff; 
    box-shadow: 0 2px 12px rgba(239,83,80,0.3);
  }
  .btn-danger:hover:not(:disabled) { 
    box-shadow: 0 6px 20px rgba(239,83,80,0.4);
    transform: translateY(-2px);
  }
  .btn-danger:active:not(:disabled) { 
    transform: scale(0.97); 
    box-shadow: 0 2px 8px rgba(239,83,80,0.3);
  }
  
  .btn-icon { padding: 8px 10px; }

  /* === Icon Button === */
  .icon-btn {
    min-width: clamp(24px, 9vw, 36px);
    min-height: clamp(24px, 9vw, 36px);
    width: clamp(24px, 9vw, 36px); 
    height: clamp(24px, 9vw, 36px);
    display: flex; 
    align-items: center; 
    justify-content: center;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--muted);
    transition: all var(--transition);
  }
  .icon-btn:hover { 
    background: var(--bg-elevated); 
    border-color: var(--border); 
    color: var(--fg);
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .icon-btn:active { 
    transform: scale(0.95); 
    box-shadow: none;
  }
  .icon-btn svg { 
    width: clamp(10px, 3.5vw, 14px); 
    height: clamp(10px, 3.5vw, 14px); 
  }

  /* === Inputs === */
  .form-group { margin-bottom: clamp(8px, 3.5vw, 14px); }
  .form-group:last-child { margin-bottom: 0; }
  
  .form-label {
    display: block;
    font-size: clamp(9px, 2.8vw, 11px);
    font-weight: 600;
    margin-bottom: clamp(4px, 1.5vw, 6px);
    color: var(--fg);
  }
  
  .form-input {
    width: 100%;
    padding: clamp(5px, 2vw, 8px) clamp(6px, 2.5vw, 10px);
    font-size: clamp(10px, 3vw, 12px);
    font-family: inherit;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    outline: none;
    transition: all var(--transition);
  }
  .form-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(63,182,139,0.15);
  }
  .form-input::placeholder { color: var(--muted); }
  
  .form-hint {
    font-size: clamp(8px, 2.5vw, 10px);
    color: var(--muted);
    margin-top: clamp(2px, 1vw, 4px);
  }
  
  .form-row {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(6px, 2.5vw, 10px);
  }
  .form-row .flex-1 { flex: 1; min-width: 60px; }
  .form-row .flex-2 { flex: 2; min-width: 80px; }

  /* === Toggle === */
  .toggle {
    position: relative;
    display: inline-block;
    width: 36px;
    height: 20px;
  }
  .toggle input { opacity: 0; width: 0; height: 0; }
  .toggle-slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: rgba(128,128,128,0.3);
    border-radius: 10px;
    transition: all var(--transition);
  }
  .toggle-slider::before {
    content: '';
    position: absolute;
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background: #fff;
    border-radius: 50%;
    transition: all var(--transition);
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  }
  .toggle input:checked + .toggle-slider { background: var(--accent); }
  .toggle input:checked + .toggle-slider::before { transform: translateX(16px); }

  /* === Spinner === */
  .spinner {
    width: 14px; 
    height: 14px;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* === Select === */
  .select {
    padding: 6px 28px 6px 10px;
    font-size: 11px;
    font-family: inherit;
    font-weight: 500;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    transition: all var(--transition);
  }
  .select:hover { border-color: var(--accent); }

  /* === Number Input === */
  .input-number {
    width: 70px;
    padding: 6px 8px;
    font-size: 12px;
    font-family: inherit;
    font-weight: 600;
    text-align: center;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    transition: all var(--transition);
  }
  .input-number:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(63,182,139,0.15);
  }
  .input-number::-webkit-inner-spin-button,
  .input-number::-webkit-outer-spin-button {
    opacity: 1;
  }

  /* === Patch Indicator === */
  .patch-indicator {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    font-size: 10px;
    border-radius: 50%;
    cursor: pointer;
    transition: all var(--transition);
    opacity: 0;
  }
  .patch-indicator.visible { opacity: 1; }
  .patch-indicator.patched {
    background: var(--accent-dim);
    color: var(--accent);
  }
  .patch-indicator.patched::after { content: 'üîß'; font-size: 9px; }
  .patch-indicator.not-patched {
    background: var(--warning-dim, rgba(229, 192, 123, 0.15));
    color: var(--warning);
  }
  .patch-indicator.not-patched::after { content: '‚ö†'; font-size: 9px; }
  .patch-indicator.error {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .patch-indicator.error::after { content: '‚úó'; font-size: 9px; }
  .patch-indicator:hover {
    transform: scale(1.1);
  }

  /* === CSS Tooltips === */
  .tooltip {
    position: relative;
  }
  .tooltip::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%) translateY(4px);
    padding: 6px 10px;
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
    color: #fff;
    background: #2a2a2a;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0.2s;
    z-index: 1000;
  }
  .tooltip::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: #2a2a2a;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s ease, visibility 0s linear 0.2s;
    z-index: 1001;
  }
  .tooltip:hover::after,
  .tooltip:hover::before {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
    transition-delay: 500ms, 500ms;
  }
  .tooltip:hover::before {
    transform: translateX(-50%);
    transition-delay: 500ms, 500ms;
  }
  /* Tooltip position variants */
  .tooltip-bottom::after {
    bottom: auto;
    top: calc(100% + 8px);
    transform: translateX(-50%) translateY(-4px);
  }
  .tooltip-bottom::before {
    bottom: auto;
    top: calc(100% + 2px);
    border-top-color: transparent;
    border-bottom-color: #2a2a2a;
  }
  .tooltip-bottom:hover::after {
    transform: translateX(-50%) translateY(0);
  }
  .tooltip-left::after {
    bottom: auto;
    left: auto;
    right: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%) translateX(4px);
  }
  .tooltip-left::before {
    bottom: auto;
    left: auto;
    right: calc(100% + 2px);
    top: 50%;
    transform: translateY(-50%);
    border-top-color: transparent;
    border-left-color: #2a2a2a;
  }
  .tooltip-left:hover::after {
    transform: translateY(-50%) translateX(0);
  }
  .tooltip-right::after {
    bottom: auto;
    left: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%) translateX(-4px);
  }
  .tooltip-right::before {
    bottom: auto;
    left: calc(100% + 2px);
    top: 50%;
    transform: translateY(-50%);
    border-top-color: transparent;
    border-right-color: #2a2a2a;
  }
  .tooltip-right:hover::after {
    transform: translateY(-50%) translateX(0);
  }

    
  /* === Header === */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: clamp(3px, 1.5vw, 6px) clamp(4px, 2vw, 10px);
    background: var(--bg);
    flex-shrink: 0; /* Don't shrink */
    min-height: clamp(24px, 8vw, 34px);
    gap: clamp(4px, 2vw, 8px);
  }
  .header-left {
    display: flex;
    align-items: center;
    gap: clamp(3px, 1.5vw, 6px);
    min-width: 0; /* Allow shrinking */
    overflow: hidden;
  }
  .header-title {
    font-size: clamp(9px, 3vw, 13px);
    font-weight: 700;
    color: var(--fg);
    flex-shrink: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .header-badge {
    font-size: clamp(7px, 2vw, 9px);
    font-weight: 600;
    padding: clamp(1px, 0.5vw, 2px) clamp(3px, 1.5vw, 6px);
    background: var(--accent-dim);
    color: var(--accent);
    border-radius: 10px;
    flex-shrink: 0;
    white-space: nowrap;
  }
  .header-actions {
    display: flex;
    gap: 3px;
    flex-shrink: 0;
  }
  /* Header button text - hide on narrow screens */
  .header-actions .btn-text {
    display: none;
  }
  @media (min-width: 400px) {
    .header-actions .btn-text { display: inline; }
  }

  /* === Hero Dashboard === */
  .hero {
    margin: clamp(2px, 1.5vw, 6px) clamp(3px, 2vw, 8px);
    padding: clamp(6px, 3vw, 12px);
    background: linear-gradient(135deg, rgba(63,182,139,0.1) 0%, rgba(63,182,139,0.03) 100%);
    border: 1px solid rgba(63,182,139,0.25);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-normal);
    flex-shrink: 0;
  }
  .hero:hover {
    border-color: rgba(63,182,139,0.4);
    box-shadow: 0 4px 20px rgba(63,182,139,0.15);
    transform: translateY(-1px);
  }
  .hero.empty {
    background: var(--glass-bg);
    border-color: var(--glass-border);
    cursor: pointer;
    text-align: center;
    padding: 14px 12px;
  }
  .hero.profile {
    background: linear-gradient(135deg, rgba(100,149,237,0.1) 0%, rgba(100,149,237,0.03) 100%);
    border-color: rgba(100,149,237,0.25);
  }
  .hero.profile:hover {
    border-color: rgba(100,149,237,0.4);
    box-shadow: 0 4px 20px rgba(100,149,237,0.15);
  }
  .hero.warning {
    background: linear-gradient(135deg, rgba(217,163,52,0.15) 0%, rgba(217,163,52,0.05) 100%);
    border-color: rgba(217,163,52,0.4);
  }
  .hero.critical {
    background: linear-gradient(135deg, rgba(229,83,83,0.15) 0%, rgba(229,83,83,0.05) 100%);
    border-color: rgba(229,83,83,0.4);
    animation: criticalPulse 2s ease-in-out infinite;
  }
  @keyframes criticalPulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(229,83,83,0.3); }
    50% { box-shadow: 0 0 0 4px rgba(229,83,83,0.1); }
  }
  
  /* Hero main - minimalist centered value */
  .hero-main {
    text-align: center;
    padding: clamp(2px, 1vw, 4px) 0 clamp(4px, 2vw, 8px);
  }
  .hero-value {
    display: block;
    font-size: clamp(16px, 10vw, 32px);
    font-weight: 700;
    line-height: 1;
    letter-spacing: -1px;
    color: var(--accent);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .hero-value.low { color: var(--accent); }
  .hero-value.medium { color: var(--warning); }
  .hero-value.high { color: var(--danger); }
  .hero-label {
    display: block;
    font-size: clamp(7px, 2.5vw, 11px);
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: clamp(0.3px, 0.3vw, 1px);
    margin-top: clamp(2px, 1vw, 4px);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* Hero footer - compact stats */
  .hero-footer {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    font-size: clamp(7px, 2.5vw, 10px);
    color: var(--muted);
    margin-top: clamp(2px, 1vw, 4px);
    gap: clamp(2px, 1vw, 4px);
  }
  .hero-stat {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* Progress bar */
  .hero-progress {
    height: 6px;
    background: rgba(128,128,128,0.15);
    border-radius: 3px;
    overflow: hidden;
  }
  .hero-progress-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.4s ease;
  }
  .hero-progress-fill.low { background: linear-gradient(90deg, var(--accent), var(--accent-hover)); }
  .hero-progress-fill.medium { background: linear-gradient(90deg, var(--warning), #e5b84a); }
  .hero-progress-fill.high { background: linear-gradient(90deg, var(--danger), #f06b6b); }
  
  /* Registration progress mode - keep detailed */
  .hero.progress {
    background: linear-gradient(135deg, rgba(63,182,139,0.08) 0%, transparent 100%);
    cursor: default;
  }
  .hero.progress .hero-progress {
    margin-bottom: 8px;
  }
  .hero-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  .hero-email {
    font-size: 13px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 70%;
  }
  .hero-step {
    font-size: 11px;
    color: var(--accent);
    font-weight: 600;
  }
  .hero-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11px;
  }
  .hero-usage {
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* === Step Indicators (Registration Progress) === */
  .step-indicators {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    margin: 12px 0;
    padding: 8px 4px;
    background: rgba(0,0,0,0.2);
    border-radius: var(--radius-md);
  }
  .step-indicator {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    min-width: 36px;
  }
  .step-icon {
    font-size: 14px;
    opacity: 0.4;
    transition: all 0.3s ease;
  }
  .step-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--muted);
    opacity: 0.3;
    transition: all 0.3s ease;
  }
  .step-line {
    flex: 1;
    height: 2px;
    background: var(--muted);
    opacity: 0.2;
    min-width: 8px;
    max-width: 20px;
  }
  .step-indicator.done .step-icon { opacity: 1; }
  .step-indicator.done .step-dot { 
    background: var(--accent); 
    opacity: 1;
    box-shadow: 0 0 8px var(--accent-glow);
  }
  .step-indicator.active .step-icon { 
    opacity: 1; 
    animation: stepPulse 1s ease-in-out infinite;
  }
  .step-indicator.active .step-dot { 
    background: var(--accent); 
    opacity: 1;
    animation: stepGlow 1s ease-in-out infinite;
  }
  .step-indicator.error .step-icon { opacity: 1; }
  .step-indicator.error .step-dot { 
    background: var(--danger); 
    opacity: 1;
    animation: stepError 0.5s ease-in-out infinite;
  }
  @keyframes stepPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }
  @keyframes stepGlow {
    0%, 100% { box-shadow: 0 0 4px var(--accent-glow); }
    50% { box-shadow: 0 0 12px var(--accent-glow); }
  }
  @keyframes stepError {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  .hero-percent {
    font-weight: 700;
    color: var(--accent);
  }

  /* === Toolbar === */
  .toolbar {
    display: flex;
    flex-direction: column;
    gap: clamp(2px, 1vw, 4px);
    padding: clamp(2px, 1vw, 4px) clamp(4px, 2vw, 8px);
    border-bottom: 1px solid var(--border);
  }
  .toolbar-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: clamp(2px, 1vw, 4px);
  }
  .toolbar-buttons {
    display: flex;
    gap: clamp(1px, 0.5vw, 2px);
    flex-shrink: 0;
  }
  .toolbar-buttons .btn {
    padding: clamp(3px, 1vw, 4px) clamp(4px, 1.5vw, 6px);
    font-size: clamp(8px, 2.5vw, 10px);
    min-height: clamp(22px, 7vw, 28px);
  }
  .toolbar-buttons .btn-text {
    display: none;
  }
  @media (min-width: 380px) {
    .toolbar-buttons .btn-text { display: inline; }
    .toolbar-buttons .btn { padding: 5px 9px; font-size: 11px; }
  }
  /* Compact toolbar mode */
  .toolbar.compact {
    gap: 3px;
    padding: 3px 6px;
  }
  .toolbar.compact .toolbar-row { gap: 3px; }
  .toolbar.compact .toolbar-buttons .btn { padding: 3px 5px; font-size: 10px; }

  /* === Search === */
  .search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    flex: 1;
    min-width: clamp(50px, 30vw, 200px);
  }
  .search-input {
    width: 100%;
    min-width: 50px;
    padding: clamp(4px, 1.5vw, 6px) clamp(18px, 7vw, 28px);
    font-size: clamp(9px, 2.5vw, 11px);
    font-family: inherit;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-md);
    transition: all var(--transition);
  }
  .search-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(63,182,139,0.15);
  }
  .search-input::placeholder {
    color: var(--muted);
  }
  .search-icon {
    position: absolute;
    left: clamp(4px, 1.5vw, 8px);
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    pointer-events: none;
  }
  .search-icon svg {
    width: clamp(9px, 3vw, 12px);
    height: clamp(9px, 3vw, 12px);
  }
  .search-clear {
    position: absolute;
    right: clamp(4px, 1.5vw, 6px);
    top: 50%;
    transform: translateY(-50%);
    width: clamp(12px, 4vw, 16px);
    height: clamp(12px, 4vw, 16px);
    display: none;
    align-items: center;
    justify-content: center;
    background: var(--bg-elevated);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    color: var(--muted);
    font-size: clamp(8px, 2.5vw, 10px);
    transition: all var(--transition);
  }
  .search-clear:hover {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .search-wrapper:has(.search-input:not(:placeholder-shown)) .search-clear {
    display: flex;
  }

  /* === Token Filters === */
  .filter-group {
    display: flex;
    align-items: center;
    gap: clamp(2px, 0.8vw, 3px);
    flex-wrap: wrap;
    overflow-x: visible;
    overflow-y: hidden;
    padding-bottom: clamp(1px, 0.5vw, 2px);
  }
  .filter-group::-webkit-scrollbar { display: none; }
  .filter-label {
    font-size: clamp(8px, 2.5vw, 10px);
    font-weight: 600;
    color: var(--muted);
    margin-right: clamp(2px, 0.8vw, 3px);
    display: flex;
    align-items: center;
    gap: clamp(2px, 0.8vw, 3px);
    flex-shrink: 0;
  }
  .filter-btn {
    padding: clamp(2px, 0.8vw, 3px) clamp(4px, 1.5vw, 7px);
    font-size: clamp(8px, 2.5vw, 10px);
    font-weight: 500;
    font-family: inherit;
    background: var(--bg-elevated);
    color: var(--muted);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition);
    white-space: nowrap;
    flex-shrink: 0;
  }
  .filter-btn:hover {
    background: var(--input-bg);
    border-color: var(--accent);
    color: var(--fg);
  }
  .filter-btn.active {
    background: var(--accent-dim);
    border-color: var(--accent);
    color: var(--accent);
    font-weight: 600;
  }
  
  /* Responsive filters for narrow screens */
  @media (max-width: 380px) {
    .filter-group {
      max-width: 100%;
      gap: 2px;
    }
    .filter-btn {
      padding: 3px 5px;
      font-size: 9px;
    }
    .filter-label {
      font-size: 9px;
      margin-right: 2px;
    }
  }
  @media (max-width: 320px) {
    .filter-group {
      gap: 2px;
    }
    .filter-btn {
      padding: 2px 4px;
      font-size: 8px;
    }
    .filter-label {
      font-size: 8px;
      display: none;
    }
  }

  /* === Filter Select Dropdown === */
  .filter-select {
    padding: clamp(3px, 1.2vw, 5px) clamp(16px, 6vw, 24px) clamp(3px, 1.2vw, 5px) clamp(5px, 2vw, 8px);
    font-size: clamp(9px, 2.5vw, 11px);
    font-family: inherit;
    font-weight: 500;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition);
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath fill='%23888' d='M0 0l5 6 5-6z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right clamp(4px, 2vw, 8px) center;
    min-width: clamp(50px, 25vw, 90px);
    flex-shrink: 0;
  }
  .filter-select:hover {
    border-color: var(--accent);
    background-color: var(--bg-elevated);
  }
  .filter-select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(63,182,139,0.15);
  }
  .filter-select option {
    background: var(--bg-elevated);
    color: var(--fg);
    padding: 8px;
  }
  @media (max-width: 380px) {
    .filter-select {
      padding: 4px 20px 4px 6px;
      font-size: 10px;
      min-width: 70px;
    }
  }

  /* === Account List === */
  .list {
    flex: 1;
    overflow-y: auto;
    padding: 6px 8px 200px; /* Increased bottom padding for logs drawer */
  }
  .list-group {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 4px;
    font-size: 10px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .list-group.danger { color: var(--danger); }
  .list-group.warning { color: var(--warning); }
  .list-group.banned { color: #ff0000; }
  .list-group.warning .list-group-action {
    background: rgba(217, 163, 52, 0.15);
    color: var(--warning);
  }
  .list-group.warning .list-group-action:hover {
    background: var(--warning);
    color: #000;
  }
  .list-group.banned .list-group-action {
    background: rgba(255, 0, 0, 0.15);
    color: #ff0000;
  }
  .list-group.banned .list-group-action:hover {
    background: #ff0000;
    color: #fff;
  }
  .list-group-count {
    padding: 2px 6px;
    background: var(--bg-elevated);
    border-radius: 8px;
    font-size: 9px;
  }
  .list-group-action {
    margin-left: auto;
    padding: 3px 8px;
    font-size: 9px;
    font-weight: 600;
    background: var(--danger-dim);
    color: var(--danger);
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all var(--transition);
  }
  .list-group-action:hover {
    background: var(--danger);
    color: #fff;
  }

  /* === Account Card === */
  .account {
    display: flex;
    align-items: center;
    gap: clamp(5px, 2.5vw, 10px);
    padding: clamp(6px, 3vw, 12px) clamp(7px, 3.5vw, 14px);
    margin-bottom: clamp(3px, 1.5vw, 6px);
    background: var(--glass-bg);
    border: 2px solid var(--glass-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    position: relative;
    min-width: 0; /* Allow shrinking */
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.08);
  }
  .account:hover {
    border-color: rgba(63,182,139,0.5);
    background: linear-gradient(135deg, rgba(63,182,139,0.1) 0%, rgba(63,182,139,0.02) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.18), 0 3px 6px rgba(63,182,139,0.15);
  }
  .account:active {
    transform: scale(0.99);
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  /* ACTIVE - —è—Ä–∫–∞—è –∑–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞ */
  .account.active {
    border-color: var(--accent);
    border-width: 2px;
    background: linear-gradient(135deg, rgba(63,182,139,0.15) 0%, rgba(63,182,139,0.05) 100%);
    box-shadow: 0 0 12px rgba(63,182,139,0.3);
  }
  /* READY - –æ–±—ã—á–Ω—ã–π —Å–µ—Ä—ã–π */
  .account:not(.active):not(.expired):not(.exhausted):not(.suspended):not(.banned) {
    border-color: var(--border);
  }
  /* EXPIRED - –∂—ë–ª—Ç–∞—è —Ä–∞–º–∫–∞ */
  .account.expired { 
    border-color: var(--warning); 
    background: linear-gradient(135deg, rgba(217,163,52,0.1) 0%, transparent 100%);
  }
  /* EXHAUSTED - –æ—Ä–∞–Ω–∂–µ–≤–∞—è —Ä–∞–º–∫–∞ */
  .account.exhausted { 
    border-color: #ff6b35;
    background: linear-gradient(135deg, rgba(255,107,53,0.1) 0%, transparent 100%);
  }
  /* SUSPENDED - —Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω–∞—è */
  .account.suspended { 
    border-color: #8b0000;
    background: linear-gradient(135deg, rgba(139,0,0,0.15) 0%, transparent 100%);
  }
  /* BANNED - –Ø–†–ö–ê–Ø –ö–†–ê–°–ù–ê–Ø –†–ê–ú–ö–ê + –ü–ï–†–ï–ß–Å–†–ö–ù–£–¢–´–ô */
  .account.banned {
    border-color: #ff0000 !important;
    border-width: 2px;
    background: linear-gradient(135deg, rgba(255,0,0,0.2) 0%, rgba(255,0,0,0.05) 100%) !important;
    opacity: 0.7;
    position: relative;
  }
  .account.banned::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: #ff0000;
    transform: rotate(-3deg);
  }
  .account.banned .account-email {
    text-decoration: line-through;
    color: #ff6666;
  }
  .account-avatar {
    position: relative;
    width: clamp(18px, 8vw, 32px);
    height: clamp(18px, 8vw, 32px);
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(8px, 3vw, 12px);
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }
  /* Avatar colors by status */
  .account.expired .account-avatar { background: linear-gradient(135deg, #888 0%, #666 100%); }
  .account.exhausted .account-avatar { background: linear-gradient(135deg, #ff6b35 0%, #cc5500 100%); }
  .account.suspended .account-avatar { background: linear-gradient(135deg, #8b0000 0%, #5c0000 100%); }
  .account.banned .account-avatar { background: linear-gradient(135deg, #ff0000 0%, #aa0000 100%); }
  .account-status {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: clamp(8px, 3vw, 12px);
    height: clamp(8px, 3vw, 12px);
    border-radius: 50%;
    border: 2px solid var(--bg);
  }
  .account-status.active { background: var(--accent); box-shadow: 0 0 6px var(--accent); }
  .account-status.ready { background: #888; }
  .account-status.expired { background: var(--warning); }
  .account-status.exhausted { background: #ff6b35; }
  .account-status.suspended { background: #8b0000; }
  .account-status.banned { background: #ff0000; box-shadow: 0 0 6px #ff0000; }
  .account-info { 
    flex: 1; 
    min-width: 0; /* Critical for text truncation */
    overflow: hidden;
  }
  .account-email {
    font-size: clamp(8px, 2.8vw, 11px);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }
  .account-meta {
    display: flex;
    gap: clamp(4px, 2vw, 8px);
    margin-top: 2px;
    font-size: clamp(7px, 2.5vw, 10px);
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-wrap: wrap;
  }
  .account-meta span {
    display: flex;
    align-items: center;
    gap: clamp(2px, 1vw, 4px);
  }
  .account-meta svg { 
    width: clamp(7px, 2.5vw, 10px); 
    height: clamp(7px, 2.5vw, 10px); 
  }
  .account-actions {
    display: flex;
    gap: clamp(2px, 0.8vw, 3px);
    opacity: 1;
    transition: opacity var(--transition);
    flex-shrink: 0;
  }
  .account:hover .account-actions { opacity: 1; }
  .account-btn {
    min-width: clamp(18px, 7vw, 28px);
    min-height: clamp(18px, 7vw, 28px);
    width: clamp(18px, 7vw, 28px);
    height: clamp(18px, 7vw, 28px);
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--muted);
    transition: all var(--transition);
  }
  .account-btn:hover {
    background: rgba(128,128,128,0.25);
    color: var(--fg);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    transform: scale(1.05);
  }
  .account-btn:active {
    transform: scale(0.95);
    box-shadow: none;
  }
  .account-btn.danger:hover {
    background: var(--danger-dim);
    border-color: var(--danger);
    color: var(--danger);
    box-shadow: 0 2px 8px rgba(239,83,80,0.25);
  }
  .account-btn.danger:active {
    transform: scale(0.95);
    box-shadow: none;
  }
  /* Double-click delete confirmation state */
  .account-btn.danger.confirm-delete {
    background: var(--danger);
    border-color: var(--danger);
    color: white;
    animation: pulse-delete 0.5s ease-in-out infinite;
  }
  @keyframes pulse-delete {
    0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 83, 80, 0.4); }
    50% { transform: scale(1.1); box-shadow: 0 0 0 4px rgba(239, 83, 80, 0); }
  }
  .account-btn svg { width: 12px; height: 12px; }

  /* === Account Checkbox (Selection Mode) === */
  .account-checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    margin-right: 6px;
    cursor: pointer;
  }
  .account-checkbox input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }
  .account-checkbox .checkmark {
    width: 16px;
    height: 16px;
    border: 2px solid var(--muted);
    border-radius: 3px;
    background: transparent;
    transition: all var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .account-checkbox:hover .checkmark {
    border-color: var(--accent);
  }
  .account-checkbox input:checked ~ .checkmark {
    background: var(--accent);
    border-color: var(--accent);
  }
  .account-checkbox input:checked ~ .checkmark::after {
    content: '‚úì';
    color: #fff;
    font-size: 10px;
    font-weight: bold;
  }
  .account.selected {
    background: var(--accent-dim);
    border-color: var(--accent);
  }

  /* === Bulk Actions Bar === */
  .bulk-actions-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
    margin-top: 8px;
    background: linear-gradient(135deg, var(--accent-dim) 0%, rgba(63,182,139,0.05) 100%);
    border-radius: var(--radius-md);
    padding: 8px 12px;
  }
  .bulk-actions-bar.hidden {
    display: none;
  }
  .bulk-info {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    color: var(--accent);
    font-weight: 600;
  }
  .bulk-count {
    background: var(--accent);
    color: #fff;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 10px;
    min-width: 18px;
    text-align: center;
  }
  .bulk-buttons {
    display: flex;
    gap: 4px;
    flex: 1;
  }
  .btn-sm {
    padding: 4px 8px;
    font-size: 10px;
  }
  #selectModeBtn.active {
    background: var(--accent-dim);
    border-color: var(--accent);
    color: var(--accent);
  }

  /* === Empty State === */
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
    color: var(--muted);
  }
  .empty-illustration {
    margin-bottom: 16px;
    opacity: 0.9;
    animation: emptyFloat 3s ease-in-out infinite;
  }
  @keyframes emptyFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
  .empty-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--fg);
    margin: 0 0 8px 0;
  }
  .empty-desc {
    font-size: 12px;
    color: var(--muted);
    margin: 0 0 16px 0;
    max-width: 220px;
    line-height: 1.5;
  }
  /* Legacy support for old empty state classes */
  .empty-state-icon {
    font-size: 40px;
    margin-bottom: 12px;
    opacity: 0.5;
  }
  .empty-state-text {
    font-size: 12px;
    margin-bottom: 16px;
  }

  /* === Overlay (Settings) === */
  .overlay {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 100;
    display: none;
    flex-direction: column;
    animation: slideIn 0.25s ease;
  }
  .overlay.visible { display: flex; }
  @keyframes slideIn { 
    from { transform: translateX(100%); } 
    to { transform: translateX(0); } 
  }
  .overlay-header {
    display: flex;
    align-items: center;
    gap: 12px;
    height: 42px;
    padding: 0 12px;
    background: linear-gradient(180deg, var(--bg-elevated) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }
  .overlay-back {
    padding: 6px 10px;
    font-size: 11px;
    font-weight: 600;
    background: transparent;
    border: none;
    color: var(--accent);
    cursor: pointer;
    transition: all var(--transition);
  }
  .overlay-back:hover { color: var(--accent-hover); }
  .overlay-title {
    font-size: 13px;
    font-weight: 600;
    flex: 1;
  }
  .overlay-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }
  .overlay-footer {
    padding: 12px 16px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-elevated);
  }
  .overlay-version {
    font-size: 10px;
    color: var(--muted);
  }

  /* === Settings Rows === */
  .setting-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
  }
  .setting-row:last-child { border-bottom: none; }
  .setting-label {
    font-size: 12px;
    font-weight: 500;
  }
  .setting-desc {
    font-size: 10px;
    color: var(--muted);
    margin-top: 2px;
  }
  .btn-sm {
    padding: 6px 12px;
    font-size: 10px;
  }

  /* === Import/Export Section === */
  .import-export-section {
    margin-top: 20px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(63, 182, 139, 0.08) 0%, rgba(63, 182, 139, 0.02) 100%);
    border: 1px solid rgba(63, 182, 139, 0.25);
    border-radius: var(--radius-md);
  }
  .import-export-section .section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
  }
  .import-export-section .section-icon {
    font-size: 14px;
  }
  .import-export-section .section-title {
    font-size: 12px;
    font-weight: 600;
  }

  /* === Settings Card === */
  .settings-card {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    margin-bottom: 12px;
    overflow: hidden;
    transition: all var(--transition-normal);
  }
  .settings-card-header {
    display: flex;
    align-items: center;
    padding: 10px 14px;
    background: rgba(255, 255, 255, 0.02);
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    user-select: none;
  }
  .settings-card-header:hover {
    background: rgba(255, 255, 255, 0.05);
  }
  .settings-card-icon {
    font-size: 16px;
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: var(--bg-hover);
    border-radius: var(--radius-sm);
  }
  .settings-card-title {
    font-size: 12px;
    font-weight: 600;
    flex: 1;
    color: var(--fg);
    margin: 0;
  }
  .settings-card-toggle {
    transition: transform 0.2s ease;
    color: var(--muted);
    font-size: 10px;
  }
  .settings-card.collapsed .settings-card-toggle {
    transform: rotate(-90deg);
  }
  .settings-card.collapsed .settings-card-body {
    display: none;
  }
  .settings-card-body {
    padding: 14px;
  }
  
  /* Compact Setting Row */
  .setting-row-compact {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  }
  .setting-row-compact:last-child {
    border-bottom: none;
  }
  .setting-info-compact {
    flex: 1;
    margin-right: 12px;
  }
  .setting-label-compact {
    font-size: 11px;
    font-weight: 600;
    color: var(--fg);
  }
  .setting-desc-compact {
    font-size: 10px;
    color: var(--muted);
  }
  .import-export-section .section-desc {
    font-size: 10px;
    color: var(--muted);
    margin-bottom: 12px;
  }
  .import-export-actions {
    display: flex;
    gap: 8px;
  }
  .import-export-actions .btn {
    flex: 1;
  }

  /* === Danger Zone Section === */
  .danger-zone-section {
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px dashed rgba(239, 83, 80, 0.3);
  }
  .danger-zone-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
  }
  .danger-zone-icon {
    font-size: 14px;
  }
  .danger-zone-title {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--danger);
  }
  .danger-zone-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: linear-gradient(135deg, rgba(239, 83, 80, 0.08) 0%, rgba(239, 83, 80, 0.02) 100%);
    border: 1px solid rgba(239, 83, 80, 0.25);
    border-radius: var(--radius-md);
    gap: 12px;
  }
  .danger-zone-card:hover {
    border-color: rgba(239, 83, 80, 0.4);
    background: linear-gradient(135deg, rgba(239, 83, 80, 0.12) 0%, rgba(239, 83, 80, 0.04) 100%);
  }
  .danger-zone-info {
    flex: 1;
    min-width: 0;
  }
  .danger-zone-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--fg);
    margin-bottom: 4px;
  }
  .danger-zone-desc {
    font-size: 10px;
    color: var(--muted);
    line-height: 1.4;
  }
  .danger-zone-hint {
    margin-top: 10px;
    font-size: 10px;
    color: var(--muted);
    padding-left: 4px;
  }
  .danger-zone-card + .danger-zone-card {
    margin-top: 10px;
  }
  .danger-zone-actions {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
  }
  .patch-card {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  .patch-card .danger-zone-info {
    width: 100%;
  }
  .patch-card .danger-zone-actions {
    justify-content: flex-start;
  }
  .patch-status-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
    flex-wrap: wrap;
  }
  .patch-status {
    font-size: 10px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: var(--radius-sm);
    background: var(--bg-elevated);
  }
  .patch-status.success {
    color: var(--accent);
    background: var(--accent-dim);
  }
  .patch-status.warning {
    color: var(--warning);
    background: rgba(229, 192, 123, 0.15);
  }
  .patch-status.error {
    color: var(--danger);
    background: var(--danger-dim);
  }
  .patch-version-info {
    font-size: 9px;
    color: var(--muted);
    font-family: monospace;
  }
  .patch-machine-id-row {
    margin-top: 4px;
  }
  .machine-id-preview {
    font-size: 9px;
    font-family: monospace;
    color: var(--muted);
    background: var(--bg);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    cursor: help;
  }
  .patch-indicator.needs-update {
    background: var(--warning);
    color: #1a1a1a;
  }
  .patch-indicator.needs-update::before {
    content: '‚¨Ü';
  }
  .btn-warning {
    background: linear-gradient(135deg, var(--warning) 0%, #d4a84a 100%);
    color: #1a1a1a;
    border: none;
  }
  .btn-warning:hover {
    background: linear-gradient(135deg, #e5c87a 0%, var(--warning) 100%);
  }

  /* === Modal === */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    z-index: 200;
    display: none;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.15s ease;
  }
  .modal-overlay.visible { display: flex; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .modal {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    width: 90%;
    max-width: 360px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
    animation: modalSlideIn 0.2s ease;
  }
  @keyframes modalSlideIn { 
    from { opacity: 0; transform: scale(0.95) translateY(-10px); } 
    to { opacity: 1; transform: scale(1) translateY(0); } 
  }
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
  }
  .modal-title {
    font-size: 13px;
    font-weight: 600;
  }
  .modal-close {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 18px;
    border-radius: var(--radius-sm);
    transition: all var(--transition);
  }
  .modal-close:hover {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .modal-body { padding: 16px; }
  .modal-hint {
    font-size: 10px;
    color: var(--muted);
    white-space: pre-line;
    line-height: 1.6;
    margin-bottom: 12px;
  }
  .modal-textarea {
    width: 100%;
    height: 80px;
    padding: 10px;
    font-size: 11px;
    font-family: monospace;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    resize: none;
    margin-bottom: 12px;
  }
  .modal-textarea:focus {
    outline: none;
    border-color: var(--accent);
  }

  /* === Dialog === */
  .dialog-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    z-index: 300;
    display: none;
    align-items: center;
    justify-content: center;
  }
  .dialog-overlay.visible { display: flex; }
  .dialog {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 20px;
    max-width: 320px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  }
  .dialog-title {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 8px;
  }
  .dialog-text {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 16px;
  }
  .dialog-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  /* === Enhanced Console Drawer v2 === */
  .console-drawer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--vscode-terminal-background, #0d0d0d);
    border-top: 1px solid var(--border);
    z-index: 50;
    transform: translateY(calc(100% - 32px));
    transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
    box-shadow: 0 -4px 20px rgba(0,0,0,0.4);
    min-height: 32px;
    max-height: 60vh;
  }
  .console-drawer.has-errors {
    border-top-color: var(--danger);
    box-shadow: 0 -4px 20px rgba(229,83,83,0.2);
  }
  .console-drawer.has-warnings {
    border-top-color: var(--warning);
  }
  .console-drawer.open { 
    transform: translateY(0);
    resize: vertical;
    overflow: hidden;
  }
  /* Resize handle */
  .console-drawer.open::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    opacity: 0.5;
    cursor: ns-resize;
    transition: opacity 0.2s ease;
  }
  .console-drawer.open:hover::before {
    opacity: 0.8;
  }
  
  /* Console Header - Compact */
  .console-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 8px;
    cursor: pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, transparent 100%);
    border-bottom: 1px solid var(--border-subtle);
    user-select: none;
    transition: background 0.2s ease;
    min-height: 24px;
  }
  .console-header:hover { background: rgba(255,255,255,0.04); }
  .console-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .console-header-right {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .console-title-group {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .console-icon-indicator {
    font-size: 6px;
    color: var(--muted);
    opacity: 0.5;
    transition: all 0.3s ease;
  }
  .console-icon-indicator.has-errors {
    color: var(--danger);
    opacity: 1;
    animation: indicatorPulse 1.5s ease-in-out infinite;
  }
  .console-icon-indicator.has-warnings {
    color: var(--warning);
    opacity: 1;
  }
  @keyframes indicatorPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.2); }
  }
  .console-title {
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--text-secondary);
  }
  .console-badge {
    font-size: 8px;
    padding: 1px 5px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border-radius: 8px;
    font-weight: 600;
    min-width: 16px;
    text-align: center;
  }
  .console-badge.error {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .console-badge.warning {
    background: rgba(255, 193, 7, 0.15);
    color: #ffc107;
  }
  .console-new-indicator {
    font-size: 8px;
    color: var(--accent);
    font-weight: 600;
    opacity: 0;
    transform: translateX(-5px);
    transition: all 0.3s ease;
    animation: newIndicatorPulse 2s ease-in-out infinite;
  }
  .console-new-indicator.visible {
    opacity: 1;
    transform: translateX(0);
  }
  @keyframes newIndicatorPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  .console-toggle-icon {
    font-size: 9px;
    color: var(--muted);
    transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
  }
  .console-drawer.open .console-toggle-icon { transform: rotate(180deg); }
  
  /* Console Toolbar - Compact */
  .console-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 3px 8px;
    background: rgba(0,0,0,0.3);
    border-bottom: 1px solid var(--border-subtle);
  }
  .console-filters {
    display: flex;
    gap: 2px;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .console-filters::-webkit-scrollbar { display: none; }
  .console-filter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 3px;
    padding: 3px 6px;
    font-size: 9px;
    font-weight: 500;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 4px;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
    min-width: 24px;
  }
  .console-filter:hover {
    background: rgba(255,255,255,0.05);
    color: var(--text-secondary);
  }
  .console-filter.active {
    background: var(--accent-dim);
    color: var(--accent);
    border-color: rgba(63,182,139,0.3);
  }
  .console-filter.has-items {
    color: var(--text-secondary);
  }
  .filter-label {
    font-size: 9px;
    font-weight: 600;
  }
  .filter-icon { 
    font-size: 10px;
    font-weight: bold;
    font-family: monospace;
  }
  .filter-icon.error { color: var(--danger); }
  .filter-icon.warning { color: #ffc107; }
  .filter-icon.success { color: var(--accent); }
  .filter-count {
    font-size: 8px;
    opacity: 0.7;
    font-weight: 600;
  }
  .console-actions {
    display: flex;
    gap: 2px;
  }
  .console-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    opacity: 0.5;
    transition: all 0.15s ease;
    font-size: 11px;
  }
  .console-btn:hover {
    background: rgba(255,255,255,0.1);
    opacity: 1;
  }
  .console-btn.scroll-btn {
    font-weight: bold;
    font-size: 12px;
  }
  .console-btn.scroll-btn.hidden {
    display: none;
  }
  
  /* Console Body */
  .console-body {
    max-height: 180px;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 4px 8px;
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    font-size: 11px;
    line-height: 1.4;
    position: relative;
    width: 100%;
    box-sizing: border-box;
  }
  .console-body::-webkit-scrollbar { width: 6px; }
  .console-body::-webkit-scrollbar-track { background: transparent; }
  .console-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  .console-body::-webkit-scrollbar-thumb:hover { background: var(--border-medium); }
  
  /* Console Line - Enhanced */
  .console-line {
    display: flex;
    align-items: flex-start;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 6px;
    padding: 4px 8px;
    font-size: 11px;
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    border-left: 2px solid transparent;
    border-radius: 0 4px 4px 0;
    margin: 1px 0;
    animation: lineSlideIn 0.2s ease-out;
    animation-fill-mode: both;
    transition: background 0.15s ease;
    min-width: 0;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
  }
  @keyframes lineSlideIn {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  .console-line:hover {
    background: rgba(255,255,255,0.02);
  }
  .console-line:last-child { border-bottom: none; }
  .console-line.hidden { display: none; }
  
  /* Console Line Types with border-left */
  .console-line.error { 
    border-left-color: var(--danger);
    background: rgba(229,83,83,0.05);
    color: var(--danger);
  }
  .console-line.error:hover {
    background: rgba(229,83,83,0.08);
  }
  .console-line.error .console-icon { color: var(--danger); }
  
  .console-line.success { 
    border-left-color: var(--accent);
    color: var(--accent);
  }
  .console-line.success:hover {
    background: rgba(63,182,139,0.05);
  }
  .console-line.success .console-icon { color: var(--accent); }
  
  .console-line.warning { 
    border-left-color: var(--warning);
    background: rgba(255,193,7,0.03);
    color: #ffc107;
  }
  .console-line.warning:hover {
    background: rgba(255,193,7,0.06);
  }
  .console-line.warning .console-icon { color: #ffc107; }
  
  .console-line.info { 
    color: var(--text-secondary);
    border-left-color: transparent;
  }
  .console-line.info .console-icon { color: var(--muted); }
  
  .console-icon {
    flex-shrink: 0;
    width: 14px;
    text-align: center;
    font-size: 10px;
    font-weight: bold;
    font-family: monospace;
    opacity: 0.8;
  }
  .console-time {
    flex-shrink: 0;
    font-size: 9px;
    color: var(--muted);
    opacity: 0.5;
    font-family: monospace;
    min-width: 45px;
  }
  .console-msg {
    flex: 1 1 0;
    word-break: break-all;
    white-space: normal;
    overflow-wrap: break-word;
    min-width: 0;
    max-width: 100%;
    display: inline;
    overflow: hidden;
  }
  .console-msg span {
    word-break: break-all;
    white-space: normal;
  }
  .console-count {
    flex-shrink: 0;
    font-size: 8px;
    font-weight: 600;
    padding: 1px 5px;
    background: var(--bg-elevated);
    color: var(--muted);
    border-radius: 8px;
    margin-left: 4px;
  }
  
  /* Syntax Highlighting */
  .console-msg .hl-path {
    color: #6a9fb5;
  }
  .console-msg .hl-url {
    color: #6a9fb5;
    text-decoration: underline;
    text-decoration-style: dotted;
  }
  .console-msg .hl-number {
    color: #d19a66;
  }
  .console-msg .hl-string {
    color: #98c379;
  }
  .console-msg .hl-keyword {
    color: #c678dd;
    font-weight: 600;
  }
  .console-msg .hl-email {
    color: #61afef;
  }
  
  /* New Messages Bar */
  .console-new-messages {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 6px 12px;
    background: linear-gradient(180deg, transparent 0%, rgba(63,182,139,0.15) 100%);
    border-top: 1px solid var(--accent);
    text-align: center;
    font-size: 10px;
    font-weight: 600;
    color: var(--accent);
    cursor: pointer;
    opacity: 0;
    transform: translateY(100%);
    transition: all 0.3s ease;
    pointer-events: none;
  }
  .console-new-messages.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  .console-new-messages:hover {
    background: linear-gradient(180deg, transparent 0%, rgba(63,182,139,0.25) 100%);
  }

  /* Legacy support - hide old classes */
  .logs-drawer { display: none; }

  /* === Toast Container === */
  .toast-container {
    position: fixed;
    top: 50px;
    right: 12px;
    z-index: 400;
    display: flex;
    flex-direction: column;
    gap: 8px;
    pointer-events: none;
  }
  .toast {
    padding: 10px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    font-size: 11px;
    display: flex;
    align-items: center;
    gap: 8px;
    animation: toastSlideIn 0.3s ease;
    pointer-events: auto;
    max-width: 280px;
  }
  @keyframes toastSlideIn { 
    from { opacity: 0; transform: translateX(100%); } 
    to { opacity: 1; transform: translateX(0); } 
  }
  .toast.removing { animation: toastSlideOut 0.3s ease forwards; }
  @keyframes toastSlideOut { to { opacity: 0; transform: translateX(100%); } }
  .toast-icon { font-size: 14px; }
  .toast-message { flex: 1; }
  .toast.success { border-color: var(--accent); }
  .toast.error { border-color: var(--danger); }
  .toast.warning { border-color: var(--warning); }

  /* === Skeleton Loading === */
  .skeleton { pointer-events: none; }
  .skeleton-pulse {
    background: linear-gradient(90deg, var(--bg-elevated) 25%, rgba(128,128,128,0.2) 50%, var(--bg-elevated) 75%);
    background-size: 200% 100%;
    animation: skeletonPulse 1.5s ease-in-out infinite;
  }
  @keyframes skeletonPulse {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  .skeleton-line { 
    height: 12px; 
    border-radius: 4px; 
    margin: 4px 0;
    background: var(--bg-elevated);
  }
  .skeleton-line.skeleton-pulse {
    background: linear-gradient(90deg, var(--bg-elevated) 25%, rgba(128,128,128,0.2) 50%, var(--bg-elevated) 75%);
    background-size: 200% 100%;
  }
  /* Skeleton variants */
  .skeleton-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
  }
  .skeleton-text {
    height: 10px;
    border-radius: 3px;
  }
  .skeleton-text.short { width: 40%; }
  .skeleton-text.medium { width: 60%; }
  .skeleton-text.long { width: 80%; }
  .skeleton-text.full { width: 100%; }
  .skeleton-card {
    padding: 12px 14px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    margin-bottom: 6px;
  }
  .account.skeleton { opacity: 0.6; }
  .account.skeleton .account-avatar { 
    background: var(--bg-elevated);
    animation: skeletonPulse 1.5s ease-in-out infinite;
    background-size: 200% 100%;
    background-image: linear-gradient(90deg, var(--bg-elevated) 25%, rgba(128,128,128,0.2) 50%, var(--bg-elevated) 75%);
  }
  .account.skeleton .account-email,
  .account.skeleton .account-meta {
    background: var(--bg-elevated);
    color: transparent;
    border-radius: 3px;
    animation: skeletonPulse 1.5s ease-in-out infinite;
    background-size: 200% 100%;
    background-image: linear-gradient(90deg, var(--bg-elevated) 25%, rgba(128,128,128,0.2) 50%, var(--bg-elevated) 75%);
  }
  /* Shimmer effect variant */
  .skeleton-shimmer {
    position: relative;
    overflow: hidden;
    background: var(--bg-elevated);
  }
  .skeleton-shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    animation: shimmer 1.5s infinite;
  }
  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }
  /* Skeleton fade out */
  .skeleton-fade-out {
    animation: skeletonFadeOut 0.2s ease forwards;
  }
  @keyframes skeletonFadeOut {
    to { opacity: 0; transform: scale(0.95); }
  }

  /* === Tab Transition Animations === */
  .tab-content {
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
  .tab-content.tab-fade-out {
    opacity: 0;
    transform: translateY(-8px);
    pointer-events: none;
  }
  .tab-content.tab-fade-in {
    animation: tabFadeIn 0.2s ease forwards;
  }
  @keyframes tabFadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* === Improved Toast Animations === */
  .toast.toast-entering {
    opacity: 0;
    transform: translateX(100%) scale(0.8);
  }
  .toast.toast-visible {
    opacity: 1;
    transform: translateX(0) scale(1);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .toast.toast-removing {
    opacity: 0;
    transform: translateX(100%) scale(0.8);
    transition: all 0.3s ease-in;
  }
  .toast.info { border-color: var(--accent); }
  .toast {
    cursor: pointer;
  }
  .toast:hover {
    transform: translateX(-4px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  }

  /* === Keyboard Navigation Focus === */
  .account.keyboard-focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    background: var(--accent-dim);
    transform: scale(1.01);
    z-index: 10;
    position: relative;
  }
  .account.keyboard-focus::before {
    content: '‚Üí';
    position: absolute;
    left: -20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--accent);
    font-size: 12px;
    animation: focusArrowPulse 1s ease-in-out infinite;
  }
  @keyframes focusArrowPulse {
    0%, 100% { opacity: 1; transform: translateY(-50%) translateX(0); }
    50% { opacity: 0.5; transform: translateY(-50%) translateX(3px); }
  }

  /* === Switching State === */
  .account.switching {
    opacity: 0.5;
    pointer-events: none;
    position: relative;
  }
  .account.switching::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid var(--accent);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* === Banned Account Styles === */
  .account.banned {
    opacity: 0.5;
    border-color: #8b0000;
    background: linear-gradient(135deg, rgba(139,0,0,0.1) 0%, transparent 100%);
  }
  .account-status.banned { background: #8b0000; }
  .ban-badge { margin-left: 4px; font-size: 10px; }
  .ban-reason { color: #ff6b6b; font-size: 9px; font-weight: 600; }
  .list-group.banned { color: #ff6b6b; border-color: rgba(139,0,0,0.3); }

  /* === Tab Bar Navigation === */
  .tab-bar {
    display: flex;
    gap: clamp(0px, 0.5vw, 2px);
    padding: clamp(1px, 0.8vw, 3px) clamp(2px, 1.2vw, 5px);
    background: var(--bg-elevated);
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
    flex-shrink: 0; /* Don't shrink */
  }
  .tab-bar::-webkit-scrollbar {
    display: none;
  }
  .tab-item {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(2px, 1vw, 4px);
    padding: clamp(3px, 1.2vw, 5px) clamp(4px, 1.8vw, 7px);
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-md);
    color: var(--muted);
    font-size: clamp(8px, 2.5vw, 10px);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition);
    white-space: nowrap;
    min-width: clamp(20px, 8vw, 32px);
    scroll-snap-align: start;
    position: relative;
  }
  .tab-item:hover {
    background: rgba(128,128,128,0.1);
    color: var(--fg);
  }
  .tab-item.active {
    background: var(--accent-dim);
    color: var(--accent);
    border-color: var(--accent);
  }
  /* Active tab underline indicator */
  .tab-item.active::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
    box-shadow: 0 0 6px var(--accent-glow);
  }
  .tab-icon {
    font-size: clamp(8px, 2.8vw, 11px);
    line-height: 1;
    flex-shrink: 0;
  }
  .tab-icon svg {
    width: clamp(8px, 2.8vw, 11px);
    height: clamp(8px, 2.8vw, 11px);
  }
  .tab-label {
    display: none;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 50px;
  }
  /* Show labels when width >= 360px (controlled by responsive styles) */
  @media (min-width: 360px) {
    .tab-label { display: inline; }
    .tab-item { padding: 5px 9px; font-size: 10px; }
  }
  /* Hide labels on very narrow screens, show only icons */
  @media (max-width: 320px) {
    .tab-item { 
      padding: 4px 5px; 
      min-width: 28px;
      gap: 2px;
    }
    .tab-icon { font-size: 10px; }
    .tab-icon svg { width: 10px; height: 10px; }
    .tab-label { display: none !important; }
    .tab-badge { display: none; }
    .tab-item.active::after { width: 50%; }
  }
  @media (max-width: 380px) {
    .tab-item { 
      padding: 4px 6px; 
      min-width: 30px;
    }
    .tab-label { display: none !important; }
    .tab-badge { font-size: 7px; padding: 1px 3px; }
  }
  /* Wider screens */
  @media (min-width: 450px) {
    .tab-item { padding: 6px 12px; gap: 5px; font-size: 11px; }
    .tab-icon { font-size: 12px; }
    .tab-icon svg { width: 12px; height: 12px; }
    .tab-label { max-width: none; }
  }
  @media (min-width: 550px) {
    .tab-item { padding: 7px 14px; gap: 6px; }
    .tab-icon { font-size: 13px; }
  }
  .tab-badge {
    font-size: 8px;
    padding: 1px 4px;
    border-radius: 8px;
    background: rgba(128,128,128,0.2);
    color: var(--muted);
    flex-shrink: 0;
  }
  .tab-item.active .tab-badge {
    background: var(--accent);
    color: #fff;
  }

  /* === Tab Content Panels === */
  .tab-content {
    display: none;
    position: relative;
    z-index: 1;
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
  }
  .tab-content.active {
    display: flex;
    flex-direction: column;
  }
  
  /* Tab content transition animations */
  .tab-content.tab-fade-out {
    animation: tabFadeOut 0.15s ease-out forwards;
  }
  .tab-content.tab-fade-in {
    animation: tabFadeIn 0.15s ease-in forwards;
  }
  @keyframes tabFadeOut {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(-10px); }
  }
  @keyframes tabFadeIn {
    from { opacity: 0; transform: translateX(10px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* === Embedded Settings Sections (Stats, LLM inside Settings tab) === */
  .settings-section-embedded {
    margin-bottom: 16px;
    border-radius: var(--radius-lg);
    overflow: hidden;
  }
  .settings-section-embedded .stats-dashboard {
    margin: 0;
    border-radius: var(--radius-lg);
  }
  .settings-section-embedded .settings-content {
    padding: 0;
    max-height: none;
    overflow: visible;
  }
  /* Compact stats in settings */
  .settings-section-embedded .stats-cards {
    grid-template-columns: repeat(4, 1fr);
  }
  @media (max-width: 400px) {
    .settings-section-embedded .stats-cards {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* === Settings Tab (inline mode) === */
  .settings-content {
    padding: 16px 12px;
    overflow-y: auto;
    max-height: calc(100vh - 150px);
  }
  .settings-footer {
    padding: 12px 0;
    margin-top: 16px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .settings-version {
    font-size: 10px;
    color: var(--muted);
  }

  /* === Profiles Tab (inline mode) === */
  .profiles-tab {
    padding: 12px;
  }
  .profiles-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .profiles-title {
    font-size: 14px;
    font-weight: 600;
    margin: 0;
  }
  .profiles-content {
    min-height: 100px;
  }
  .profiles-empty {
    text-align: center;
    padding: 30px 20px;
    color: var(--muted);
  }
  .profiles-empty .empty-icon {
    font-size: 32px;
    margin-bottom: 10px;
    opacity: 0.5;
  }
  .profiles-empty .empty-text {
    font-size: 12px;
    margin-bottom: 14px;
  }
  .profiles-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .profile-card {
    padding: 12px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    transition: all var(--transition);
  }
  .profile-card:hover {
    border-color: rgba(63,182,139,0.3);
  }
  .profile-card.active {
    border-color: var(--accent);
    background: var(--accent-dim);
  }
  .profile-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .profile-card-radio {
    cursor: pointer;
  }
  .radio-dot {
    width: 16px;
    height: 16px;
    border: 2px solid var(--muted);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition);
  }
  .radio-dot.checked {
    border-color: var(--accent);
    background: var(--accent);
  }
  .radio-dot.checked::after {
    content: '';
    width: 6px;
    height: 6px;
    background: #fff;
    border-radius: 50%;
  }
  .profile-card-info {
    flex: 1;
    min-width: 0;
    cursor: pointer;
  }
  .profile-card-name {
    font-size: 12px;
    font-weight: 600;
  }
  .profile-card-email {
    font-size: 10px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .profile-card-actions {
    display: flex;
    gap: 4px;
  }
  .profile-card-meta {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--border);
    font-size: 10px;
    color: var(--muted);
  }
  .profile-strategy {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .profile-stats {
    color: var(--muted);
  }
  .profiles-add-btn {
    margin-top: 12px;
    width: 100%;
  }

  /* === Profile Editor Form (inline) === */
  .profile-editor-form {
    padding: 12px 0;
  }
  .profile-editor-form .editor-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
  }
  .profile-editor-form .editor-title {
    font-size: 14px;
    font-weight: 600;
  }
  .profile-editor-form .editor-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .profile-editor-form .editor-footer {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
  }

    
  /* === Settings Cards === */
  .settings-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    margin-bottom: 12px;
    overflow: hidden;
  }
  .settings-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: rgba(0,0,0,0.15);
    border-bottom: 1px solid var(--border);
  }
  .settings-card-icon {
    font-size: 16px;
  }
  .settings-card-title {
    flex: 1;
    font-size: 12px;
    font-weight: 600;
  }
  .settings-card-body {
    padding: 4px 14px;
  }
  .settings-card .setting-row {
    padding: 10px 0;
  }
  .settings-card .setting-row:last-child {
    border-bottom: none;
  }
  
  /* Active Profile in Card */
  .settings-card .active-profile-content {
    padding: 12px 14px;
  }
  .settings-card .active-profile-empty {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .settings-card .active-profile-empty .empty-text {
    flex: 1;
    font-size: 11px;
    color: var(--muted);
  }
  .settings-card .active-profile-info {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .settings-card .active-profile-avatar {
    font-size: 24px;
  }
  .settings-card .active-profile-details {
    flex: 1;
    min-width: 0;
  }
  .settings-card .active-profile-name {
    font-size: 12px;
    font-weight: 600;
  }
  .settings-card .active-profile-email {
    font-size: 10px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .settings-card .active-profile-strategy {
    font-size: 10px;
    color: var(--muted);
    margin-top: 2px;
  }
  .settings-card .active-profile-stats {
    display: flex;
    gap: 12px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
  }
  .settings-card .active-profile-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .settings-card .active-profile-stat-value {
    font-size: 14px;
    font-weight: 700;
  }
  .settings-card .active-profile-stat-value.success { color: var(--accent); }
  .settings-card .active-profile-stat-value.danger { color: var(--danger); }
  .settings-card .active-profile-stat-label {
    font-size: 9px;
    color: var(--muted);
    text-transform: uppercase;
  }

  /* Settings Card Footer */
  .settings-card-footer {
    padding: 12px 14px;
    background: rgba(0,0,0,0.1);
    border-top: 1px solid var(--border);
  }

  /* Form Groups for LLM Settings */
  .form-group {
    margin-bottom: 14px;
  }
  .form-group:last-child {
    margin-bottom: 0;
  }
  .form-group label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: var(--fg);
    margin-bottom: 6px;
  }
  .form-control {
    width: 100%;
    padding: 8px 12px;
    font-size: 12px;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    transition: border-color var(--transition);
  }
  .form-control:focus {
    outline: none;
    border-color: var(--accent);
  }
  .form-control::placeholder {
    color: var(--muted);
  }
  .form-group .setting-desc {
    margin-top: 4px;
  }

  /* Spoof Section as Card */
  .spoof-section {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    margin-bottom: 12px;
    overflow: hidden;
  }
  .spoof-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    background: rgba(0,0,0,0.15);
  }
  .spoof-title {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .spoof-icon {
    font-size: 16px;
  }
  .spoof-details {
    padding: 12px 14px;
    border-top: 1px solid var(--border);
  }
  .spoof-details.hidden {
    display: none;
  }
  .spoof-modules {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
  .spoof-module {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 8px;
    background: rgba(0,0,0,0.1);
    border-radius: var(--radius-sm);
  }
  .module-icon {
    font-size: 14px;
  }
  .module-name {
    font-size: 10px;
    font-weight: 600;
  }
  .module-desc {
    font-size: 9px;
    color: var(--muted);
    margin-top: 2px;
  }
  .spoof-warning {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
    padding: 8px;
    background: rgba(217,163,52,0.1);
    border-radius: var(--radius-sm);
    font-size: 10px;
    color: var(--warning);
  }

    
  /* === Stats Dashboard === */
  .stats-dashboard {
    padding: 12px;
  }
  .stats-header {
    margin-bottom: 16px;
  }
  .stats-title {
    font-size: 14px;
    font-weight: 600;
    margin: 0;
  }
  
  /* Stats Cards Grid */
  .stats-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 16px;
  }
  .stat-card {
    padding: 12px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    text-align: center;
  }
  .stat-card.success { border-color: rgba(63,182,139,0.3); }
  .stat-card.danger { border-color: rgba(229,83,83,0.3); }
  .stat-card.warning { border-color: rgba(217,163,52,0.3); }
  .stat-value {
    font-size: 24px;
    font-weight: 700;
    line-height: 1;
  }
  .stat-card.success .stat-value { color: var(--accent); }
  .stat-card.danger .stat-value { color: var(--danger); }
  .stat-card.warning .stat-value { color: var(--warning); }
  .stat-label {
    font-size: 10px;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 4px;
  }

  /* Stats Sections */
  .stats-section {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: 12px;
    margin-bottom: 12px;
  }
  .stats-section-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 10px;
  }

  /* Usage Overview */
  .usage-overview {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .usage-bar-container {
    flex: 1;
    height: 8px;
    background: rgba(128,128,128,0.2);
    border-radius: 4px;
    overflow: hidden;
  }
  .usage-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent-hover));
    border-radius: 4px;
    transition: width 0.3s ease;
  }
  .usage-numbers {
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
  }
  .usage-current { color: var(--accent); }
  .usage-separator { color: var(--muted); margin: 0 2px; }
  .usage-limit { color: var(--muted); }
  .usage-avg {
    font-size: 10px;
    color: var(--muted);
    margin-top: 8px;
  }
  .usage-avg strong { color: var(--fg); }

  /* Mini Chart */
  .mini-chart {
    display: flex;
    align-items: flex-end;
    gap: 4px;
    height: 60px;
    padding: 4px 0;
  }
  .chart-bar {
    flex: 1;
    background: linear-gradient(180deg, var(--accent) 0%, var(--accent-dim) 100%);
    border-radius: 2px 2px 0 0;
    min-height: 4px;
    transition: height 0.3s ease;
  }
  .chart-bar:hover {
    background: var(--accent);
  }
  .chart-labels {
    display: flex;
    justify-content: space-between;
    font-size: 9px;
    color: var(--muted);
    margin-top: 4px;
  }

  /* Health Bars */
  .health-bars {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .health-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .health-label {
    font-size: 10px;
    width: 60px;
    white-space: nowrap;
  }
  .health-bar {
    flex: 1;
    height: 6px;
    background: rgba(128,128,128,0.2);
    border-radius: 3px;
    overflow: hidden;
  }
  .health-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.3s ease;
  }
  .health-fill.success { background: var(--accent); }
  .health-fill.danger { background: var(--danger); }
  .health-fill.warning { background: var(--warning); }
  .health-percent {
    font-size: 10px;
    font-weight: 600;
    width: 32px;
    text-align: right;
  }


  /* === Strategy Selection === */
  .strategy-option {
    display: flex;
    gap: 12px;
    padding: 16px;
    border: 2px solid var(--glass-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    margin-bottom: 12px;
    position: relative;
  }
  .strategy-option:hover {
    border-color: var(--accent);
    background: var(--glass-bg);
  }
  .strategy-option.selected {
    border-color: var(--accent);
    background: rgba(63, 182, 139, 0.05);
  }
  .strategy-option.strategy-safe.selected {
    border-color: #4CAF50;
    background: rgba(76, 175, 80, 0.08);
  }
  .strategy-option.strategy-risky.selected {
    border-color: #FF9800;
    background: rgba(255, 152, 0, 0.08);
  }
  .strategy-option input[type="radio"] {
    margin-top: 2px;
    cursor: pointer;
  }
  
  /* Strategy Icon Wrapper */
  .strategy-icon-wrapper {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .strategy-icon-safe {
    background: rgba(76, 175, 80, 0.15);
    border: 1px solid rgba(76, 175, 80, 0.3);
  }
  .strategy-icon-risky {
    background: rgba(255, 152, 0, 0.15);
    border: 1px solid rgba(255, 152, 0, 0.3);
  }
  .strategy-icon {
    font-size: 24px;
  }
  
  .strategy-content {
    flex: 1;
  }
  .strategy-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 6px;
  }
  .strategy-desc {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 10px;
    line-height: 1.4;
  }
  .strategy-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }
  .strategy-risk {
    font-size: 11px;
    color: var(--muted);
  }
  
  /* Strategy Features */
  .strategy-features {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 12px;
    margin-bottom: 10px;
  }
  .strategy-feature {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
  }
  .strategy-feature .feature-icon {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: bold;
  }
  .strategy-feature.feature-pro .feature-icon {
    background: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
  }
  .strategy-feature.feature-pro {
    color: #4CAF50;
  }
  .strategy-feature.feature-con .feature-icon {
    background: rgba(255, 152, 0, 0.2);
    color: #FF9800;
  }
  .strategy-feature.feature-con {
    color: #FF9800;
  }
  
  /* Risk Bar */
  .strategy-risk-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--glass-border);
  }
  .risk-label {
    font-size: 10px;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
  }
  .risk-meter {
    flex: 1;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
  }
  .risk-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.3s ease;
  }
  .risk-fill.risk-low {
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
  }
  .risk-fill.risk-medium {
    background: linear-gradient(90deg, #FF9800, #FFC107);
  }
  .risk-fill.risk-high {
    background: linear-gradient(90deg, #FF9800, #f44336);
  }
  .risk-value {
    font-size: 11px;
    font-weight: 600;
    min-width: 45px;
    text-align: right;
  }
  .risk-low-text { color: #4CAF50; }
  .risk-medium-text { color: #FF9800; }
  .risk-high-text { color: #f44336; }

  /* === Badge === */
  .badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
  }
  .badge-success {
    background: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
  }
  .badge-warning {
    background: rgba(255, 152, 0, 0.2);
    color: #FF9800;
  }
  .badge-danger {
    background: rgba(244, 67, 54, 0.2);
    color: #f44336;
  }
  .badge-info {
    background: rgba(33, 150, 243, 0.2);
    color: #2196F3;
  }

  /* === Strategy Switch (iOS Segmented Control) === */
  .strategy-switch {
    display: flex;
    flex: 1;
    background: var(--bg-elevated);
    border-radius: var(--radius-sm);
    padding: 2px;
    gap: 2px;
    position: relative;
    min-width: 0;
  }
  .strategy-sw-btn {
    flex: 1;
    padding: 5px 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    font-size: 11px;
    font-weight: 500;
    font-family: inherit;
    background: transparent;
    color: var(--muted);
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    position: relative;
    z-index: 1;
    min-width: 0;
    overflow: hidden;
  }
  .strategy-sw-btn .sw-icon {
    font-size: 12px;
    line-height: 1;
    flex-shrink: 0;
  }
  .strategy-sw-btn .sw-label {
    font-size: 11px;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .strategy-sw-btn:hover:not(.active) {
    color: var(--fg);
  }
  .strategy-sw-btn.active {
    background: var(--accent);
    color: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  .strategy-sw-btn.active .sw-icon {
    filter: brightness(1.1);
  }
  
  /* Responsive: hide labels on narrow screens */
  @media (max-width: 280px) {
    .strategy-sw-btn .sw-label {
      display: none;
    }
    .strategy-sw-btn {
      padding: 5px 8px;
    }
  }
  @media (max-width: 220px) {
    .strategy-sw-btn {
      padding: 4px 6px;
    }
    .strategy-sw-btn .sw-icon {
      font-size: 10px;
    }
  }
  @media (max-width: 180px) {
    .strategy-switch {
      padding: 1px;
      gap: 1px;
    }
    .strategy-sw-btn {
      padding: 3px 4px;
    }
    .strategy-sw-btn .sw-icon {
      font-size: 9px;
    }
  }
  
  /* Legacy support */
  .strategy-hint {
    font-size: 16px;
    padding: 2px 4px;
    cursor: help;
  }
  .strategy-hint.low {
    color: #4CAF50;
  }
  .strategy-hint.high {
    color: #f44336;
  }
  .autoreg-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .autoreg-row .form-group {
    margin: 0;
  }
  .autoreg-row .form-group.compact {
    width: 50px;
  }
  .autoreg-row .form-group.compact input {
    padding: 6px 4px;
    text-align: center;
  }

  /* === Batch Registration Card === */
  .batch-reg-card {
    margin: 8px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: all var(--transition);
  }
  .batch-reg-card:hover {
    border-color: rgba(63,182,139,0.3);
  }
  .batch-reg-card.running {
    border-color: var(--accent);
    box-shadow: 0 0 20px rgba(63,182,139,0.15);
  }
  .batch-reg-card.collapsed {
    border-color: var(--border);
  }
  .batch-reg-card.collapsed .batch-reg-body {
    display: none;
  }
  .batch-reg-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 14px;
    background: rgba(0,0,0,0.1);
    cursor: pointer;
    transition: background 0.2s ease;
  }
  .batch-reg-header:hover {
    background: rgba(0,0,0,0.15);
  }
  .batch-reg-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
  }
  .batch-reg-toggle {
    font-size: 10px;
    color: var(--muted);
    transition: transform 0.2s ease;
  }
  .batch-reg-card.collapsed .batch-reg-toggle {
    transform: rotate(0deg);
  }
  .batch-reg-icon {
    font-size: 16px;
  }
  .batch-reg-badge {
    font-size: 9px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 600;
  }
  .batch-reg-badge.running {
    background: var(--accent-dim);
    color: var(--accent);
    animation: pulse 1.5s ease-in-out infinite;
  }
  .batch-reg-badge.complete {
    background: rgba(76,175,80,0.2);
    color: #4CAF50;
  }
  .batch-reg-body {
    padding: 14px;
    transition: all 0.2s ease;
  }
  .batch-reg-body.hidden {
    display: none;
  }
  
  /* Running state - progress display */
  .batch-reg-status {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 16px;
    background: rgba(0,0,0,0.15);
    border-radius: var(--radius-md);
    margin-bottom: 14px;
  }
  .batch-reg-progress-ring {
    position: relative;
    width: 70px;
    height: 70px;
    flex-shrink: 0;
  }
  .batch-reg-progress-ring svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }
  .batch-reg-progress-ring .progress-bg {
    fill: none;
    stroke: rgba(128,128,128,0.2);
    stroke-width: 3;
  }
  .batch-reg-progress-ring .progress-fill {
    fill: none;
    stroke: var(--accent);
    stroke-width: 3;
    stroke-linecap: round;
    transition: stroke-dasharray 0.5s ease;
  }
  .batch-reg-progress-ring .progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 14px;
    font-weight: 700;
    color: var(--fg);
  }
  .batch-reg-status-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .status-line {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
  }
  .status-label {
    color: var(--muted);
  }
  .status-value {
    font-weight: 600;
    color: var(--fg);
  }
  .status-line.timer .status-value {
    color: var(--accent);
    font-family: monospace;
  }
  
  /* Settings state */
  .batch-reg-settings {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .batch-reg-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .batch-reg-field > label {
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  /* Count selector */
  .batch-reg-count-group {
    display: flex;
    align-items: center;
    gap: 0;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-md);
    overflow: hidden;
  }
  .count-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    color: var(--fg);
    font-size: 18px;
    font-weight: 300;
    cursor: pointer;
    transition: all var(--transition);
  }
  .count-btn:hover:not(:disabled) {
    background: var(--accent-dim);
    color: var(--accent);
  }
  .count-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
  .count-input {
    flex: 1;
    height: 40px;
    border: none;
    background: transparent;
    color: var(--fg);
    font-size: 18px;
    font-weight: 600;
    text-align: center;
    font-family: inherit;
  }
  .count-input:focus {
    outline: none;
  }
  
  /* Interval pills */
  .batch-reg-interval-pills {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }
  .interval-pill {
    padding: 8px 14px;
    border: 1px solid var(--input-border);
    border-radius: 20px;
    background: var(--input-bg);
    color: var(--muted);
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition);
  }
  .interval-pill:hover {
    border-color: var(--accent);
    color: var(--fg);
  }
  .interval-pill.active {
    background: var(--accent);
    border-color: var(--accent);
    color: #fff;
  }
  .batch-reg-hint {
    font-size: 10px;
    color: var(--muted);
    margin-top: -4px;
  }
  
  /* Name mode selector */
  .batch-reg-name-mode {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .name-mode-option {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid var(--input-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition);
  }
  .name-mode-option:hover {
    border-color: rgba(63,182,139,0.4);
  }
  .name-mode-option.active {
    border-color: var(--accent);
    background: var(--accent-dim);
  }
  .name-mode-option input[type="radio"] {
    margin-top: 2px;
    accent-color: var(--accent);
  }
  .name-mode-label {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .name-mode-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--fg);
  }
  .name-mode-desc {
    font-size: 10px;
    color: var(--muted);
  }
  .batch-reg-input {
    width: 100%;
    padding: 10px 12px;
    font-size: 12px;
    font-family: inherit;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--input-border);
    border-radius: var(--radius-sm);
    margin-top: 8px;
    transition: all var(--transition);
  }
  .batch-reg-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(63,182,139,0.15);
  }
  
  /* Preview names */
  .batch-reg-preview {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    background: rgba(63,182,139,0.08);
    border-radius: var(--radius-sm);
  }
  .preview-label {
    font-size: 10px;
    color: var(--muted);
    font-weight: 600;
    white-space: nowrap;
  }
  .preview-names {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }
  .preview-name {
    font-size: 11px;
    color: var(--accent);
    padding: 3px 8px;
    background: var(--bg);
    border-radius: var(--radius-sm);
    font-family: inherit;
  }
  
  /* Previous progress */
  .batch-reg-previous {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: rgba(255,193,7,0.1);
    border-radius: var(--radius-sm);
    margin-bottom: 12px;
    font-size: 11px;
    color: #FFC107;
  }
  .btn-link {
    background: none;
    border: none;
    color: var(--accent);
    font-size: 11px;
    cursor: pointer;
    text-decoration: underline;
  }
  .btn-link:hover {
    color: var(--accent-hover);
  }
  
  /* Buttons */
  .btn-block {
    width: 100%;
  }
  .btn-large {
    padding: 14px 20px;
    font-size: 13px;
    font-weight: 600;
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }
  
  /* =============================================
     BATCH REG RESPONSIVE - Ultra narrow screens
     ============================================= */
  
  /* 250-300px - Hide preview names, compact pills */
  @media (max-width: 300px) {
    .batch-reg-preview {
      display: none;
    }
    .batch-reg-interval-pills {
      gap: 3px;
    }
    .interval-pill {
      padding: 5px 7px;
      font-size: 9px;
    }
    .name-mode-option {
      padding: 6px 8px;
    }
    .name-mode-desc {
      font-size: 8px;
    }
    /* Hide name mode section on narrow screens */
    .batch-reg-name-mode {
      gap: 4px;
    }
  }
  
  /* 180-250px - Ultra compact */
  @media (max-width: 250px) {
    .batch-reg-card {
      margin: 2px;
      border-radius: 4px;
    }
    .batch-reg-header {
      padding: 4px 6px;
    }
    .batch-reg-title {
      font-size: 9px;
      gap: 3px;
    }
    .batch-reg-title > span:nth-child(2) {
      /* Hide "Batch Registration" text, keep icon */
      display: none;
    }
    .batch-reg-icon {
      font-size: 10px;
    }
    .batch-reg-badge {
      font-size: 6px;
      padding: 1px 3px;
    }
    .batch-reg-body {
      padding: 6px;
    }
    .batch-reg-settings {
      gap: 8px;
    }
    .batch-reg-field > label {
      font-size: 8px;
    }
    .batch-reg-interval-pills {
      gap: 2px;
      flex-wrap: wrap;
    }
    .interval-pill {
      padding: 4px 6px;
      font-size: 8px;
      border-radius: 10px;
      flex: 1 1 auto;
      text-align: center;
      min-width: 0;
    }
    .batch-reg-hint {
      font-size: 7px;
      display: none;
    }
    .batch-reg-preview {
      display: none;
    }
    .name-mode-option {
      padding: 5px 6px;
      gap: 4px;
    }
    .name-mode-title {
      font-size: 9px;
    }
    .name-mode-desc {
      display: none;
    }
    /* Hide name mode section completely on very narrow */
    .batch-reg-name-mode {
      display: none;
    }
    .count-btn {
      width: 24px;
      height: 24px;
      font-size: 12px;
    }
    .count-input {
      height: 24px;
      font-size: 12px;
      width: 40px;
    }
    .btn-large {
      padding: 8px 10px;
      font-size: 9px;
    }
  }
  
  /* 200-249px */
  @media (max-width: 249px) {
    .batch-reg-card {
      margin: 3px;
      border-radius: 4px;
    }
    .batch-reg-header {
      padding: 6px 8px;
    }
    .batch-reg-title {
      font-size: 10px;
      gap: 4px;
    }
    .batch-reg-icon {
      font-size: 12px;
    }
    .batch-reg-badge {
      font-size: 7px;
      padding: 1px 4px;
    }
    .batch-reg-body {
      padding: 8px;
    }
    .batch-reg-status {
      flex-direction: column;
      gap: 10px;
      padding: 10px;
    }
    .batch-reg-progress-ring {
      width: 50px;
      height: 50px;
    }
    .batch-reg-progress-ring .progress-text {
      font-size: 11px;
    }
    .status-line {
      font-size: 10px;
    }
    .batch-reg-settings {
      gap: 10px;
    }
    .batch-reg-field > label {
      font-size: 9px;
    }
    .count-btn {
      width: 28px;
      height: 28px;
      font-size: 14px;
    }
    .count-input {
      height: 28px;
      font-size: 14px;
    }
    .batch-reg-interval-pills {
      gap: 3px;
    }
    .interval-pill {
      padding: 5px 8px;
      font-size: 9px;
      border-radius: 12px;
    }
    .batch-reg-hint {
      font-size: 8px;
    }
    .name-mode-option {
      padding: 6px 8px;
      gap: 6px;
    }
    .name-mode-title {
      font-size: 10px;
    }
    .name-mode-desc {
      font-size: 8px;
    }
    .batch-reg-input {
      padding: 6px 8px;
      font-size: 10px;
    }
    .batch-reg-preview {
      padding: 6px 8px;
      gap: 6px;
      flex-direction: column;
      align-items: flex-start;
    }
    .preview-label {
      font-size: 8px;
    }
    .preview-names {
      gap: 3px;
    }
    .preview-name {
      font-size: 9px;
      padding: 2px 5px;
    }
    .btn-large {
      padding: 10px 12px;
      font-size: 10px;
    }
  }
  
  /* 160-199px - Micro */
  @media (max-width: 199px) {
    .batch-reg-card {
      margin: 2px;
      border-radius: 3px;
    }
    .batch-reg-header {
      padding: 4px 6px;
    }
    .batch-reg-title {
      font-size: 9px;
      gap: 3px;
    }
    .batch-reg-icon {
      font-size: 10px;
    }
    .batch-reg-badge {
      font-size: 6px;
      padding: 1px 3px;
    }
    .batch-reg-body {
      padding: 6px;
    }
    .batch-reg-status {
      flex-direction: column;
      gap: 8px;
      padding: 8px;
    }
    .batch-reg-progress-ring {
      width: 40px;
      height: 40px;
    }
    .batch-reg-progress-ring .progress-text {
      font-size: 9px;
    }
    .status-line {
      font-size: 8px;
    }
    .batch-reg-settings {
      gap: 8px;
    }
    .batch-reg-field > label {
      font-size: 8px;
    }
    .count-btn {
      width: 24px;
      height: 24px;
      font-size: 12px;
    }
    .count-input {
      height: 24px;
      font-size: 12px;
    }
    .batch-reg-interval-pills {
      gap: 2px;
    }
    .interval-pill {
      padding: 4px 6px;
      font-size: 8px;
      border-radius: 10px;
    }
    .batch-reg-hint {
      font-size: 7px;
    }
    .name-mode-option {
      padding: 5px 6px;
      gap: 4px;
    }
    .name-mode-title {
      font-size: 9px;
    }
    .name-mode-desc {
      font-size: 7px;
    }
    .batch-reg-input {
      padding: 5px 6px;
      font-size: 9px;
    }
    .batch-reg-preview {
      padding: 5px 6px;
      gap: 4px;
      flex-direction: column;
      align-items: flex-start;
    }
    .preview-label {
      font-size: 7px;
    }
    .preview-names {
      gap: 2px;
    }
    .preview-name {
      font-size: 8px;
      padding: 1px 4px;
    }
    .btn-large {
      padding: 8px 10px;
      font-size: 9px;
    }
  }
  
  /* < 160px - Nano */
  @media (max-width: 159px) {
    .batch-reg-card {
      margin: 1px;
      border-radius: 2px;
    }
    .batch-reg-header {
      padding: 3px 4px;
    }
    .batch-reg-title {
      font-size: 8px;
      gap: 2px;
    }
    .batch-reg-icon {
      font-size: 9px;
    }
    .batch-reg-badge {
      display: none;
    }
    .batch-reg-body {
      padding: 4px;
    }
    .batch-reg-status {
      flex-direction: column;
      gap: 6px;
      padding: 6px;
    }
    .batch-reg-progress-ring {
      width: 32px;
      height: 32px;
    }
    .batch-reg-progress-ring .progress-text {
      font-size: 8px;
    }
    .status-line {
      font-size: 7px;
    }
    .batch-reg-settings {
      gap: 6px;
    }
    .batch-reg-field > label {
      font-size: 7px;
    }
    .count-btn {
      width: 20px;
      height: 20px;
      font-size: 10px;
    }
    .count-input {
      height: 20px;
      font-size: 10px;
    }
    .batch-reg-interval-pills {
      gap: 2px;
      flex-wrap: wrap;
    }
    .interval-pill {
      padding: 3px 5px;
      font-size: 7px;
      border-radius: 8px;
    }
    .batch-reg-hint {
      font-size: 6px;
    }
    .name-mode-option {
      padding: 4px 5px;
      gap: 3px;
    }
    .name-mode-title {
      font-size: 8px;
    }
    .name-mode-desc {
      display: none;
    }
    .batch-reg-input {
      padding: 4px 5px;
      font-size: 8px;
    }
    .batch-reg-preview {
      display: none;
    }
    .btn-large {
      padding: 6px 8px;
      font-size: 8px;
    }
  }

  /* =============================================
     TOOLBAR MORE DROPDOWN - Responsive menu
     ============================================= */
  
  /* More button wrapper */
  .toolbar-more-wrapper {
    position: relative;
    display: none; /* Hidden by default, shown on narrow screens */
  }
  
  /* More dropdown menu */
  .toolbar-more-menu {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 4px;
    min-width: 160px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    z-index: var(--z-dropdown);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px) scale(0.95);
    transition: all 0.15s ease;
  }
  
  .toolbar-more-menu.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }
  
  .toolbar-more-item {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 14px;
    background: transparent;
    border: none;
    color: var(--fg);
    font-size: 12px;
    font-family: inherit;
    text-align: left;
    cursor: pointer;
    transition: background 0.15s ease;
  }
  
  .toolbar-more-item:first-child {
    border-radius: var(--radius-md) var(--radius-md) 0 0;
  }
  
  .toolbar-more-item:last-child {
    border-radius: 0 0 var(--radius-md) var(--radius-md);
  }
  
  .toolbar-more-item:hover {
    background: var(--bg-hover);
  }
  
  .toolbar-more-item .more-icon {
    font-size: 14px;
    width: 20px;
    text-align: center;
  }
  
  .toolbar-more-item .more-label {
    flex: 1;
  }
  
  .toolbar-more-divider {
    height: 1px;
    background: var(--border);
    margin: 4px 0;
  }
  
  /* Show more button, hide secondary buttons on narrow screens */
  @media (max-width: 400px) {
    .toolbar-secondary {
      display: none;
    }
    .toolbar-more-wrapper {
      display: block;
    }
  }
  
  /* Ultra narrow - compact more menu */
  @media (max-width: 320px) {
    .toolbar-more-menu {
      min-width: 140px;
    }
    .toolbar-more-item {
      padding: 8px 10px;
      font-size: 11px;
      gap: 8px;
    }
    .toolbar-more-item .more-icon {
      font-size: 12px;
      width: 16px;
    }
  }

  /* =============================================
     ACCOUNT LIST - Email truncation for narrow screens
     ============================================= */
  
  /* Full email shown by default */
  .account-email .email-full {
    display: inline;
  }
  .account-email .email-short {
    display: none;
  }
  
  /* Usage badge hidden by default, shown on narrow */
  .account-usage-badge {
    display: none;
    font-size: 9px;
    padding: 1px 5px;
    background: var(--accent-dim);
    color: var(--accent);
    border-radius: 8px;
    margin-left: 4px;
    font-weight: 600;
  }
  
  /* Narrow screens - show short email, hide full */
  @media (max-width: 360px) {
    .account-email .email-full {
      display: none;
    }
    .account-email .email-short {
      display: inline;
    }
  }
  
  /* Ultra narrow - show usage badge inline */
  @media (max-width: 320px) {
    .account-usage-badge {
      display: inline-flex;
    }
    .account-meta .meta-usage {
      display: none;
    }
  }

  /* =============================================
     MODERN SCROLLBARS - Thin and sleek
     ============================================= */
  
  /* Webkit browsers (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  
  ::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.3);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.5);
  }
  
  ::-webkit-scrollbar-thumb:active {
    background: var(--accent);
  }
  
  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(128, 128, 128, 0.3) transparent;
  }
  
  /* List specific scrollbar */
  .list::-webkit-scrollbar {
    width: 4px;
  }
  
  .list::-webkit-scrollbar-thumb {
    background: rgba(63, 182, 139, 0.3);
  }
  
  .list::-webkit-scrollbar-thumb:hover {
    background: rgba(63, 182, 139, 0.5);
  }
  
  /* Console scrollbar */
  .console-body::-webkit-scrollbar {
    width: 4px;
  }
  
  .console-body::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.4);
  }

  /* =============================================
     BUTTON HOVER/ACTIVE EFFECTS - Enhanced feedback
     ============================================= */
  
  .btn {
    transition: all 0.15s ease;
    transform: translateY(0);
  }
  
  .btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }
  
  .btn:active:not(:disabled) {
    transform: translateY(0) scale(0.98);
    box-shadow: none;
  }
  
  .btn-primary:hover:not(:disabled) {
    box-shadow: 0 4px 12px rgba(63, 182, 139, 0.3);
  }
  
  .btn-danger:hover:not(:disabled) {
    box-shadow: 0 4px 12px rgba(229, 83, 83, 0.3);
  }
  
  /* Icon buttons */
  .btn-icon:hover:not(:disabled) {
    transform: scale(1.05);
  }
  
  .btn-icon:active:not(:disabled) {
    transform: scale(0.95);
  }
  
  /* Account action buttons */
  .account-btn {
    transition: all 0.15s ease;
  }
  
  .account-btn:hover {
    transform: scale(1.1);
  }
  
  .account-btn:active {
    transform: scale(0.9);
  }

  /* =============================================
     TAB TRANSITION ANIMATIONS - Smooth switching
     ============================================= */
  
  .tab-content {
    opacity: 1;
    transform: translateX(0);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
  
  .tab-content.tab-switching-out {
    opacity: 0;
    transform: translateX(-10px);
    pointer-events: none;
  }
  
  .tab-content.tab-switching-in {
    animation: tabSlideIn 0.2s ease forwards;
  }
  
  @keyframes tabSlideIn {
    from {
      opacity: 0;
      transform: translateX(10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  /* Tab item active indicator animation */
  .tab-item::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 50%;
    width: 0;
    height: 2px;
    background: var(--accent);
    border-radius: 1px;
    transform: translateX(-50%);
    transition: width 0.2s ease;
  }
  
  .tab-item.active::after {
    width: 60%;
    box-shadow: 0 0 6px var(--accent-glow);
  }
  
  /* Tab ripple effect on click */
  .tab-item {
    position: relative;
    overflow: hidden;
  }
  
  .tab-item::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(63, 182, 139, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
  }
  
  .tab-item:active::before {
    width: 100px;
    height: 100px;
  }

    
  /* === Auto-Reg Controls (Compact iOS-style) === */
  .autoreg-controls {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px;
    margin: 0 8px 8px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    flex-wrap: wrap;
  }
  
  /* Running state - Stop & Pause inline */
  .autoreg-controls.running {
    gap: 6px;
  }
  .autoreg-controls.running .btn {
    flex: 1;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    min-width: 60px;
  }
  .autoreg-controls.running .btn svg {
    flex-shrink: 0;
  }
  
  /* Count input */
  .autoreg-count {
    width: 42px;
    height: 28px;
    padding: 4px 6px;
    font-size: 11px;
    font-family: inherit;
    text-align: center;
    background: var(--bg-elevated);
    color: var(--fg);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    transition: all var(--transition);
    flex-shrink: 0;
  }
  .autoreg-count:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(63,182,139,0.15);
  }
  .autoreg-count::-webkit-inner-spin-button,
  .autoreg-count::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  
  /* Start button */
  .btn-start {
    height: 28px;
    padding: 0 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    font-size: 11px;
    white-space: nowrap;
    flex-shrink: 0;
  }
  .btn-start svg {
    flex-shrink: 0;
  }
  
  /* Icon button style */
  .btn-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
  }
  .btn-icon svg {
    flex-shrink: 0;
  }
  
  /* Responsive AutoReg - narrow screens */
  @media (max-width: 319px) {
    .autoreg-controls {
      padding: 4px;
      margin: 0 4px 4px;
      gap: 4px;
    }
    .autoreg-controls.running {
      gap: 4px;
    }
    .autoreg-controls.running .btn {
      height: 24px;
      font-size: 9px;
      min-width: 40px;
      padding: 0 6px;
      gap: 3px;
    }
    .autoreg-controls.running .btn .btn-text { display: none; }
    .autoreg-controls.running .btn svg { width: 10px; height: 10px; }
    .strategy-switch {
      flex: 1 1 100%;
      order: 1;
    }
    .autoreg-count {
      width: 36px;
      height: 24px;
      font-size: 10px;
      order: 2;
    }
    .btn-start {
      flex: 1;
      height: 24px;
      padding: 0 8px;
      font-size: 10px;
      order: 3;
    }
    .btn-start .btn-text { display: none; }
  }
  
  @media (max-width: 249px) {
    .autoreg-controls {
      padding: 3px;
      margin: 0 3px 3px;
      gap: 3px;
    }
    .autoreg-controls.running {
      gap: 3px;
    }
    .autoreg-controls.running .btn {
      height: 22px;
      font-size: 8px;
      min-width: 36px;
      padding: 0 5px;
    }
    .strategy-switch { 
      padding: 1px;
    }
    .strategy-sw-btn {
      padding: 2px 4px;
      font-size: 8px;
    }
    .strategy-sw-btn .sw-label { display: none; }
    .autoreg-count {
      width: 32px;
      height: 22px;
      font-size: 9px;
    }
    .btn-start {
      height: 22px;
      padding: 0 6px;
      font-size: 9px;
    }
  }
  
  @media (max-width: 199px) {
    .autoreg-controls {
      padding: 2px;
      margin: 0 2px 2px;
      gap: 2px;
    }
    .autoreg-controls.running {
      gap: 2px;
    }
    .autoreg-controls.running .btn {
      height: 20px;
      font-size: 8px;
      min-width: 28px;
      padding: 0 4px;
    }
    .autoreg-controls.running .btn svg { width: 8px; height: 8px; }
    .autoreg-controls.running .btn .btn-text { display: none; }
    .strategy-switch { display: none; }
    .autoreg-count {
      width: 28px;
      height: 20px;
      font-size: 8px;
      padding: 2px;
    }
    .btn-start {
      height: 20px;
      padding: 0 5px;
      font-size: 8px;
    }
    .btn-start svg { width: 8px; height: 8px; }
  }
  
  @media (max-width: 180px) {
    .autoreg-controls {
      padding: 2px;
      margin: 0 1px 2px;
      gap: 2px;
    }
    .autoreg-controls.running {
      gap: 2px;
    }
    .autoreg-controls.running .btn {
      height: 18px;
      font-size: 7px;
      min-width: 24px;
      padding: 0 3px;
    }
    .autoreg-controls.running .btn svg { width: 7px; height: 7px; }
    .autoreg-count {
      width: 24px;
      height: 18px;
      font-size: 7px;
      padding: 1px;
    }
    .btn-start {
      height: 18px;
      padding: 0 4px;
      font-size: 7px;
      flex: 1;
    }
    .btn-start svg { width: 7px; height: 7px; }
  }
  
  @media (max-width: 159px) {
    .autoreg-controls {
      padding: 2px;
      margin: 0 1px 2px;
      gap: 2px;
    }
    .autoreg-controls.running .btn {
      height: 18px;
      font-size: 7px;
      min-width: 28px;
      padding: 0 3px;
    }
    .autoreg-controls.running .btn svg { width: 7px; height: 7px; }
    .autoreg-count {
      width: 24px;
      height: 18px;
      font-size: 7px;
    }
    .btn-start {
      height: 18px;
      padding: 0 4px;
      font-size: 7px;
    }
    .btn-start svg { width: 7px; height: 7px; }
  }

    
  /* === Profile Section === */
  .profiles-section {
    padding: 12px;
  }
  .profiles-section-title {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--muted);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .profiles-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .profiles-empty {
    text-align: center;
    padding: 30px 20px;
    color: var(--muted);
  }
  .profiles-empty .empty-icon {
    font-size: 36px;
    margin-bottom: 10px;
    opacity: 0.5;
  }
  .profiles-empty .empty-text {
    margin-bottom: 16px;
    font-size: 12px;
  }
  .profiles-add {
    margin-top: 10px;
    width: 100%;
  }

  /* === Profile Card === */
  .imap-profile {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .imap-profile:hover {
    border-color: rgba(63,182,139,0.3);
    background: linear-gradient(135deg, rgba(63,182,139,0.06) 0%, transparent 100%);
    transform: translateY(-1px);
  }
  .imap-profile.active {
    border-color: var(--accent);
    background: linear-gradient(135deg, var(--accent-dim) 0%, transparent 100%);
  }
  .imap-profile.exhausted {
    opacity: 0.6;
    border-color: var(--danger);
  }
  .imap-profile.error {
    border-color: var(--danger);
  }
  .imap-profile.paused {
    opacity: 0.7;
    border-color: var(--warning);
  }

  .profile-header {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .profile-avatar {
    position: relative;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .profile-strategy-icon {
    font-size: 16px;
  }
  .profile-status-dot {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    border: 2px solid var(--bg);
  }
  .profile-info {
    flex: 1;
    min-width: 0;
  }
  .profile-name-row {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .profile-name {
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .profile-provider {
    font-size: 9px;
    padding: 2px 6px;
    border-radius: 8px;
    background: var(--bg-elevated);
    color: var(--muted);
    font-weight: 500;
  }
  .profile-email {
    font-size: 11px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .profile-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity var(--transition);
  }
  .imap-profile:hover .profile-actions {
    opacity: 1;
  }
  .profile-btn {
    width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--muted);
    transition: all var(--transition);
  }
  .profile-btn:hover {
    background: rgba(128,128,128,0.2);
    color: var(--fg);
  }
  .profile-btn.danger:hover {
    background: var(--danger-dim);
    border-color: var(--danger);
    color: var(--danger);
  }
  .profile-btn svg {
    width: 14px;
    height: 14px;
  }

  .profile-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
  }
  .profile-strategy {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .profile-pool-stats {
    font-size: 10px;
    padding: 2px 6px;
    background: var(--accent-dim);
    color: var(--accent);
    border-radius: 8px;
  }
  .profile-stats {
    display: flex;
    gap: 12px;
  }
  .profile-stats .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .profile-stats .stat-value {
    font-size: 12px;
    font-weight: 700;
    font-family: var(--vscode-editor-font-family, monospace);
  }
  .profile-stats .stat-label {
    font-size: 9px;
    color: var(--muted);
  }
  .profile-error {
    margin-top: 8px;
    padding: 6px 8px;
    background: var(--danger-dim);
    border-radius: var(--radius-sm);
    font-size: 10px;
    color: var(--danger);
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* === Profile Editor === */
  .profile-editor {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 200;
    display: none;
    flex-direction: column;
    animation: slideIn 0.25s ease;
  }
  .profile-editor.visible,
  .profile-editor[style*="display: flex"] {
    display: flex;
  }
  .editor-header {
    display: flex;
    align-items: center;
    gap: 12px;
    height: 42px;
    padding: 0 12px;
    background: linear-gradient(180deg, var(--bg-elevated) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }
  .editor-title {
    font-size: 13px;
    font-weight: 600;
  }
  .editor-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }
  .editor-footer {
    padding: 12px 16px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    background: var(--bg-elevated);
  }

  /* === Form Section === */
  .form-section {
    margin-bottom: 20px;
    padding: 14px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
  }
  .form-section-title {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .form-section-desc {
    font-size: 11px;
    color: var(--muted);
    margin-bottom: 12px;
  }

  /* === Strategy Selector === */
  .strategy-selector {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .strategy-option {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .strategy-option:hover {
    border-color: rgba(63,182,139,0.3);
    background: rgba(63,182,139,0.05);
  }
  .strategy-option.selected {
    border-color: var(--accent);
    background: var(--accent-dim);
  }
  .strategy-icon {
    font-size: 20px;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--glass-bg);
    border-radius: var(--radius-sm);
  }
  .strategy-content {
    flex: 1;
  }
  .strategy-label {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 2px;
    color: var(--accent);
  }
  .strategy-desc {
    font-size: 11px;
    color: var(--muted);
    line-height: 1.4;
  }
  .strategy-example {
    font-size: 10px;
    color: var(--accent);
    font-family: var(--vscode-editor-font-family, monospace);
    margin-top: 4px;
    padding: 3px 6px;
    background: var(--accent-dim);
    border-radius: var(--radius-sm);
    display: inline-block;
  }
  .config-hint {
    font-size: 11px;
    color: var(--muted);
    padding: 10px 12px;
    background: var(--bg-elevated);
    border-radius: var(--radius-sm);
    margin-bottom: 12px;
    line-height: 1.5;
  }
  .strategy-check {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent);
    opacity: 0;
    transition: opacity var(--transition);
  }
  .strategy-option.selected .strategy-check {
    opacity: 1;
  }
  .strategy-check svg {
    width: 16px;
    height: 16px;
  }
  .strategy-config {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
  }

  /* === Email Pool Editor === */
  .email-pool-editor {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    overflow: hidden;
  }
  .pool-list {
    max-height: 200px;
    overflow-y: auto;
  }
  .pool-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border-bottom: 1px solid var(--border);
    font-size: 11px;
  }
  .pool-item:last-child {
    border-bottom: none;
  }
  .pool-item.used {
    opacity: 0.6;
    background: rgba(63,182,139,0.1);
  }
  .pool-item.failed {
    background: var(--danger-dim);
  }
  .pool-status {
    font-size: 12px;
  }
  .pool-stats {
    display: flex;
    gap: 12px;
    padding: 8px 10px;
    background: var(--glass-bg);
    border-bottom: 1px solid var(--border);
    font-size: 11px;
  }
  .pool-stat {
    color: var(--muted);
  }
  .pool-stat.success {
    color: var(--success);
  }
  .pool-stat.danger {
    color: var(--danger);
  }
  .pool-email {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .pool-remove {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all var(--transition);
  }
  .pool-remove:hover {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .pool-remove:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
  .pool-add {
    display: flex;
    gap: 6px;
    padding: 8px;
    border-top: 1px solid var(--border);
  }
  .pool-add .form-input {
    flex: 1;
  }
  .pool-add .btn {
    padding: 8px 12px;
  }
  .pool-actions {
    display: flex;
    gap: 6px;
    padding: 8px;
    border-top: 1px solid var(--border);
    background: var(--glass-bg);
  }
  .pool-actions .btn {
    flex: 1;
    font-size: 10px;
  }

  /* === Password Input === */
  .password-input-wrapper {
    position: relative;
  }
  .password-input-wrapper .form-input {
    padding-right: 36px;
  }
  .password-toggle {
    position: absolute;
    right: 4px;
    top: 50%;
    transform: translateY(-50%);
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all var(--transition);
  }
  .password-toggle:hover {
    background: var(--bg-elevated);
    color: var(--fg);
  }
  .password-toggle svg {
    width: 14px;
    height: 14px;
  }

  /* === Settings Section === */
  .setting-section {
    margin-bottom: 16px;
    padding: 14px;
    background: linear-gradient(135deg, rgba(63,182,139,0.08) 0%, transparent 100%);
    border: 1px solid rgba(63,182,139,0.2);
    border-radius: var(--radius-md);
  }
  .setting-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }
  .setting-section-title {
    font-size: 12px;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .setting-section-desc {
    font-size: 11px;
    color: var(--muted);
  }
  /* === Active Profile Card === */
  .active-profile-card {
    margin-bottom: 16px;
    padding: 14px;
    background: linear-gradient(135deg, rgba(63,182,139,0.1) 0%, rgba(63,182,139,0.03) 100%);
    border: 1px solid rgba(63,182,139,0.25);
    border-radius: var(--radius-lg);
  }
  .active-profile-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .active-profile-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--accent);
  }
  .btn-sm {
    padding: 5px 10px;
    font-size: 10px;
  }
  .active-profile-content {
    min-height: 60px;
  }
  .active-profile-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 10px;
    text-align: center;
  }
  .active-profile-empty .empty-icon {
    font-size: 24px;
    opacity: 0.5;
  }
  .active-profile-empty .empty-text {
    font-size: 11px;
    color: var(--muted);
  }
  .active-profile-info {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .active-profile-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }
  .active-profile-details {
    flex: 1;
    min-width: 0;
  }
  .active-profile-name {
    font-size: 13px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .active-profile-email {
    font-size: 11px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 6px;
  }
  .active-profile-strategy {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 12px;
    font-size: 10px;
  }
  .active-profile-strategy .strategy-icon {
    font-size: 12px;
  }
  .active-profile-strategy .strategy-name {
    font-weight: 600;
    color: var(--accent);
  }
  .active-profile-strategy .strategy-desc {
    color: var(--muted);
    margin-left: 4px;
  }
  .active-profile-stats {
    display: flex;
    gap: 16px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid rgba(63,182,139,0.15);
  }
  .active-profile-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .active-profile-stat-value {
    font-size: 14px;
    font-weight: 700;
    font-family: var(--vscode-editor-font-family, monospace);
  }
  .active-profile-stat-value.success { color: var(--accent); }
  .active-profile-stat-value.danger { color: var(--danger); }
  .active-profile-stat-label {
    font-size: 9px;
    color: var(--muted);
    text-transform: uppercase;
  }

  /* === Profile Card (new style) === */
  .profile-card {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    padding: 12px;
    transition: all 0.2s ease;
  }
  .profile-card:hover {
    border-color: rgba(63,182,139,0.3);
    background: linear-gradient(135deg, rgba(63,182,139,0.06) 0%, transparent 100%);
  }
  .profile-card.active {
    border-color: var(--accent);
    background: linear-gradient(135deg, var(--accent-dim) 0%, transparent 100%);
  }
  .profile-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .profile-card-radio {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .radio-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid #666;
    background: transparent;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }
  .profile-card-radio:hover .radio-dot {
    border-color: var(--accent);
  }
  .radio-dot.checked {
    border-color: var(--accent);
    background: var(--accent);
    box-shadow: inset 0 0 0 3px var(--bg);
  }
  .profile-card-info {
    flex: 1;
    min-width: 0;
    cursor: pointer;
  }
  .profile-card-name {
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .profile-card-email {
    font-size: 11px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .profile-card-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity var(--transition);
  }
  .profile-card:hover .profile-card-actions {
    opacity: 1;
  }
  .profile-card-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--border);
    font-size: 10px;
    color: var(--muted);
  }
  .profile-strategy {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .profile-stats {
    font-family: var(--vscode-editor-font-family, monospace);
  }
  .profiles-add-btn {
    margin-top: 12px;
    width: 100%;
  }

  /* === Form Elements === */
  .form-group {
    margin-bottom: 12px;
  }
  .form-label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    margin-bottom: 6px;
  }
  .form-input {
    width: 100%;
    padding: 8px 10px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--fg);
    font-size: 12px;
    transition: all var(--transition);
  }
  .form-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--accent-dim);
  }
  .form-input::placeholder {
    color: var(--muted);
    opacity: 0.6;
  }
  .form-row {
    display: flex;
    gap: 10px;
  }
  .form-row .form-group {
    flex: 1;
  }
  .form-row .form-group.flex-1 {
    flex: 1;
  }
  .form-row .form-group.flex-2 {
    flex: 2;
  }
  .form-hint {
    font-size: 10px;
    color: var(--muted);
    margin-top: 4px;
    display: none;
  }
  .form-hint .provider-name {
    color: var(--accent);
    font-weight: 600;
  }
  .form-hint .password-hint {
    display: block;
    margin-top: 6px;
    padding: 6px 8px;
    background: var(--bg-elevated);
    border-radius: 4px;
    border-left: 3px solid var(--accent);
    font-size: 11px;
    line-height: 1.4;
  }
  .form-hint .password-hint.warning {
    border-left-color: #f0ad4e;
    background: rgba(240, 173, 78, 0.1);
  }

  /* === Profiles Panel Overlay === */
  .profiles-panel {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 150;
    display: none;
    flex-direction: column;
    animation: slideIn 0.25s ease;
  }
  .profiles-panel.visible {
    display: flex;
  }
  @keyframes slideIn { 
    from { transform: translateX(100%); } 
    to { transform: translateX(0); } 
  }
  .profiles-panel-header {
    display: flex;
    align-items: center;
    gap: 12px;
    height: 42px;
    padding: 0 12px;
    background: linear-gradient(180deg, var(--bg-elevated) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }
  .profiles-panel-title {
    font-size: 13px;
    font-weight: 600;
    flex: 1;
  }
  .profiles-panel-content {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
  }

  /* ========================================
     WIZARD STYLES
     ======================================== */
  
  .profile-editor.wizard {
    display: flex;
  }
  
  .wizard-step {
    margin-bottom: 20px;
    padding: 16px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    animation: fadeIn 0.3s ease;
  }
  .wizard-step.compact {
    padding: 12px 16px;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .step-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
  }
  .step-number {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    color: white;
    font-size: 13px;
    font-weight: 700;
    border-radius: 50%;
  }
  .step-title {
    font-size: 14px;
    font-weight: 600;
  }
  
  /* Email Input Section */
  .email-input-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .form-input-large {
    padding: 14px 16px;
    font-size: 15px;
    border-radius: var(--radius-md);
  }
  
  /* Provider Detection */
  .provider-detection {
    animation: fadeIn 0.3s ease;
  }
  .provider-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    background: linear-gradient(135deg, rgba(63,182,139,0.15) 0%, rgba(63,182,139,0.05) 100%);
    border: 1px solid rgba(63,182,139,0.3);
    border-radius: 20px;
    font-size: 12px;
  }
  .provider-icon {
    font-size: 16px;
  }
  .provider-name {
    font-weight: 600;
  }
  .provider-check {
    color: var(--accent);
    font-size: 11px;
  }
  
  /* Strategy Cards */
  .recommended-strategy {
    margin-bottom: 16px;
  }
  
  .strategy-card {
    background: var(--bg-elevated);
    border: 2px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .strategy-card:hover {
    border-color: rgba(63,182,139,0.4);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .strategy-card.selected {
    border-color: var(--accent);
    background: linear-gradient(135deg, var(--accent-dim) 0%, transparent 100%);
  }
  .strategy-card.recommended {
    border-color: var(--accent);
    background: linear-gradient(135deg, rgba(63,182,139,0.12) 0%, rgba(63,182,139,0.03) 100%);
  }
  .strategy-card.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  .strategy-card-header {
    margin-bottom: 12px;
  }
  .strategy-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .recommended-badge {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
    color: white;
  }
  .disabled-badge {
    background: var(--danger-dim);
    color: var(--danger);
  }
  .strategy-card .strategy-title {
    font-size: 16px;
    font-weight: 700;
  }
  
  /* Strategy Diagram */
  .strategy-diagram {
    margin: 16px 0;
    padding: 16px;
    background: var(--bg);
    border-radius: var(--radius-md);
    overflow-x: auto;
  }
  .strategy-diagram.mini {
    padding: 10px;
    margin: 10px 0;
  }
  .strategy-diagram.mini .diagram-email {
    font-size: 9px;
  }
  
  .diagram-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    min-width: fit-content;
  }
  .diagram-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    min-width: 120px;
  }
  .diagram-step.generated {
    border-color: rgba(63,182,139,0.3);
    background: linear-gradient(135deg, rgba(63,182,139,0.1) 0%, transparent 100%);
  }
  .diagram-step.aws {
    background: linear-gradient(135deg, rgba(255,153,0,0.15) 0%, transparent 100%);
    border-color: rgba(255,153,0,0.3);
  }
  .diagram-step.inbox {
    background: linear-gradient(135deg, rgba(66,133,244,0.15) 0%, transparent 100%);
    border-color: rgba(66,133,244,0.3);
  }
  .diagram-label {
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--muted);
  }
  .diagram-icon {
    font-size: 24px;
  }
  .diagram-email {
    font-size: 10px;
    font-family: var(--vscode-editor-font-family, monospace);
    color: var(--fg);
    white-space: nowrap;
  }
  .diagram-email .highlight {
    color: var(--accent);
    font-weight: 700;
  }
  .diagram-arrow {
    font-size: 20px;
    color: var(--muted);
    flex-shrink: 0;
  }
  
  /* Strategy Features */
  .strategy-features {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
  }
  .strategy-features.compact {
    flex-direction: column;
    gap: 4px;
    margin-bottom: 12px;
  }
  .strategy-pros, .strategy-cons {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .feature-item {
    font-size: 11px;
    padding: 4px 0;
  }
  .feature-item.pro {
    color: var(--accent);
  }
  .feature-item.con {
    color: var(--warning);
  }
  
  .strategy-select-btn {
    margin-top: 8px;
  }
  .btn-block {
    width: 100%;
  }
  
  .disabled-reason {
    font-size: 10px;
    color: var(--muted);
    text-align: center;
    padding: 8px;
    background: var(--bg);
    border-radius: var(--radius-sm);
    margin-top: 8px;
  }
  
  /* Other Strategies Toggle */
  .other-strategies {
    margin-top: 12px;
  }
  .other-strategies-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    font-size: 12px;
    color: var(--muted);
    transition: all 0.2s ease;
  }
  .other-strategies-toggle:hover {
    background: var(--glass-bg);
    color: var(--fg);
  }
  .other-strategies[open] .toggle-icon {
    transform: rotate(180deg);
  }
  .toggle-icon {
    transition: transform 0.2s ease;
  }
  .toggle-icon svg {
    width: 14px;
    height: 14px;
  }
  
  .strategies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin-top: 12px;
  }
  
  /* IMAP Settings in Wizard */
  .imap-settings {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .connection-status {
    min-height: 24px;
    font-size: 11px;
    margin-top: 8px;
  }
  .connection-status.success {
    color: var(--accent);
  }
  .connection-status.error {
    color: var(--danger);
  }
  
  /* Pool Stats */
  .pool-stats {
    display: flex;
    gap: 16px;
    padding: 10px 12px;
    background: var(--bg);
    border-bottom: 1px solid var(--border);
    font-size: 11px;
  }
  .pool-count {
    color: var(--accent);
  }
  .pool-pending {
    color: var(--muted);
  }
  
  /* Optional label */
  .optional {
    font-weight: 400;
    color: var(--muted);
    font-size: 10px;
  }
  
  /* Button icon */
  .btn-icon {
    width: 36px;
    height: 36px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

    
  /* === Responsive Design === */
  /* Optimized for VSCode sidebar panels (150-400px typical width) */
  /* Uses fluid typography with clamp() for smooth scaling */
  
  /* =============================================
     CSS FLUID SCALING - Works at any width
     ============================================= */
  :root {
    /* Fluid font sizes - scale smoothly from 150px to 400px viewport */
    --fluid-xs: clamp(7px, 1.5vw + 4px, 11px);
    --fluid-sm: clamp(8px, 1.8vw + 4px, 12px);
    --fluid-base: clamp(9px, 2vw + 5px, 13px);
    --fluid-md: clamp(10px, 2.2vw + 5px, 14px);
    --fluid-lg: clamp(12px, 2.5vw + 6px, 16px);
    --fluid-xl: clamp(16px, 4vw + 8px, 24px);
    --fluid-2xl: clamp(20px, 6vw + 10px, 32px);
    
    /* Fluid spacing */
    --fluid-space-1: clamp(2px, 0.5vw + 1px, 4px);
    --fluid-space-2: clamp(3px, 1vw + 1px, 8px);
    --fluid-space-3: clamp(4px, 1.5vw + 2px, 12px);
    --fluid-space-4: clamp(6px, 2vw + 2px, 16px);
    
    /* Fluid icon sizes */
    --fluid-icon-sm: clamp(8px, 1.5vw + 5px, 12px);
    --fluid-icon-md: clamp(10px, 2vw + 6px, 16px);
    --fluid-icon-lg: clamp(14px, 3vw + 8px, 24px);
  }
  
  /* =============================================
     NANO SCREENS (< 160px) - Extreme minimum
     ============================================= */
  @media (max-width: 159px) {
    /* Header - nano */
    .header { 
      padding: 1px 2px; 
      min-height: 22px;
      gap: 2px;
    }
    .header-left { gap: 2px; }
    .header-title { font-size: 8px; }
    .header-badge { display: none; }
    .header-actions { gap: 0; }
    .header-actions .icon-btn { width: 16px; height: 16px; }
    .header-actions .icon-btn svg { width: 8px; height: 8px; }
    .patch-indicator { width: 12px; height: 12px; font-size: 6px; }
    
    /* Hero - nano */
    .hero { margin: 1px; padding: 3px; border-radius: 3px; }
    .hero-main { padding: 2px 0; }
    .hero-value { font-size: 16px !important; letter-spacing: -0.5px; }
    .hero-label { font-size: 6px; letter-spacing: 0.3px; margin-top: 2px; }
    .hero-footer { font-size: 6px; margin-top: 2px; }
    .hero-stat { font-size: 6px; }
    .hero-progress { height: 3px; margin-top: 2px; }
    .hero.empty { padding: 8px 4px; }
    .step-indicators { display: none; }
    
    /* Tabs - nano icons only */
    .tab-bar { padding: 1px; gap: 0; }
    .tab-item { 
      padding: 2px 3px; 
      min-width: 18px; 
      flex: 1 1 0;
      border-radius: 2px;
    }
    .tab-icon { font-size: 8px; }
    .tab-icon svg { width: 8px; height: 8px; }
    .tab-label, .tab-badge { display: none !important; }
    .tab-item.active::after { display: none; }
    
    /* Account cards - nano single line */
    .account { 
      padding: 3px; 
      gap: 3px; 
      margin-bottom: 2px;
      border-width: 1px;
      min-height: 28px;
    }
    .account-avatar { width: 14px; height: 14px; font-size: 6px; }
    .account-status { width: 5px; height: 5px; border-width: 1px; }
    .account-info { min-width: 0; }
    .account-email { font-size: 7px; }
    .account-meta { display: none !important; }
    .account-actions { display: none; }
    .account::after { display: none !important; }
    
    /* List */
    .list { padding: 1px 1px 40px; }
    .list-group { padding: 2px 1px; font-size: 6px; gap: 2px; }
    .list-group-count { font-size: 5px; padding: 0 2px; }
    .list-group-action { display: none; }
    
    /* Toolbar - minimal */
    .toolbar { padding: 1px 2px; gap: 2px; }
    .toolbar-row { gap: 2px; }
    .toolbar-buttons { display: none; }
    .search-wrapper { flex: 1; }
    .search-input { padding: 2px 14px; font-size: 7px; height: 18px; }
    .search-icon { left: 3px; }
    .search-icon svg { width: 7px; height: 7px; }
    .search-clear { width: 10px; height: 10px; right: 2px; font-size: 6px; }
    .filter-select { display: none; }
    .filter-group { display: none; }
    .bulk-actions-bar { display: none; }
    
    /* AutoReg controls - nano */
    .autoreg-controls { 
      padding: 3px; 
      margin: 0 2px 3px; 
      gap: 3px;
      flex-wrap: wrap;
    }
    .strategy-switch { display: none; }
    .autoreg-count { width: 28px; height: 20px; font-size: 9px; padding: 2px; }
    .btn-start { height: 20px; padding: 0 6px; font-size: 8px; }
    .btn-start svg { width: 8px; height: 8px; }
    .btn-start .btn-text { display: none; }
    
    /* Console drawer - nano */
    .console-drawer { transform: translateY(calc(100% - 20px)); min-height: 20px; }
    .console-header { padding: 2px 4px; min-height: 16px; }
    .console-title { font-size: 6px; letter-spacing: 0; }
    .console-badge { font-size: 5px; padding: 0 3px; }
    .console-toggle-icon { font-size: 6px; }
    .console-toolbar { display: none; }
    .console-body { max-height: 80px; padding: 2px 4px; font-size: 7px; line-height: 1.3; }
    .console-line { 
      padding: 1px 2px; 
      gap: 2px; 
      font-size: 7px; 
      flex-direction: row !important;
      flex-wrap: nowrap !important;
      border-left-width: 1px;
      align-items: flex-start;
      width: 100%;
      box-sizing: border-box;
    }
    .console-icon { width: 8px; font-size: 6px; flex-shrink: 0 !important; }
    .console-time { display: none !important; }
    .console-msg { 
      font-size: 7px; 
      white-space: normal !important; 
      word-break: break-word !important;
      overflow-wrap: anywhere !important;
      min-width: 0 !important;
      flex: 1 1 0 !important;
      display: block !important;
      writing-mode: horizontal-tb !important;
      text-orientation: mixed !important;
    }
    .console-count { display: none !important; }
    
    /* Settings - nano */
    .settings-content { padding: 4px 3px; }
    .settings-card { margin-bottom: 4px; }
    .settings-card-header { padding: 4px 6px; gap: 4px; }
    .settings-card-icon { font-size: 10px; }
    .settings-card-title { font-size: 8px; }
    .settings-card-body { padding: 2px 6px; }
    .setting-row { padding: 4px 0; }
    .setting-label { font-size: 7px; }
    .setting-desc { font-size: 6px; }
    .btn-sm { padding: 2px 4px; font-size: 7px; min-height: 18px; }
    
    /* Modals - nano */
    .modal { width: 100%; margin: 2px; border-radius: 4px; }
    .modal-header { padding: 6px 8px; }
    .modal-title { font-size: 9px; }
    .modal-close { width: 16px; height: 16px; }
    .modal-body { padding: 6px; }
    
    /* Toast - nano */
    .toast-container { top: 25px; right: 2px; }
    .toast { padding: 4px 6px; font-size: 7px; max-width: 140px; }
    
    /* Empty state - nano */
    .empty-state { padding: 12px 6px; }
    .empty-illustration svg { width: 40px; height: 40px; }
    .empty-title { font-size: 10px; }
    .empty-desc { font-size: 8px; max-width: 140px; }
  }
  
  /* =============================================
     MICRO SCREENS (160-199px) - Absolute minimum
     ============================================= */
  @media (min-width: 160px) and (max-width: 199px) {
    /* Header - absolute minimum */
    .header { 
      padding: 2px 4px; 
      min-height: 28px;
      gap: 4px;
    }
    .header-left { gap: 4px; }
    .header-title { font-size: 10px; }
    .header-badge { font-size: 7px; padding: 1px 3px; }
    .header-actions { gap: 1px; }
    .header-actions .icon-btn { 
      width: 20px; 
      height: 20px; 
    }
    .header-actions .icon-btn svg { width: 10px; height: 10px; }
    .patch-indicator { width: 14px; height: 14px; font-size: 8px; }
    
    /* Hero - micro */
    .hero { margin: 2px; padding: 4px; border-radius: 4px; }
    .hero-value { font-size: 20px; }
    .hero-label { font-size: 8px; letter-spacing: 0.5px; }
    .hero-footer { font-size: 8px; }
    .hero-stats { font-size: 8px; }
    .hero-email { font-size: 9px; max-width: 100%; }
    .hero-progress { height: 4px; }
    .step-indicators { padding: 2px 1px; margin: 4px 0; gap: 0; }
    .step-indicator { padding: 1px 2px; min-width: 20px; }
    .step-icon { font-size: 9px; }
    .step-dot { width: 4px; height: 4px; }
    .step-line { min-width: 4px; max-width: 8px; }
    
    /* Tabs - micro icons only */
    .tab-bar { padding: 1px 2px; gap: 0; }
    .tab-item { 
      padding: 3px 4px; 
      min-width: 22px; 
      flex: 1 1 0;
      border-radius: 3px;
    }
    .tab-icon { font-size: 9px; }
    .tab-icon svg { width: 9px; height: 9px; }
    .tab-label { display: none !important; }
    .tab-badge { display: none !important; }
    
    /* Account cards - micro compact vertical layout */
    .account { 
      padding: 4px; 
      gap: 4px; 
      margin-bottom: 3px;
      flex-direction: column;
      align-items: stretch;
      border-width: 1px;
    }
    .account-avatar { 
      width: 18px; 
      height: 18px; 
      font-size: 8px;
      position: absolute;
      top: 4px;
      left: 4px;
    }
    .account-status { 
      width: 6px; 
      height: 6px; 
      bottom: -1px; 
      right: -1px;
      border-width: 1px;
    }
    .account-info {
      padding-left: 22px;
    }
    .account-email { font-size: 8px; }
    .account-meta { 
      font-size: 7px; 
      gap: 3px; 
      flex-direction: row;
      flex-wrap: wrap;
      margin-top: 1px;
    }
    .account-meta span { gap: 1px; }
    .account-meta svg { width: 7px; height: 7px; }
    .account-actions { 
      opacity: 1; 
      flex-direction: row;
      gap: 2px;
      justify-content: flex-end;
      margin-top: 2px;
      padding-top: 2px;
      border-top: 1px solid var(--border);
    }
    .account-btn { width: 16px; height: 16px; }
    .account-btn svg { width: 8px; height: 8px; }
    .account-checkbox { width: 14px; height: 14px; margin-right: 2px; }
    .account-checkbox .checkmark { width: 12px; height: 12px; }
    
    /* List */
    .list { padding: 2px 2px 50px; }
    .list-group { 
      padding: 3px 2px; 
      font-size: 7px; 
      gap: 4px;
      flex-wrap: wrap;
    }
    .list-group-count { font-size: 6px; padding: 1px 3px; }
    .list-group-action { font-size: 6px; padding: 1px 4px; }
    
    /* Toolbar */
    .toolbar { padding: 2px 3px; gap: 3px; }
    .toolbar-row { gap: 3px; }
    .toolbar-buttons { gap: 2px; }
    .toolbar-buttons .btn { padding: 3px 4px; font-size: 8px; }
    .toolbar-buttons .btn svg { width: 10px; height: 10px; }
    .toolbar-buttons .btn-text { display: none !important; }
    .search-wrapper { min-width: 60px; }
    .search-input { padding: 3px 18px; font-size: 8px; height: 22px; }
    .search-icon { left: 4px; }
    .search-icon svg { width: 9px; height: 9px; }
    .search-clear { width: 12px; height: 12px; right: 3px; font-size: 8px; }
    .filter-group { gap: 2px; }
    .filter-label { font-size: 7px; margin-right: 2px; }
    .filter-btn { padding: 2px 4px; font-size: 7px; }
    
    /* Bulk actions */
    .bulk-actions-bar { padding: 4px 6px; gap: 4px; }
    .bulk-info { font-size: 9px; }
    .bulk-count { font-size: 8px; padding: 1px 4px; }
    .bulk-buttons .btn { padding: 3px 6px; font-size: 8px; }
    
    /* Settings & other panels */
    .settings-content { padding: 8px 6px; }
    .settings-card { margin-bottom: 8px; }
    .settings-card-header { padding: 8px 10px; gap: 6px; }
    .settings-card-icon { font-size: 12px; }
    .settings-card-title { font-size: 10px; }
    .settings-card-body { padding: 2px 10px; }
    .spoof-modules { grid-template-columns: 1fr; gap: 4px; }
    .spoof-module { padding: 6px; gap: 6px; }
    .module-icon { font-size: 12px; }
    .module-name { font-size: 9px; }
    .module-desc { font-size: 8px; }
    .stats-cards { grid-template-columns: 1fr; gap: 6px; }
    .stat-card { padding: 8px; }
    .stat-value { font-size: 16px; }
    .stat-label { font-size: 8px; }
    .setting-row { padding: 6px 0; }
    .setting-label { font-size: 9px; }
    .setting-desc { font-size: 7px; }
    .btn-sm { padding: 4px 8px; font-size: 9px; }
    
    /* Danger zone */
    .danger-zone-card { padding: 8px 10px; gap: 8px; flex-direction: column; }
    .danger-zone-label { font-size: 10px; }
    .danger-zone-desc { font-size: 8px; }
    .danger-zone-actions { width: 100%; justify-content: flex-start; }
    
    /* Modals */
    .modal { width: 98%; max-width: none; margin: 4px; }
    .modal-header { padding: 8px 10px; }
    .modal-title { font-size: 10px; }
    .modal-close { width: 20px; height: 20px; font-size: 14px; }
    .modal-body { padding: 8px; }
    .modal-hint { font-size: 9px; }
    .modal-textarea { height: 60px; font-size: 10px; padding: 6px; }
    
    /* Dialog */
    .dialog { padding: 12px; max-width: 95%; }
    .dialog-title { font-size: 11px; }
    .dialog-text { font-size: 10px; }
    .dialog-actions { gap: 6px; }
    
    /* Profile cards */
    .imap-profile { padding: 6px; gap: 6px; }
    .profile-avatar { width: 24px; height: 24px; font-size: 10px; }
    .profile-strategy-icon { font-size: 10px; }
    .profile-name { font-size: 9px; }
    .profile-email { font-size: 8px; }
    .profile-meta { font-size: 7px; }
    .profile-actions { opacity: 1; gap: 2px; }
    .profile-btn { width: 18px; height: 18px; }
    .profile-btn svg { width: 10px; height: 10px; }
    
    /* Logs drawer */
    .console-drawer { transform: translateY(calc(100% - 28px)); }
    .console-header { padding: 4px 8px; }
    .console-title { font-size: 8px; letter-spacing: 0.3px; }
    .console-badge { font-size: 7px; padding: 1px 4px; }
    .console-body { max-height: 100px; padding: 4px 8px; font-size: 8px; line-height: 1.3; }
    .console-line { 
      padding: 2px 4px; 
      gap: 3px; 
      font-size: 8px;
      flex-direction: row !important;
      flex-wrap: nowrap !important;
      border-left-width: 1px;
      align-items: flex-start;
      width: 100%;
      box-sizing: border-box;
    }
    .console-icon { width: 10px; font-size: 7px; flex-shrink: 0 !important; }
    .console-time { display: none !important; }
    .console-msg { 
      font-size: 8px; 
      white-space: normal !important;
      word-break: break-word !important;
      overflow-wrap: anywhere !important;
      min-width: 0 !important;
      flex: 1 1 0 !important;
      display: block !important;
      writing-mode: horizontal-tb !important;
    }
    .console-count { font-size: 6px; padding: 0 3px; display: none !important; }
    
    /* Toast */
    .toast-container { top: 35px; right: 4px; }
    .toast { padding: 6px 8px; font-size: 9px; max-width: 180px; gap: 4px; }
    .toast-icon { font-size: 11px; }
    
    /* Empty state */
    .empty-state { padding: 20px 10px; }
    .empty-illustration { margin-bottom: 10px; }
    .empty-illustration svg { width: 60px; height: 60px; }
    .empty-title { font-size: 12px; margin-bottom: 6px; }
    .empty-desc { font-size: 10px; margin-bottom: 10px; max-width: 180px; }
    .empty-state-icon { font-size: 28px; margin-bottom: 8px; }
    .empty-state-text { font-size: 10px; margin-bottom: 10px; }
    
    /* AutoReg controls - micro */
    .autoreg-controls { 
      padding: 4px; 
      margin: 0 3px 4px; 
      gap: 4px;
    }
    .strategy-switch { 
      padding: 1px; 
      gap: 1px;
    }
    .strategy-sw-btn { 
      padding: 3px 5px; 
      font-size: 9px;
    }
    .strategy-sw-btn .sw-icon { font-size: 10px; }
    .strategy-sw-btn .sw-label { display: none; }
    .autoreg-count { width: 32px; height: 22px; font-size: 10px; }
    .btn-start { height: 22px; padding: 0 8px; font-size: 9px; }
    .btn-start svg { width: 8px; height: 8px; }
    .btn-start .btn-text { display: none; }
  }
    /* Header - absolute minimum */
    .header { 
      padding: 2px 4px; 
      min-height: 28px;
      gap: 4px;
    }
    .header-left { gap: 4px; }
    .header-title { font-size: 10px; }
    .header-badge { font-size: 7px; padding: 1px 3px; }
    .header-actions { gap: 1px; }
    .header-actions .icon-btn { 
      width: 20px; 
      height: 20px; 
    }
    .header-actions .icon-btn svg { width: 10px; height: 10px; }
    .patch-indicator { width: 14px; height: 14px; font-size: 8px; }
    
    /* Hero - micro */
    .hero { margin: 2px; padding: 4px; border-radius: 4px; }
    .hero-value { font-size: 20px; }
    .hero-label { font-size: 8px; letter-spacing: 0.5px; }
    .hero-footer { font-size: 8px; }
    .hero-stats { font-size: 8px; }
    .hero-email { font-size: 9px; max-width: 100%; }
    .hero-progress { height: 4px; }
    .step-indicators { padding: 2px 1px; margin: 4px 0; gap: 0; }
    .step-indicator { padding: 1px 2px; min-width: 20px; }
    .step-icon { font-size: 9px; }
    .step-dot { width: 4px; height: 4px; }
    .step-line { min-width: 4px; max-width: 8px; }
    
    /* Tabs - micro icons only */
    .tab-bar { padding: 1px 2px; gap: 0; }
    .tab-item { 
      padding: 3px 4px; 
      min-width: 22px; 
      flex: 1 1 0;
      border-radius: 3px;
    }
    .tab-icon { font-size: 9px; }
    .tab-icon svg { width: 9px; height: 9px; }
    .tab-label { display: none !important; }
    .tab-badge { display: none !important; }
    
    /* Account cards - micro compact vertical layout */
    .account { 
      padding: 4px; 
      gap: 4px; 
      margin-bottom: 3px;
      flex-direction: column;
      align-items: stretch;
      border-width: 1px;
    }
    .account-avatar { 
      width: 18px; 
      height: 18px; 
      font-size: 8px;
      position: absolute;
      top: 4px;
      left: 4px;
    }
    .account-status { 
      width: 6px; 
      height: 6px; 
      bottom: -1px; 
      right: -1px;
      border-width: 1px;
    }
    .account-info {
      padding-left: 22px;
    }
    .account-email { font-size: 8px; }
    .account-meta { 
      font-size: 7px; 
      gap: 3px; 
      flex-direction: row;
      flex-wrap: wrap;
      margin-top: 1px;
    }
    .account-meta span { gap: 1px; }
    .account-meta svg { width: 7px; height: 7px; }
    .account-actions { 
      opacity: 1; 
      flex-direction: row;
      gap: 2px;
      justify-content: flex-end;
      margin-top: 2px;
      padding-top: 2px;
      border-top: 1px solid var(--border);
    }
    .account-btn { width: 16px; height: 16px; }
    .account-btn svg { width: 8px; height: 8px; }
    .account-checkbox { width: 14px; height: 14px; margin-right: 2px; }
    .account-checkbox .checkmark { width: 12px; height: 12px; }
    
    /* List */
    .list { padding: 2px 2px 50px; }
    .list-group { 
      padding: 3px 2px; 
      font-size: 7px; 
      gap: 4px;
      flex-wrap: wrap;
    }
    .list-group-count { font-size: 6px; padding: 1px 3px; }
    .list-group-action { font-size: 6px; padding: 1px 4px; }
    
    /* Toolbar */
    .toolbar { padding: 2px 3px; gap: 3px; }
    .toolbar-row { gap: 3px; }
    .toolbar-buttons { gap: 2px; }
    .toolbar-buttons .btn { padding: 3px 4px; font-size: 8px; }
    .toolbar-buttons .btn svg { width: 10px; height: 10px; }
    .toolbar-buttons .btn-text { display: none !important; }
    .search-wrapper { min-width: 60px; }
    .search-input { padding: 3px 18px; font-size: 8px; height: 22px; }
    .search-icon { left: 4px; }
    .search-icon svg { width: 9px; height: 9px; }
    .search-clear { width: 12px; height: 12px; right: 3px; font-size: 8px; }
    .filter-group { gap: 2px; }
    .filter-label { font-size: 7px; margin-right: 2px; }
    .filter-btn { padding: 2px 4px; font-size: 7px; }
    
    /* Bulk actions */
    .bulk-actions-bar { padding: 4px 6px; gap: 4px; }
    .bulk-info { font-size: 9px; }
    .bulk-count { font-size: 8px; padding: 1px 4px; }
    .bulk-buttons .btn { padding: 3px 6px; font-size: 8px; }
    
    /* Settings & other panels */
    .settings-content { padding: 8px 6px; }
    .settings-card { margin-bottom: 8px; }
    .settings-card-header { padding: 8px 10px; gap: 6px; }
    .settings-card-icon { font-size: 12px; }
    .settings-card-title { font-size: 10px; }
    .settings-card-body { padding: 2px 10px; }
    .spoof-modules { grid-template-columns: 1fr; gap: 4px; }
    .spoof-module { padding: 6px; gap: 6px; }
    .module-icon { font-size: 12px; }
    .module-name { font-size: 9px; }
    .module-desc { font-size: 8px; }
    .stats-cards { grid-template-columns: 1fr; gap: 6px; }
    .stat-card { padding: 8px; }
    .stat-value { font-size: 16px; }
    .stat-label { font-size: 8px; }
    .setting-row { padding: 6px 0; }
    .setting-label { font-size: 9px; }
    .setting-desc { font-size: 7px; }
    .btn-sm { padding: 4px 8px; font-size: 9px; }
    
    /* Danger zone */
    .danger-zone-card { padding: 8px 10px; gap: 8px; flex-direction: column; }
    .danger-zone-label { font-size: 10px; }
    .danger-zone-desc { font-size: 8px; }
    .danger-zone-actions { width: 100%; justify-content: flex-start; }
    
    /* Modals */
    .modal { width: 98%; max-width: none; margin: 4px; }
    .modal-header { padding: 8px 10px; }
    .modal-title { font-size: 10px; }
    .modal-close { width: 20px; height: 20px; font-size: 14px; }
    .modal-body { padding: 8px; }
    .modal-hint { font-size: 9px; }
    .modal-textarea { height: 60px; font-size: 10px; padding: 6px; }
    
    /* Dialog */
    .dialog { padding: 12px; max-width: 95%; }
    .dialog-title { font-size: 11px; }
    .dialog-text { font-size: 10px; }
    .dialog-actions { gap: 6px; }
    
    /* Profile cards */
    .imap-profile { padding: 6px; gap: 6px; }
    .profile-avatar { width: 24px; height: 24px; font-size: 10px; }
    .profile-strategy-icon { font-size: 10px; }
    .profile-name { font-size: 9px; }
    .profile-email { font-size: 8px; }
    .profile-meta { font-size: 7px; }
    .profile-actions { opacity: 1; gap: 2px; }
    .profile-btn { width: 18px; height: 18px; }
    .profile-btn svg { width: 10px; height: 10px; }
    
    /* Logs drawer */
    .logs-drawer { transform: translateY(calc(100% - 28px)); }
    .logs-header { padding: 4px 8px; }
    .logs-title { font-size: 8px; }
    .logs-count { font-size: 7px; padding: 1px 4px; }
    .logs-content { max-height: 100px; padding: 4px 8px; font-size: 8px; }
    
    /* Toast */
    .toast-container { top: 35px; right: 4px; }
    .toast { padding: 6px 8px; font-size: 9px; max-width: 180px; gap: 4px; }
    .toast-icon { font-size: 11px; }
    
    /* Empty state */
    .empty-state { padding: 20px 10px; }
    .empty-illustration { margin-bottom: 10px; }
    .empty-illustration svg { width: 60px; height: 60px; }
    .empty-title { font-size: 12px; margin-bottom: 6px; }
    .empty-desc { font-size: 10px; margin-bottom: 10px; max-width: 180px; }
    .empty-state-icon { font-size: 28px; margin-bottom: 8px; }
    .empty-state-text { font-size: 10px; margin-bottom: 10px; }
  }
  
  /* =============================================
     ULTRA NARROW SCREENS (200-249px) - Extreme compact mode
     ============================================= */
  @media (min-width: 200px) and (max-width: 249px) {
    /* Header - minimal */
    .header { 
      padding: 3px 5px; 
      min-height: 30px;
    }
    .header-left { gap: 5px; }
    .header-title { font-size: 11px; }
    .header-badge { font-size: 8px; padding: 1px 4px; }
    .header-actions { gap: 2px; }
    .header-actions .icon-btn { 
      width: 22px; 
      height: 22px; 
    }
    .header-actions .icon-btn svg { width: 11px; height: 11px; }
    .patch-indicator { width: 16px; height: 16px; }
    
    /* Hero - ultra compact */
    .hero { margin: 3px 4px; padding: 6px; }
    .hero-value { font-size: 24px; }
    .hero-label { font-size: 9px; }
    .hero-footer { font-size: 9px; }
    .hero-stats { font-size: 9px; }
    .hero-email { font-size: 10px; }
    .hero-progress { height: 5px; }
    .step-indicators { padding: 3px 2px; margin: 5px 0; }
    .step-indicator { padding: 2px 3px; min-width: 24px; }
    .step-icon { font-size: 10px; }
    .step-dot { width: 5px; height: 5px; }
    .step-line { min-width: 6px; max-width: 12px; }
    
    /* Tabs - icons only, minimal */
    .tab-bar { padding: 2px 3px; gap: 1px; }
    .tab-item { 
      padding: 4px 5px; 
      min-width: 26px; 
      flex: 1 1 0;
    }
    .tab-icon { font-size: 10px; }
    .tab-icon svg { width: 10px; height: 10px; }
    .tab-label { display: none !important; }
    .tab-badge { font-size: 7px; padding: 1px 3px; }
    
    /* Account cards - ultra compact */
    .account { 
      padding: 5px 6px; 
      gap: 5px; 
      margin-bottom: 4px;
      border-width: 1px;
    }
    .account-avatar { 
      width: 20px; 
      height: 20px; 
      font-size: 9px; 
    }
    .account-status { 
      width: 7px; 
      height: 7px; 
      bottom: -1px; 
      right: -1px;
      border-width: 1px;
    }
    .account-email { font-size: 9px; }
    .account-meta { 
      font-size: 7px; 
      gap: 4px; 
      flex-direction: column;
      align-items: flex-start;
      margin-top: 2px;
    }
    .account-meta span { gap: 2px; }
    .account-meta svg { width: 8px; height: 8px; }
    .account-actions { 
      opacity: 1; 
      flex-direction: column;
      gap: 2px;
    }
    .account-btn { width: 18px; height: 18px; }
    .account-btn svg { width: 9px; height: 9px; }
    
    /* List */
    .list { padding: 3px 4px 55px; }
    .list-group { padding: 4px 2px; font-size: 8px; gap: 5px; }
    .list-group-count { font-size: 7px; padding: 1px 4px; }
    .list-group-action { font-size: 7px; padding: 2px 5px; }
    
    /* Toolbar */
    .toolbar { padding: 3px 4px; gap: 4px; }
    .toolbar-buttons .btn { padding: 4px 5px; font-size: 9px; }
    .toolbar-buttons .btn-text { display: none !important; }
    .search-input { padding: 4px 20px; font-size: 9px; }
    .search-icon svg { width: 10px; height: 10px; }
    .filter-btn { padding: 3px 5px; font-size: 8px; }
    
    /* Settings & other panels */
    .settings-content { padding: 10px 8px; }
    .spoof-modules { grid-template-columns: 1fr; }
    .stats-cards { grid-template-columns: 1fr; }
    .stat-value { font-size: 18px; }
    .setting-row { padding: 8px 0; }
    .setting-label { font-size: 10px; }
    .setting-desc { font-size: 8px; }
    
    /* Modals */
    .modal { width: 96%; max-width: none; }
    .modal-header { padding: 10px 12px; }
    .modal-title { font-size: 11px; }
    .modal-body { padding: 10px; }
    
    /* Profile cards */
    .imap-profile { padding: 8px; gap: 8px; }
    .profile-avatar { width: 26px; height: 26px; }
    .profile-strategy-icon { font-size: 11px; }
    .profile-name { font-size: 10px; }
    .profile-email { font-size: 9px; }
    .profile-actions { opacity: 1; }
    .profile-btn { width: 20px; height: 20px; }
  }
  
  /* =============================================
     VERY NARROW SCREENS (250-299px)
     ============================================= */
  @media (min-width: 250px) and (max-width: 299px) {
    /* Header */
    .header { 
      padding: 4px 6px; 
      min-height: 32px;
    }
    .header-left { gap: 6px; }
    .header-title { font-size: 12px; }
    .header-badge { font-size: 8px; padding: 2px 5px; }
    .header-actions .icon-btn { width: 24px; height: 24px; }
    
    /* Hero */
    .hero { margin: 4px 5px; padding: 8px; }
    .hero-value { font-size: 26px; }
    .hero-label { font-size: 9px; }
    .hero-footer { font-size: 9px; }
    .step-indicators { padding: 4px 3px; margin: 6px 0; }
    .step-indicator { padding: 3px 4px; min-width: 28px; }
    .step-icon { font-size: 11px; }
    
    /* Tabs - icons only */
    .tab-bar { padding: 2px 4px; gap: 1px; }
    .tab-item { 
      padding: 5px 6px; 
      min-width: 28px;
      flex: 1 1 0;
    }
    .tab-icon { font-size: 11px; }
    .tab-label { display: none !important; }
    .tab-badge { font-size: 7px; padding: 1px 3px; }
    
    /* Account cards - compact */
    .account { 
      padding: 6px 7px; 
      gap: 6px; 
      margin-bottom: 4px;
    }
    .account-avatar { 
      width: 22px; 
      height: 22px; 
      font-size: 10px; 
    }
    .account-status { width: 8px; height: 8px; }
    .account-email { font-size: 9px; }
    .account-meta { 
      font-size: 8px; 
      gap: 5px;
      flex-direction: column;
      align-items: flex-start;
      margin-top: 2px;
    }
    .account-meta svg { width: 9px; height: 9px; }
    .account-actions { 
      opacity: 1; 
      flex-direction: column;
      gap: 2px;
    }
    .account-btn { width: 20px; height: 20px; }
    .account-btn svg { width: 10px; height: 10px; }
    
    /* List */
    .list { padding: 4px 5px 60px; }
    .list-group { padding: 5px 3px; font-size: 9px; }
    .list-group-count { font-size: 8px; }
    .list-group-action { font-size: 8px; padding: 2px 6px; }
    
    /* Toolbar */
    .toolbar { padding: 4px 5px; gap: 4px; }
    .toolbar-buttons .btn { padding: 5px 6px; font-size: 9px; }
    .toolbar-buttons .btn-text { display: none !important; }
    .search-input { padding: 5px 22px; font-size: 10px; }
    .filter-btn { padding: 3px 6px; font-size: 8px; }
    
    /* Settings */
    .settings-content { padding: 12px 8px; }
    .spoof-modules { grid-template-columns: 1fr; }
    .stats-cards { grid-template-columns: 1fr; }
    .stat-value { font-size: 20px; }
    
    /* Profile cards */
    .imap-profile { padding: 8px; gap: 8px; }
    .profile-avatar { width: 28px; height: 28px; }
    .profile-name { font-size: 11px; }
    .profile-email { font-size: 9px; }
    .profile-actions { opacity: 1; }
    .profile-btn { width: 22px; height: 22px; }
  }
  
  /* =============================================
     NARROW SCREENS (300-359px)
     ============================================= */
  @media (min-width: 300px) and (max-width: 359px) {
    /* Header */
    .header { padding: 5px 8px; min-height: 34px; }
    .header-title { font-size: 13px; }
    .header-badge { font-size: 9px; }
    .header-actions .icon-btn { width: 26px; height: 26px; }
    
    /* Hero */
    .hero { margin: 5px 6px; padding: 10px; }
    .hero-value { font-size: 28px; }
    .hero-label { font-size: 10px; }
    .hero-footer { font-size: 10px; }
    
    /* Tabs - icons only on very narrow, show labels on wider */
    .tab-bar { padding: 3px 5px; }
    .tab-item { padding: 5px 7px; min-width: 30px; }
    .tab-icon { font-size: 11px; }
    .tab-label { display: none !important; }
    
    /* Account cards */
    .account { padding: 7px 8px; gap: 7px; margin-bottom: 5px; }
    .account-avatar { width: 26px; height: 26px; font-size: 11px; }
    .account-status { width: 9px; height: 9px; }
    .account-email { font-size: 10px; }
    .account-meta { 
      font-size: 9px; 
      gap: 6px;
      flex-wrap: wrap;
      flex-direction: row;
    }
    .account-actions { opacity: 1; gap: 3px; flex-direction: row; }
    .account-btn { width: 22px; height: 22px; }
    
    /* List */
    .list { padding: 5px 6px 70px; }
    .list-group { font-size: 9px; }
    
    /* Toolbar */
    .toolbar { padding: 5px 6px; }
    .toolbar-buttons .btn { padding: 5px 7px; font-size: 10px; }
    .toolbar-buttons .btn-text { display: none; }
    @media (min-width: 340px) {
      .toolbar-buttons .btn-text { display: inline; }
    }
    
    /* Settings */
    .settings-content { padding: 14px 10px; }
    .spoof-modules { grid-template-columns: 1fr; }
    .stats-cards { grid-template-columns: repeat(2, 1fr); }
    
    /* Profile cards */
    .imap-profile { padding: 10px; gap: 10px; }
    .profile-avatar { width: 30px; height: 30px; }
    .profile-actions { opacity: 1; }
  }
  
  /* =============================================
     MEDIUM SCREENS (360-449px)
     ============================================= */
  @media (min-width: 360px) and (max-width: 449px) {
    /* Header */
    .header { padding: 6px 10px; min-height: 36px; }
    
    /* Hero */
    .hero { margin: 6px 8px; padding: 12px; }
    .hero-value { font-size: 32px; }
    .hero-label { font-size: 11px; }
    .hero-footer { font-size: 10px; }
    
    /* Tabs - show labels */
    .tab-bar { padding: 4px 6px; }
    .tab-item { padding: 6px 10px; }
    .tab-label { display: inline !important; }
    
    /* Account cards - show actions on hover */
    .account { padding: 8px 10px; gap: 8px; margin-bottom: 5px; }
    .account-avatar { width: 30px; height: 30px; font-size: 12px; }
    .account-meta { flex-direction: row; }
    .account-actions { opacity: 0; flex-direction: row; }
    .account:hover .account-actions { opacity: 1; }
    
    /* List */
    .list { padding: 6px 8px 80px; }
    
    /* Settings */
    .settings-content { padding: 16px 12px; }
    .spoof-modules { grid-template-columns: repeat(2, 1fr); }
    .stats-cards { grid-template-columns: repeat(2, 1fr); }
    
    /* Profile cards - show actions on hover */
    .profile-actions { opacity: 0; }
    .imap-profile:hover .profile-actions { opacity: 1; }
  }
  
  /* =============================================
     WIDER SCREENS (450px+)
     ============================================= */
  @media (min-width: 450px) {
    .header { padding: 8px 12px; }
    .hero { margin: 8px 10px; padding: 14px; }
    .hero-remaining-value { font-size: 32px; }
    .account { padding: 10px 12px; }
    .account-avatar { width: 34px; height: 34px; font-size: 13px; }
    .list { padding: 8px 12px 90px; }
    .toolbar { padding: 6px 10px; }
    .tab-item { padding: 6px 12px; }
  }
  
  /* =============================================
     LARGE SCREENS (550px+)
     ============================================= */
  @media (min-width: 550px) {
    .hero { margin: 10px 12px; padding: 16px; }
    .hero-remaining-value { font-size: 36px; }
    .account { padding: 12px 14px; }
    .account-avatar { width: 38px; height: 38px; font-size: 14px; }
    .list { padding: 10px 14px 100px; }
    .toolbar { padding: 8px 12px; }
    .tab-item { padding: 8px 16px; gap: 6px; }
  }
  
  /* =============================================
     TOUCH DEVICES - always show actions
     ============================================= */
  @media (hover: none) {
    .account-actions { opacity: 1 !important; }
    .profile-actions { opacity: 1 !important; }
    .profile-card-actions { opacity: 1 !important; }
  }
  
  /* =============================================
     SECONDARY BUTTONS VISIBILITY
     Show only primary action, hide others on narrow screens
     ============================================= */
  @media (max-width: 279px) {
    /* Hide secondary account buttons, show only delete */
    .account-btn:not(.danger) {
      display: none;
    }
    .account:hover .account-btn:not(.danger),
    .account:focus-within .account-btn:not(.danger) {
      display: flex;
    }
    
    /* Hide secondary profile buttons */
    .profile-btn:not(.danger) {
      display: none;
    }
    .imap-profile:hover .profile-btn:not(.danger),
    .imap-profile:focus-within .profile-btn:not(.danger) {
      display: flex;
    }
  }
  
  /* =============================================
     ULTRA COMPACT MODE - Force compact on all narrow screens
     ============================================= */
  @media (max-width: 320px) {
    /* Force single-line account cards */
    .account {
      flex-direction: row !important;
      align-items: center !important;
      padding: 4px 6px !important;
      gap: 6px !important;
      min-height: 36px;
    }
    
    /* Smaller avatar */
    .account-avatar {
      width: 24px !important;
      height: 24px !important;
      font-size: 10px !important;
      flex-shrink: 0;
      position: relative !important;
      top: auto !important;
      left: auto !important;
    }
    
    /* Compact info */
    .account-info {
      flex: 1;
      min-width: 0;
      padding-left: 0 !important;
    }
    
    /* Single line email */
    .account-email {
      font-size: 10px !important;
      line-height: 1.2;
    }
    
    /* Hide meta on very narrow, show only usage */
    .account-meta {
      display: none !important;
    }
    
    /* Show usage badge inline instead */
    .account-usage-badge {
      display: inline-flex !important;
      font-size: 9px;
      padding: 1px 4px;
      background: var(--accent-dim);
      color: var(--accent);
      border-radius: 8px;
      margin-left: 4px;
    }
    
    /* Compact actions - single row */
    .account-actions {
      flex-direction: row !important;
      gap: 2px !important;
      opacity: 1 !important;
    }
    
    /* Smaller buttons */
    .account-btn {
      width: 20px !important;
      height: 20px !important;
    }
    .account-btn svg {
      width: 10px !important;
      height: 10px !important;
    }
    
    /* Compact list groups */
    .list-group {
      padding: 4px 4px !important;
      font-size: 9px !important;
    }
    
    /* Compact hero */
    .hero {
      margin: 4px !important;
      padding: 6px 8px !important;
    }
    .hero-remaining-value {
      font-size: 20px !important;
    }
    .hero-remaining-label {
      font-size: 8px !important;
    }
    .hero-stats {
      font-size: 9px !important;
    }
    
    /* Hide filter labels */
    .filter-label {
      display: none !important;
    }
    
    /* Compact filter buttons */
    .filter-btn {
      padding: 3px 6px !important;
      font-size: 9px !important;
    }
    
    /* Compact toolbar */
    .toolbar {
      padding: 3px 4px !important;
      gap: 4px !important;
    }
    .toolbar-row {
      gap: 4px !important;
    }
  }
  
  /* =============================================
     HIDE ACTIONS BY DEFAULT ON NARROW - Show on interaction
     ============================================= */
  @media (max-width: 359px) {
    .account-actions {
      position: absolute;
      right: 4px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--bg-elevated);
      padding: 2px;
      border-radius: var(--radius-sm);
      box-shadow: -4px 0 8px rgba(0,0,0,0.3);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease;
    }
    
    .account:hover .account-actions,
    .account:focus-within .account-actions,
    .account.show-actions .account-actions {
      opacity: 1;
      pointer-events: auto;
    }
    
    /* Add touch indicator */
    .account::after {
      content: '‚ãØ';
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
      color: var(--muted);
      opacity: 0.5;
    }
    
    .account:hover::after,
    .account.show-actions::after {
      opacity: 0;
    }
  }
  
  /* =============================================
     CONSOLE RESPONSIVE - Fix vertical text issue
     ============================================= */
  
  /* All screens - force horizontal layout */
  .console-drawer {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
  }
  .console-body {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
  }
  .console-line {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow: hidden;
  }
  .console-msg {
    word-break: break-all !important;
    overflow-wrap: break-word !important;
    white-space: normal !important;
    hyphens: auto;
  }
  .console-msg span {
    word-break: break-all !important;
    white-space: normal !important;
    display: inline !important;
  }
  
  /* All narrow screens - force horizontal text */
  @media (max-width: 400px) {
    .console-body {
      overflow-x: hidden;
      padding: 4px 6px;
    }
    .console-line {
      flex-direction: row !important;
      flex-wrap: nowrap !important;
      min-width: 0;
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }
    .console-msg {
      word-break: break-all !important;
      white-space: normal !important;
      overflow-wrap: break-word !important;
      min-width: 0 !important;
      flex: 1 1 0 !important;
      overflow: hidden;
    }
    .console-icon {
      flex-shrink: 0 !important;
      flex-grow: 0 !important;
    }
    .console-time {
      display: none !important;
    }
    .console-count {
      display: none !important;
    }
  }
  
  @media (max-width: 300px) {
    .console-drawer {
      transform: translateY(calc(100% - 24px));
    }
    .console-header {
      padding: 3px 6px;
      min-height: 20px;
    }
    .console-title {
      font-size: 7px;
      letter-spacing: 0;
    }
    .console-badge {
      font-size: 6px;
      padding: 0 3px;
    }
    .console-body {
      max-height: 100px;
      padding: 3px 4px;
      font-size: 8px;
    }
    .console-line {
      padding: 2px 3px;
      gap: 3px;
      font-size: 8px;
      border-left-width: 1px;
    }
    .console-icon {
      width: 10px;
      font-size: 7px;
    }
    .console-msg {
      font-size: 8px;
      line-height: 1.3;
    }
    .console-toolbar {
      display: none;
    }
  }
  
  /* 180-250px - Critical narrow screens */
  @media (max-width: 250px) {
    .console-drawer {
      transform: translateY(calc(100% - 22px));
    }
    .console-header {
      padding: 2px 4px;
      min-height: 18px;
    }
    .console-title-group {
      gap: 3px;
    }
    .console-title {
      font-size: 7px;
    }
    .console-badge {
      font-size: 5px;
      padding: 0 2px;
    }
    .console-icon-indicator {
      font-size: 5px;
    }
    .console-toggle-icon {
      font-size: 6px;
    }
    .console-body {
      max-height: 80px;
      padding: 2px 3px;
      font-size: 7px;
      line-height: 1.2;
    }
    .console-line {
      padding: 1px 2px;
      gap: 2px;
      font-size: 7px;
      border-left-width: 1px;
    }
    .console-icon {
      width: 8px;
      font-size: 6px;
    }
    .console-msg {
      font-size: 7px;
      line-height: 1.2;
      display: block !important;
      writing-mode: horizontal-tb !important;
    }
    .console-new-indicator {
      display: none;
    }
  }
  
  /* 160-180px - Micro screens */
  @media (max-width: 180px) {
    .console-drawer {
      transform: translateY(calc(100% - 18px));
      min-height: 18px;
    }
    .console-header {
      padding: 1px 3px;
      min-height: 16px;
    }
    .console-title {
      font-size: 6px;
    }
    .console-badge {
      font-size: 5px;
      padding: 0 2px;
    }
    .console-body {
      max-height: 60px;
      padding: 1px 2px;
      font-size: 6px;
      line-height: 1.2;
    }
    .console-line {
      padding: 1px;
      gap: 2px;
      font-size: 6px;
    }
    .console-icon {
      width: 6px;
      font-size: 5px;
    }
    .console-msg {
      font-size: 6px;
      line-height: 1.2;
    }
  }

  
    :root {
      --accent: #3fb68b; --accent-hover: #4ec9a0; --accent-dim: rgba(63, 182, 139, 0.12); --accent-glow: rgba(63, 182, 139, 0.4);
      --danger: #e55353; --danger-dim: rgba(229, 83, 83, 0.12); --warning: #d9a334;
      --expired: #8a8a8a; --expired-dim: rgba(138, 138, 138, 0.15);
      --muted: #888888; --bg-elevated: rgba(255,255,255,0.03);
      --border-subtle: rgba(128,128,128,0.12); --border-medium: rgba(128,128,128,0.2);
      --radius-sm: 4px; --radius-md: 6px; --radius-lg: 10px;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.12); --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
      --transition-fast: 0.12s ease; --transition-normal: 0.2s ease;
      --glass-bg: rgba(255,255,255,0.02); --glass-border: rgba(255,255,255,0.08);
      --fg-color: #cccccc; --bg-color: #1e1e1e; --input-bg: #3c3c3c;
      
      /* Fallback aliases for VS Code variables - works in both VS Code and Kiro Desktop */
      --vscode-foreground: #cccccc;
      --vscode-sideBar-background: #1e1e1e;
      --vscode-input-background: #3c3c3c;
      --vscode-input-foreground: #cccccc;
      --vscode-dropdown-background: #3c3c3c;
      --vscode-dropdown-foreground: #cccccc;
      --vscode-terminal-background: #1e1e1e;
      --vscode-editorWidget-background: #252526;
      --vscode-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --vscode-editor-font-family: 'Consolas', 'Courier New', monospace;
    }
    /* Note: body styles are in base.ts - don't override here! */
    ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: transparent; } ::-webkit-scrollbar-thumb { background: rgba(128,128,128,0.25); border-radius: 4px; }
    
    /* Ripple Effect */
    .ripple { position: relative; overflow: hidden; }
    .ripple::after { content: ''; position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; background-image: radial-gradient(circle, var(--accent) 10%, transparent 10.01%); background-repeat: no-repeat; background-position: 50%; transform: scale(10, 10); opacity: 0; transition: transform 0.4s, opacity 0.8s; }
    .ripple:active::after { transform: scale(0, 0); opacity: 0.3; transition: 0s; }
    
    /* Header */
    .header { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: linear-gradient(180deg, var(--bg-elevated) 0%, transparent 100%); border-bottom: 1px solid var(--border-subtle); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(8px); }
    .header-left { display: flex; align-items: center; gap: 10px; min-width: 0; overflow: hidden; }
    .header-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; }
    .header-badge { font-size: 10px; padding: 2px 8px; border-radius: 10px; background: var(--accent-dim); color: var(--accent); font-weight: 700; }
    .header-actions { display: flex; gap: 4px; flex-shrink: 0; margin-left: 8px; }
    
    /* Icon Button */
    .icon-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: transparent; border: 1px solid transparent; border-radius: var(--radius-sm); cursor: pointer; color: var(--muted); transition: all var(--transition-fast); }
    .icon-btn:hover { background: var(--bg-elevated); border-color: var(--border-subtle); color: var(--vscode-foreground, #cccccc); }
    .icon-btn svg { pointer-events: none; }
    
    /* Update Banner */
    .update-banner { display: flex; align-items: center; gap: 12px; margin: 8px 14px; padding: 12px 16px; background: linear-gradient(135deg, rgba(217, 163, 52, 0.15) 0%, rgba(229, 83, 83, 0.1) 100%); border: 1px solid rgba(217, 163, 52, 0.4); border-radius: var(--radius-lg); cursor: pointer; transition: all var(--transition-normal); animation: updatePulse 2s ease-in-out infinite; }
    .update-banner:hover { transform: translateY(-2px); box-shadow: 0 4px 16px rgba(217, 163, 52, 0.3); border-color: var(--warning); }
    .update-banner-icon { font-size: 24px; animation: rocketBounce 1s ease-in-out infinite; }
    .update-banner-content { flex: 1; }
    .update-banner-title { font-size: 11px; font-weight: 700; color: var(--warning); }
    .update-banner-version { font-size: 13px; font-weight: 800; margin-top: 2px; }
    .update-banner-action { font-size: 11px; font-weight: 600; color: var(--warning); padding: 6px 12px; background: rgba(217, 163, 52, 0.2); border-radius: var(--radius-sm); transition: all var(--transition-fast); }
    .update-banner:hover .update-banner-action { background: var(--warning); color: #000; }
    @keyframes updatePulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(217, 163, 52, 0.4); } 50% { box-shadow: 0 0 0 4px rgba(217, 163, 52, 0.1); } }
    @keyframes rocketBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
    

    
    /* Native tooltips - no custom CSS, let browser handle */
    
    /* Stats Bar */
    .stats-bar { display: flex; flex-wrap: wrap; gap: 6px 12px; padding: 6px 12px; background: var(--bg-elevated); border-bottom: 1px solid var(--border-subtle); font-size: 10px; }
    .stat-item { display: flex; align-items: center; gap: 6px; }
    .stat-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
    .stat-dot.active { background: var(--accent); box-shadow: 0 0 8px var(--accent-glow); animation: glow 2s ease-in-out infinite; }
    .stat-dot.valid { background: #666; } .stat-dot.expired { background: var(--danger); } .stat-dot.exhausted { background: var(--warning); }
    .stat-exhausted { cursor: pointer; padding: 2px 6px; border-radius: 4px; background: rgba(217, 163, 52, 0.1); transition: all var(--transition-fast); }
    .stat-exhausted:hover { background: rgba(217, 163, 52, 0.25); }
    .stat-exhausted.confirm-pending { background: var(--danger); color: #fff; animation: pulse-danger 0.5s ease-in-out infinite; }
    .stat-exhausted.confirm-pending .stat-dot { background: #fff; }
    @keyframes pulse-danger { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    .stat-delete { margin-left: 2px; opacity: 0.6; font-size: 9px; } .stat-exhausted:hover .stat-delete { opacity: 1; }
    @keyframes glow { 0%, 100% { box-shadow: 0 0 6px var(--accent-glow); } 50% { box-shadow: 0 0 12px var(--accent-glow); } }
    .stat-total { margin-left: auto; color: var(--muted); font-weight: 500; }
    
    /* Usage Card - Glassmorphism */
    .usage-card { margin: 8px 12px; padding: 10px 12px; background: linear-gradient(135deg, rgba(63,182,139,0.08) 0%, rgba(63,182,139,0.02) 100%); backdrop-filter: blur(12px); border: 1px solid rgba(63,182,139,0.2); border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-normal); position: relative; overflow: hidden; }
    .usage-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, var(--accent), var(--accent-hover), transparent); }
    .usage-card:hover { border-color: rgba(63,182,139,0.4); box-shadow: 0 8px 32px rgba(63,182,139,0.15); transform: translateY(-2px); }
    .usage-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .usage-title { display: flex; align-items: center; gap: 4px; font-size: 9px; font-weight: 700; color: var(--accent); text-transform: uppercase; letter-spacing: 0.5px; }
    .usage-value { font-size: 14px; font-weight: 700; letter-spacing: -0.5px; }
    .usage-bar { height: 4px; background: rgba(128,128,128,0.15); border-radius: 2px; overflow: hidden; }
    .usage-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
    .usage-fill.low { background: linear-gradient(90deg, var(--accent), #4ec9a0); }
    .usage-fill.medium { background: linear-gradient(90deg, var(--warning), #e5b84a); }
    .usage-fill.high { background: linear-gradient(90deg, var(--danger), #f06b6b); }
    .usage-footer { display: flex; justify-content: space-between; margin-top: 4px; font-size: 9px; color: var(--muted); font-weight: 500; }
    
    /* Buttons - Enhanced */
    .actions { display: flex; gap: 6px; padding: 8px 12px; }
    .btn { padding: 7px 10px; font-size: 10px; font-weight: 600; font-family: inherit; border: none; border-radius: var(--radius-md); cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 4px; transition: all var(--transition-normal); white-space: nowrap; position: relative; overflow: hidden; }
    .btn::after { content: ''; position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; background-image: radial-gradient(circle, #fff 10%, transparent 10.01%); background-repeat: no-repeat; background-position: 50%; transform: scale(10, 10); opacity: 0; transition: transform 0.5s, opacity 1s; }
    .btn:active::after { transform: scale(0, 0); opacity: 0.3; transition: 0s; }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary { background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%); color: #fff; box-shadow: 0 2px 12px rgba(63,182,139,0.3); }
    .btn-primary:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(63,182,139,0.4); }
    .btn-primary:active:not(:disabled) { transform: translateY(0); }
    .btn-secondary { background: var(--glass-bg); backdrop-filter: blur(8px); color: var(--vscode-foreground, #cccccc); border: 1px solid var(--glass-border); }
    .btn-secondary:hover:not(:disabled) { background: rgba(128,128,128,0.15); border-color: var(--border-medium); transform: translateY(-1px); }
    .btn-icon { padding: 9px 12px; } .btn svg { pointer-events: none; }
    .btn-full { width: 100%; }
    .spinner { width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* SSO Import */
    .sso-import-row { padding: 0 12px 6px; }
    .sso-import-panel { display: none; margin: 0 14px 12px; padding: 12px; background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: var(--radius-md); }
    .sso-import-panel.visible { display: block; }
    .sso-import-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 11px; font-weight: 600; }
    .sso-import-hint { font-size: 10px; color: var(--muted); margin-bottom: 10px; white-space: pre-line; line-height: 1.6; }
    .sso-input { width: 100%; height: 60px; padding: 8px; font-size: 10px; font-family: monospace; background: var(--vscode-input-background, #3c3c3c); color: var(--vscode-input-foreground, #cccccc); border: 1px solid var(--border-medium); border-radius: var(--radius-sm); resize: none; margin-bottom: 10px; }
    .sso-input:focus { outline: none; border-color: var(--accent); }
    
    /* Search Bar */
    .search-bar { padding: 8px 12px; border-bottom: 1px solid var(--border-subtle); }
    .search-wrapper { position: relative; display: flex; align-items: center; }
    .search-input { width: 100%; padding: 8px 32px 8px 32px; font-size: 11px; font-family: inherit; background: var(--vscode-input-background, #3c3c3c); color: var(--vscode-foreground, #cccccc); border: 1px solid var(--border-medium); border-radius: var(--radius-md); transition: all var(--transition-normal); }
    .search-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(63,182,139,0.15); }
    .search-input::placeholder { color: var(--muted); }
    .search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--muted); pointer-events: none; display: flex; align-items: center; }
    .search-icon svg { width: 12px; height: 12px; }
    .search-clear { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; display: none; align-items: center; justify-content: center; background: var(--bg-elevated); border: none; border-radius: 50%; cursor: pointer; color: var(--muted); font-size: 10px; transition: all var(--transition-fast); }
    .search-clear:hover { background: var(--danger-dim); color: var(--danger); }
    .search-wrapper:has(.search-input:not(:placeholder-shown)) .search-clear { display: flex; }
    
    /* Filter Bar */
    .filter-bar { display: flex; align-items: center; justify-content: space-between; padding: 8px 14px; border-bottom: 1px solid var(--border-subtle); gap: 8px; }
    .filter-tabs { display: flex; gap: 2px; background: var(--glass-bg); backdrop-filter: blur(8px); padding: 2px; border-radius: var(--radius-sm); border: 1px solid var(--glass-border); }
    .filter-tab { padding: 5px 10px; font-size: 10px; font-weight: 600; background: transparent; border: none; border-radius: 3px; cursor: pointer; color: var(--muted); transition: all var(--transition-fast); }
    .filter-tab:hover { color: var(--vscode-foreground, #cccccc); } .filter-tab.active { background: linear-gradient(135deg, var(--accent-dim) 0%, rgba(63,182,139,0.2) 100%); color: var(--accent); }
    .sort-select { padding: 5px 8px; font-size: 10px; font-family: inherit; font-weight: 500; background: var(--vscode-dropdown-background, #3c3c3c); color: var(--vscode-dropdown-foreground, #ccc); border: 1px solid var(--border-medium); border-radius: var(--radius-sm); cursor: pointer; transition: all var(--transition-fast); -webkit-appearance: none; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L2 4h8z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 6px center; padding-right: 22px; }
    .sort-select:hover { border-color: var(--accent); }
    .sort-select:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px rgba(63,182,139,0.15); }
    .sort-select option { background: var(--vscode-dropdown-background, #3c3c3c); color: var(--vscode-dropdown-foreground, #ccc); padding: 8px; }
    
    /* Account List */
    .list { padding: 6px 10px 180px; } .list-empty { text-align: center; padding: 30px 20px; color: var(--muted); }
    .list-empty-icon { font-size: 32px; margin-bottom: 12px; opacity: 0.5; } .list-empty-text { font-size: 12px; margin-bottom: 16px; }
    
    /* Account Card - Enhanced with animations */
    .card { background: var(--glass-bg); backdrop-filter: blur(8px); border: 1px solid var(--glass-border); border-radius: var(--radius-md); margin-bottom: 6px; transition: all var(--transition-normal); position: relative; will-change: transform, opacity; contain: layout style paint; animation: cardFadeIn 0.3s ease forwards; opacity: 0; }
    .card:nth-child(1) { animation-delay: 0s; } .card:nth-child(2) { animation-delay: 0.03s; } .card:nth-child(3) { animation-delay: 0.06s; } .card:nth-child(4) { animation-delay: 0.09s; } .card:nth-child(5) { animation-delay: 0.12s; }
    @keyframes cardFadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    .card:hover { border-color: rgba(63,182,139,0.3); box-shadow: 0 4px 20px rgba(63,182,139,0.1); background: linear-gradient(135deg, rgba(63,182,139,0.06) 0%, rgba(63,182,139,0.02) 100%); transform: translateY(-1px); }
    .card.active { border-color: var(--accent); background: linear-gradient(270deg, var(--accent-dim), rgba(78,201,160,0.18), var(--accent-dim)); background-size: 200% 200%; animation: cardFadeIn 0.3s ease forwards, gradientShift 4s ease infinite; }
    @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    .card.expired { opacity: 0.7; border-color: var(--expired); background: var(--expired-dim); } .card.expired:hover { opacity: 0.85; }
    .card.exhausted { opacity: 0.6; border-color: var(--danger); background: linear-gradient(135deg, var(--danger-dim) 0%, rgba(229,83,83,0.05) 100%); } .card.exhausted:hover { opacity: 0.8; }
    .card.suspended { opacity: 0.5; border-color: #8b0000; background: rgba(139, 0, 0, 0.15); text-decoration: line-through; } .card.suspended:hover { opacity: 0.7; }
    .card.suspended .card-avatar { background: #8b0000; }
    .card.banned { opacity: 0.5; border-color: #ff0000; background: linear-gradient(135deg, rgba(255, 0, 0, 0.15) 0%, rgba(139, 0, 0, 0.1) 100%); } .card.banned:hover { opacity: 0.7; }
    .card.banned .card-avatar { background: linear-gradient(135deg, #ff0000 0%, #8b0000 100%); }
    .card.banned .card-email { text-decoration: line-through; }
    .card.removing { animation: cardSlideOut 0.3s ease forwards; }
    @keyframes cardSlideOut { to { opacity: 0; transform: translateX(-100%); height: 0; margin: 0; padding: 0; border: 0; } }
    .card-main { display: flex; align-items: center; padding: 8px 10px; gap: 8px; cursor: pointer; position: relative; overflow: hidden; }
    .card-main::after { content: ''; position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; background-image: radial-gradient(circle, var(--accent) 10%, transparent 10.01%); background-repeat: no-repeat; background-position: 50%; transform: scale(10, 10); opacity: 0; transition: transform 0.5s, opacity 1s; }
    .card-main:active::after { transform: scale(0, 0); opacity: 0.2; transition: 0s; }
    .card-avatar { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; text-transform: uppercase; flex-shrink: 0; background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%); color: #fff; box-shadow: 0 2px 8px rgba(63,182,139,0.3); }
    .card.expired .card-avatar { background: linear-gradient(135deg, #666 0%, #888 100%); box-shadow: none; }
    .card.exhausted .card-avatar { background: linear-gradient(135deg, var(--danger) 0%, #f06b6b 100%); box-shadow: 0 2px 8px rgba(229,83,83,0.3); }
    .card-info { flex: 1; min-width: 0; }
    .card-email { font-size: 10px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .card-meta { display: flex; align-items: center; gap: 6px; margin-top: 2px; font-size: 9px; color: var(--muted); }
    .card-meta-item { display: flex; align-items: center; gap: 3px; }
    /* Mini usage bar in card */
    .card-usage-bar { width: 40px; height: 3px; background: rgba(128,128,128,0.2); border-radius: 2px; overflow: hidden; margin-left: 4px; }
    .card-usage-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
    .card-usage-fill.low { background: linear-gradient(90deg, var(--accent), var(--accent-hover)); }
    .card-usage-fill.medium { background: linear-gradient(90deg, var(--warning), #e5b84a); }
    .card-usage-fill.high { background: linear-gradient(90deg, var(--danger), #f06b6b); }
    .card-status { display: flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 10px; font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.3px; }
    .card-status.active { background: var(--accent-dim); color: var(--accent); } .card-status.expired { background: var(--expired-dim); color: var(--expired); } .card-status.exhausted { background: var(--danger-dim); color: var(--danger); } .card-status.suspended { background: rgba(139, 0, 0, 0.3); color: #ff4444; } .card-status.banned { background: rgba(255, 0, 0, 0.3); color: #ff0000; animation: banPulse 1.5s ease infinite; }
    @keyframes banPulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(255,0,0,0.4); } 50% { box-shadow: 0 0 0 4px rgba(255,0,0,0.1); } }
    .ban-badge { margin-left: 4px; font-size: 10px; } .ban-reason { color: #ff4444; font-weight: 600; font-size: 8px; text-transform: uppercase; }
    .card-status.new { background: linear-gradient(135deg, rgba(99,102,241,0.2) 0%, rgba(139,92,246,0.2) 100%); color: #a78bfa; animation: newBadgePulse 2s ease infinite; }
    @keyframes newBadgePulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(167,139,250,0.4); } 50% { box-shadow: 0 0 0 4px rgba(167,139,250,0.1); } }
    .card-actions { display: flex; gap: 6px; opacity: 0; transition: opacity var(--transition-fast); } .card:hover .card-actions { opacity: 1; }
    .card-btn { width: 26px; height: 26px; display: flex; align-items: center; justify-content: center; background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); cursor: pointer; color: var(--muted); transition: all var(--transition-fast); }
    .card-btn:hover { background: rgba(128,128,128,0.2); border-color: var(--border-medium); color: var(--vscode-foreground, #cccccc); transform: scale(1.1); }
    .card-btn.danger:hover { background: var(--danger-dim); border-color: var(--danger); color: var(--danger); }
    .card-btn.highlight { background: var(--accent-dim); border-color: var(--accent); color: var(--accent); }
    .card-btn.highlight:hover { background: var(--accent); color: #fff; }
    .card-btn svg { width: 16px; height: 16px; }
    
    /* Virtual List */
    .virtual-list-viewport { overflow-y: auto; overflow-x: hidden; }
    .virtual-list-content { will-change: transform; }
    .virtual-list-spacer { pointer-events: none; }
    
    /* Progress Panel */
    .progress-panel { margin: 8px 12px; padding: 10px 12px; background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: var(--radius-md); }
    .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .progress-title { font-size: 10px; font-weight: 600; flex: 1; } .progress-step { font-size: 9px; color: var(--muted); }
    .progress-actions { display: flex; gap: 6px; }
    .progress-btn { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: var(--bg-elevated); border: 1px solid var(--border-medium); border-radius: var(--radius-sm); cursor: pointer; font-size: 12px; color: var(--muted); transition: all var(--transition-fast); }
    .progress-btn:hover { background: rgba(128,128,128,0.2); color: var(--vscode-foreground, #cccccc); transform: scale(1.1); }
    .progress-btn.danger:hover { background: var(--danger-dim); border-color: var(--danger); color: var(--danger); }
    .progress-btn.paused { background: var(--accent-dim); border-color: var(--accent); color: var(--accent); }
    .progress-bar { height: 4px; background: rgba(128,128,128,0.15); border-radius: 2px; overflow: hidden; margin-bottom: 8px; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-hover)); border-radius: 2px; transition: width 0.3s ease; }
    .progress-fill.paused { background: linear-gradient(90deg, var(--warning), #e5b84a); animation: none; }
    .progress-footer { display: flex; justify-content: space-between; align-items: center; }
    .progress-detail { font-size: 10px; color: var(--muted); }
    
    /* Settings Panel - Glassmorphism */
    .settings-panel { display: none; padding: 10px 12px; background: var(--glass-bg); backdrop-filter: blur(12px); border-bottom: 1px solid var(--glass-border); animation: slideDown 0.2s ease; } .settings-panel.visible { display: block; }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .settings-title { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; color: var(--muted); }
    .settings-row { display: flex; align-items: center; justify-content: space-between; padding: 5px 0; }
    .settings-label { font-size: 10px; font-weight: 500; } .settings-desc { font-size: 9px; color: var(--muted); margin-top: 1px; }
    .toggle { position: relative; width: 36px; height: 20px; cursor: pointer; } .toggle input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; inset: 0; background: rgba(128,128,128,0.3); border-radius: 10px; transition: all var(--transition-fast); }
    .toggle-slider::before { content: ''; position: absolute; width: 16px; height: 16px; left: 2px; top: 2px; background: #fff; border-radius: 50%; transition: all var(--transition-fast); }
    .toggle input:checked + .toggle-slider { background: var(--accent); } .toggle input:checked + .toggle-slider::before { transform: translateX(16px); }
    .settings-select { padding: 6px 10px; font-size: 11px; font-family: inherit; font-weight: 500; background: var(--vscode-dropdown-background, #3c3c3c); color: var(--vscode-dropdown-foreground, #cccccc); border: 1px solid var(--border-medium); border-radius: var(--radius-sm); cursor: pointer; min-width: 100px; }
    
    /* Floating Console - Fixed above footer */
    .console-floating { position: fixed; bottom: 32px; left: 0; right: 0; z-index: 99; background: var(--vscode-terminal-background, #1e1e1e); border-top: 1px solid var(--border-subtle); transition: transform 0.3s ease; }
    .console-floating.collapsed { transform: translateY(calc(100% - 28px)); }
    .console-floating.collapsed .console-toggle-icon { transform: rotate(180deg); }
    .console-toggle { display: flex; align-items: center; gap: 8px; padding: 6px 12px; cursor: pointer; background: rgba(0,0,0,0.3); border-bottom: 1px solid var(--border-subtle); user-select: none; }
    .console-toggle:hover { background: rgba(0,0,0,0.4); }
    .console-toggle-icon { font-size: 8px; color: var(--muted); transition: transform 0.3s ease; }
    .console-toggle-title { font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--muted); }
    .console-toggle-count { font-size: 9px; padding: 1px 6px; border-radius: 8px; background: var(--accent-dim); color: var(--accent); font-weight: 600; }
    .console-toggle-count.has-errors { background: var(--danger-dim); color: var(--danger); }
    .console-content { display: flex; flex-direction: column; max-height: 150px; }
    .console-actions { display: flex; gap: 4px; padding: 4px 8px; justify-content: flex-end; background: rgba(0,0,0,0.2); }
    .console-actions .icon-btn { width: 22px; height: 22px; font-size: 10px; }
    .console-body { flex: 1; overflow-y: auto; padding: 6px 10px; font-family: var(--vscode-editor-font-family, 'Consolas', monospace); font-size: 10px; line-height: 1.5; max-height: 120px; }
    .console-line { white-space: pre-wrap; word-break: break-all; } .console-line.error { color: var(--danger); } .console-line.success { color: var(--accent); } .console-line.warning { color: var(--warning); }
    
    /* Old console panel - hidden */
    .console-panel { display: none; }
    
    /* Footer */
    .footer { position: fixed; bottom: 0; left: 0; right: 0; display: flex; align-items: center; justify-content: space-between; padding: 6px 12px; background: var(--vscode-sideBar-background, #1e1e1e); border-top: 1px solid var(--border-subtle); font-size: 9px; color: var(--muted); z-index: 100; }
    .footer-version { display: flex; align-items: center; gap: 6px; font-weight: 600; color: var(--accent); background: var(--accent-dim); padding: 2px 8px; border-radius: 4px; } .footer-status { display: flex; align-items: center; gap: 4px; }
    .update-badge { color: #fff; background: var(--warning); padding: 2px 6px; border-radius: 3px; font-size: 9px; text-decoration: none; animation: pulse 1.5s infinite; } .update-badge:hover { background: var(--danger); }
    .footer-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); animation: glow 2s ease-in-out infinite; }
    
    /* Dialog */
    .dialog-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 1000; align-items: center; justify-content: center; animation: fadeIn 0.15s ease; } .dialog-overlay.visible { display: flex; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .dialog { background: var(--vscode-editorWidget-background, #252526); border: 1px solid var(--border-medium); border-radius: var(--radius-lg); padding: 20px; max-width: 320px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); animation: dialogSlideIn 0.2s ease; }
    @keyframes dialogSlideIn { from { opacity: 0; transform: scale(0.95) translateY(-10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    .dialog-title { font-size: 13px; font-weight: 600; margin-bottom: 8px; } .dialog-text { font-size: 12px; color: var(--muted); margin-bottom: 16px; }
    .dialog-actions { display: flex; gap: 8px; justify-content: flex-end; }
    .dialog .btn-danger { background: linear-gradient(135deg, var(--danger) 0%, #f06b6b 100%); color: #fff; }
    .dialog .btn-danger:hover { box-shadow: 0 4px 12px rgba(229,83,83,0.4); }
    
    /* Toast notifications */
    .toast-container { position: fixed; top: 50px; right: 12px; z-index: 1001; display: flex; flex-direction: column; gap: 8px; pointer-events: none; }
    .toast { padding: 10px 14px; background: var(--vscode-editorWidget-background, #252526); border: 1px solid var(--border-medium); border-radius: var(--radius-md); box-shadow: 0 4px 16px rgba(0,0,0,0.3); font-size: 11px; display: flex; align-items: center; gap: 8px; animation: toastSlideIn 0.3s ease; pointer-events: auto; max-width: 280px; }
    @keyframes toastSlideIn { from { opacity: 0; transform: translateX(100%); } to { opacity: 1; transform: translateX(0); } }
    .toast.removing { animation: toastSlideOut 0.3s ease forwards; }
    @keyframes toastSlideOut { to { opacity: 0; transform: translateX(100%); } }
    .toast-icon { font-size: 14px; }
    .toast-message { flex: 1; }
    .toast-action { padding: 4px 8px; font-size: 10px; font-weight: 600; background: var(--accent-dim); color: var(--accent); border: none; border-radius: 4px; cursor: pointer; transition: all var(--transition-fast); }
    .toast-action:hover { background: var(--accent); color: #fff; }
    .toast.success { border-color: var(--accent); }
    .toast.error { border-color: var(--danger); }
    .toast.warning { border-color: var(--warning); }
    
    /* Compact Mode */
    body.compact .card-main { padding: 6px 10px; } body.compact .card-avatar { width: 24px; height: 24px; font-size: 10px; } body.compact .card-meta { display: none; }
    
    /* Unknown Usage State */
    .card.unknown-usage .card-usage { color: var(--muted); }
    .usage-unknown { color: var(--muted); font-style: italic; cursor: help; }
    .usage-loading { color: var(--muted); animation: pulse 1s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    
    /* Stale Usage Indicator */
    .usage-card.stale { border-color: rgba(217, 163, 52, 0.4); background: linear-gradient(135deg, rgba(217, 163, 52, 0.1) 0%, rgba(217, 163, 52, 0.02) 100%); }
    .usage-card.stale .usage-title { color: var(--warning); }
    .stale-indicator { color: var(--warning); margin-left: 4px; cursor: help; animation: spin 2s linear infinite; display: inline-block; }
    
    /* Empty Usage Card */
    .usage-card.empty { background: var(--bg-elevated); border-color: var(--border-subtle); cursor: default; }
    .usage-card.empty .usage-title { color: var(--muted); }
    .usage-hint { font-size: 10px; color: var(--muted); margin-top: 4px; }
    
    /* Loading Usage Card */
    .usage-card.loading { opacity: 0.7; pointer-events: none; }
    .usage-card.loading::before { animation: loadingPulse 1.5s ease-in-out infinite; }
    @keyframes loadingPulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
    
    /* Narrow sidebar adaptation */
    @media (max-width: 280px) {
      .header-title { font-size: 10px; }
      .stats-bar { flex-direction: column; gap: 4px; }
      .stat-total { margin-left: 0; }
      .actions { flex-wrap: wrap; }
      .btn { flex: 1; min-width: 60px; }
      .card-actions { opacity: 1; } /* Always show on narrow */
      .settings-row { flex-direction: column; align-items: flex-start; gap: 4px; }
      .settings-row .toggle { align-self: flex-end; }
    }
    
    /* Very narrow */
    @media (max-width: 220px) {
      .card-avatar { display: none; }
      .card-status { font-size: 8px; padding: 2px 4px; }
      .usage-value { font-size: 12px; }
    }

    /* Spoofing Section */
    .spoof-section { margin-top: 16px; background: var(--bg-elevated); border: 1px solid var(--border-subtle); border-radius: var(--radius-md); overflow: hidden; }
    .spoof-header { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: linear-gradient(135deg, rgba(63, 182, 139, 0.08), transparent); }
    .spoof-title { display: flex; align-items: center; gap: 10px; }
    .spoof-icon { font-size: 18px; }
    .spoof-details { padding: 0 12px 12px; border-top: 1px solid var(--border-subtle); }
    .spoof-details.hidden { display: none; }
    .spoof-modules { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; margin-top: 10px; }
    .spoof-module { display: flex; align-items: center; gap: 8px; padding: 8px 10px; background: var(--glass-bg); border-radius: var(--radius-sm); border: 1px solid var(--glass-border); }
    .module-icon { font-size: 14px; flex-shrink: 0; }
    .module-info { min-width: 0; }
    .module-name { font-size: 10px; font-weight: 600; }
    .module-desc { font-size: 9px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .spoof-warning { display: flex; align-items: center; gap: 6px; margin-top: 10px; padding: 8px 10px; background: rgba(217, 163, 52, 0.1); border: 1px solid rgba(217, 163, 52, 0.3); border-radius: var(--radius-sm); font-size: 10px; color: var(--warning); }
    
  </style>
</head>
<body data-lang="en">
  <div class="app">
    
    <div class="header">
      <div class="header-left">
        <span class="header-title">KIRO</span>
        <span class="header-badge">0/0</span>
        <span class="patch-indicator" id="patchIndicator" title="Kiro Patch"></span>
      </div>
      <div class="header-actions">
        <button class="icon-btn" onclick="refresh()" title="Reload accounts and update token status"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M13.5 2v5h-5l1.8-1.8A4.5 4.5 0 1 0 12.5 8h1a5.5 5.5 0 1 1-1.6-3.9L13.5 2z"/></svg></button>
        <button class="icon-btn" onclick="toggleLogs()" title="Console"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M9 1H3v14h10V5l-4-4zm3 13H4V2h4v4h4v8z"/></svg></button>
      </div>
    </div>
  
    
      <div class="hero empty" onclick="openSettings()">
        <span class="hero-label">No active</span>
      </div>
    
    
    <div class="toolbar compact">
      <div class="toolbar-row">
        <!-- Primary buttons - always visible -->
        <div class="toolbar-buttons toolbar-primary">
          <button class="btn btn-secondary btn-icon" onclick="toggleSelectionMode()" title="Select" id="selectModeBtn">‚òëÔ∏è</button>
        </div>
        
        <!-- Secondary buttons - hidden on narrow screens, moved to dropdown -->
        <div class="toolbar-buttons toolbar-secondary">
          <button class="btn btn-secondary btn-icon" onclick="openSsoModal()" title="SSO Import">üåê</button>
          <button class="btn btn-secondary btn-icon" onclick="checkAllAccountsHealth()" title="Check Health">ü©∫</button>
        </div>
        
        <!-- More dropdown - visible only on narrow screens -->
        <div class="toolbar-more-wrapper">
          <button class="btn btn-secondary btn-icon toolbar-more-btn" onclick="toggleToolbarMore()" title="More">‚ãØ</button>
          <div class="toolbar-more-menu" id="toolbarMoreMenu">
            <button class="toolbar-more-item" onclick="openSsoModal(); toggleToolbarMore();">
              <span class="more-icon">üåê</span>
              <span class="more-label">SSO Import</span>
            </button>
            <button class="toolbar-more-item" onclick="checkAllAccountsHealth(); toggleToolbarMore();">
              <span class="more-icon">ü©∫</span>
              <span class="more-label">Check Health</span>
            </button>
            <div class="toolbar-more-divider"></div>
            <button class="toolbar-more-item" onclick="exportAllAccounts(); toggleToolbarMore();">
              <span class="more-icon">üì§</span>
              <span class="more-label">Export</span>
            </button>
          </div>
        </div>
        
        <div class="search-wrapper">
          <span class="search-icon"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M11.7 10.3a6 6 0 1 0-1.4 1.4l4 4 1.4-1.4-4-4zM6 10a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg></span>
          <input type="text" class="search-input" id="searchInput" placeholder="Search accounts..." oninput="searchAccounts(this.value)">
          <button class="search-clear" onclick="clearSearch()">√ó</button>
        </div>
        <select class="filter-select" id="tokenFilterSelect" onchange="filterByTokens(this.value)">
          <option value="all">All</option>
          <option value="fresh">üü¢ Fresh</option>
          <option value="partial">üü° Partial</option>
          <option value="trial">üîµ Trial</option>
          <option value="empty">‚ö´ Empty</option>
        </select>
      </div>
      <div class="bulk-actions-bar hidden" id="bulkActionsBar">
        <div class="bulk-info">
          <span class="bulk-count" id="bulkCount">0</span> selected
        </div>
        <div class="bulk-buttons">
          <button class="btn btn-secondary btn-sm" onclick="selectAllAccounts()" title="Select All">‚òëÔ∏è</button>
          <button class="btn btn-secondary btn-sm" onclick="deselectAllAccounts()" title="Deselect All">‚òê</button>
          <button class="btn btn-secondary btn-sm" onclick="exportSelectedAccounts()" title="Export">üì§</button>
          <button class="btn btn-secondary btn-sm" onclick="refreshSelectedTokens()" title="Refresh">üîÑ</button>
          <button class="btn btn-danger btn-sm" onclick="deleteSelectedAccounts()" title="Delete">üóëÔ∏è</button>
        </div>
        <button class="btn btn-secondary btn-sm" onclick="toggleSelectionMode()">‚úï</button>
      </div>
    </div>
  
    
    <div class="list" id="accountList">
      <div class="loading">Loading accounts...</div>
    </div>

    
    <div class="console-drawer " id="logsDrawer">
      <div class="console-header" onclick="toggleLogs()">
        <div class="console-header-left">
          <span class="console-title-group">
            <span class="console-icon-indicator ">‚¨§</span>
            <span class="console-title">Console</span>
            <span class="console-badge " id="logsCount">0</span>
          </span>
          <span class="console-new-indicator" id="newLogsIndicator">‚óè New</span>
        </div>
        <div class="console-header-right">
          <span class="console-toggle-icon">‚ñ≤</span>
        </div>
      </div>
      
      <div class="console-toolbar">
        <div class="console-filters">
          <button class="console-filter active" data-filter="all" onclick="filterConsole('all')" title="All logs">
            <span class="filter-label">All</span>
            <span class="filter-count">0</span>
          </button>
          <button class="console-filter " data-filter="error" onclick="filterConsole('error')" title="Errors">
            <span class="filter-icon error">‚úó</span>
            
          </button>
          <button class="console-filter " data-filter="warning" onclick="filterConsole('warning')" title="Warnings">
            <span class="filter-icon warning">!</span>
            
          </button>
          <button class="console-filter " data-filter="success" onclick="filterConsole('success')" title="Success">
            <span class="filter-icon success">‚úì</span>
            
          </button>
        </div>
        <div class="console-actions">
          <button class="console-btn scroll-btn" onclick="scrollConsoleToBottom()" title="Scroll to bottom" id="scrollToBottomBtn">
            <span>‚Üì</span>
          </button>
          <button class="console-btn" onclick="clearConsole()" title="Clear console output">
            <span>üóë</span>
          </button>
          <button class="console-btn" onclick="copyLogs()" title="Copy logs to clipboard">
            <span>üìã</span>
          </button>
        </div>
      </div>
      
      <div class="console-body" id="logsContent" onscroll="handleConsoleScroll()"></div>
      
      <div class="console-new-messages" id="newMessagesBar" onclick="scrollConsoleToBottom()">
        <span>‚Üì New messages below</span>
      </div>
    </div>
  
    
    <div class="overlay" id="settingsOverlay">
      <div class="overlay-content">
        <div class="overlay-header">
          <button class="overlay-back" onclick="closeSettings()">‚Üê Back</button>
          <span class="overlay-title">Settings</span>
        </div>
        <div class="overlay-body">
    <!-- Stats Section (embedded) -->
    <div class="settings-section-embedded" id="settingsStatsSection">
      
    <div class="stats-dashboard">
      <div class="stats-header">
        <h3 class="stats-title">üìä Statistics</h3>
      </div>

      <!-- Summary Cards -->
      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">total</div>
        </div>
        <div class="stat-card success">
          <div class="stat-value">0</div>
          <div class="stat-label">Active</div>
        </div>
        <div class="stat-card danger">
          <div class="stat-value">0</div>
          <div class="stat-label">BANNED</div>
        </div>
        <div class="stat-card warning">
          <div class="stat-value">0</div>
          <div class="stat-label">expired</div>
        </div>
      </div>

      <!-- Usage Overview -->
      <div class="stats-section">
        <div class="stats-section-title">Today's Usage</div>
        <div class="usage-overview">
          <div class="usage-bar-container">
            <div class="usage-bar-fill" style="width: 0%"></div>
          </div>
          <div class="usage-numbers">
            <span class="usage-current">0</span>
            <span class="usage-separator">/</span>
            <span class="usage-limit">0</span>
          </div>
        </div>
        <div class="usage-avg">
          Avg per account: <strong>0</strong>
        </div>
      </div>

      <!-- Mini Chart -->
      <div class="stats-section">
        <div class="stats-section-title">Weekly Usage</div>
        <div class="mini-chart">
          
    <div class="chart-bar" style="height: 30%"></div>
  
    <div class="chart-bar" style="height: 45%"></div>
  
    <div class="chart-bar" style="height: 60%"></div>
  
    <div class="chart-bar" style="height: 80%"></div>
  
    <div class="chart-bar" style="height: 55%"></div>
  
    <div class="chart-bar" style="height: 40%"></div>
  
    <div class="chart-bar" style="height: 25%"></div>
  
        </div>
        <div class="chart-labels">
          <span>Mon</span>
          <span>Tue</span>
          <span>Wed</span>
          <span>Thu</span>
          <span>Fri</span>
          <span>Sat</span>
          <span>Sun</span>
        </div>
      </div>

      <!-- Account Health -->
      <div class="stats-section">
        <div class="stats-section-title">Account Health</div>
        <div class="health-bars">
          <div class="health-row">
            <span class="health-label">‚úÖ Active</span>
            <div class="health-bar">
              <div class="health-fill success" style="width: 0%"></div>
            </div>
            <span class="health-percent">0%</span>
          </div>
          <div class="health-row">
            <span class="health-label">‚õî BANNED</span>
            <div class="health-bar">
              <div class="health-fill danger" style="width: 0%"></div>
            </div>
            <span class="health-percent">0%</span>
          </div>
          <div class="health-row">
            <span class="health-label">‚è∞ expired</span>
            <div class="health-bar">
              <div class="health-fill warning" style="width: 0%"></div>
            </div>
            <span class="health-percent">0%</span>
          </div>
        </div>
      </div>
    </div>
  
    </div>

    <!-- Active Profile Card -->
    <div class="settings-card" id="activeProfileCard">
      <div class="settings-card-header">
        <span class="settings-card-icon">üìß</span>
        <span class="settings-card-title">Active Profile</span>
        <button class="btn btn-secondary btn-sm" onclick="switchTab('profiles')">Change</button>
      </div>
      <div class="active-profile-content" id="activeProfileContent">
        <div class="active-profile-empty">
          <span class="empty-text">No profile configured</span>
          <button class="btn btn-primary btn-sm" onclick="switchTab('profiles')">Configure</button>
        </div>
      </div>
    </div>

    <!-- Automation Card -->
    <div class="settings-card">
      <div class="settings-card-header">
        <span class="settings-card-icon">‚öôÔ∏è</span>
        <span class="settings-card-title">Automation</span>
      </div>
      <div class="settings-card-body">
        <div class="setting-row">
          <div>
            <div class="setting-label">Auto-switch on expiry</div>
            <div class="setting-desc">Automatically switch to next valid account</div>
          </div>
          <label class="toggle">
            <input type="checkbox"  onchange="toggleAutoSwitch(this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-row" id="autoSwitchThresholdRow" style="display:none">
          <div>
            <div class="setting-label">Switch threshold</div>
            <div class="setting-desc">Switch when remaining < this value</div>
          </div>
          <input type="number" class="input-number" id="autoSwitchThreshold" 
            value="10" 
            min="1" max="490" step="10"
            onchange="updateSetting('autoSwitchThreshold', parseInt(this.value))">
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">Headless mode</div>
            <div class="setting-desc">Run browser in background</div>
          </div>
          <label class="toggle">
            <input type="checkbox"  onchange="toggleSetting('headless', this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">Device Flow auth</div>
            <div class="setting-desc">Use device code instead of local server</div>
          </div>
          <label class="toggle">
            <input type="checkbox"  onchange="toggleSetting('deviceFlow', this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- Registration Strategy Card (Anti-Ban) -->
    <div class="settings-card">
      <div class="settings-card-header">
        <span class="settings-card-icon">üõ°Ô∏è</span>
        <span class="settings-card-title">Registration Strategy</span>
      </div>
      <div class="settings-card-body">
        <div class="setting-desc" style="margin-bottom: 16px;">Choose how to register accounts (affects ban risk)</div>
        
        <!-- WebView Strategy (Safe) -->
        <div class="strategy-option strategy-safe " onclick="selectRegistrationStrategy('webview')">
          <div class="strategy-icon-wrapper strategy-icon-safe">
            <span class="strategy-icon">üåê</span>
          </div>
          <input type="radio" name="strategy" value="webview" checked style="display: none;">
          <div class="strategy-content">
            <div class="strategy-header">
              <strong>WebView (Recommended)</strong>
              <span class="badge badge-success">‚úì Low risk</span>
            </div>
            <div class="strategy-desc">Opens real browser, you enter credentials manually. Minimal ban risk.</div>
            <div class="strategy-features">
              <div class="strategy-feature feature-pro">
                <span class="feature-icon">‚úì</span>
                <span>Real browser fingerprint</span>
              </div>
              <div class="strategy-feature feature-pro">
                <span class="feature-icon">‚úì</span>
                <span>Human-like behavior</span>
              </div>
              <div class="strategy-feature feature-con">
                <span class="feature-icon">!</span>
                <span>Manual input required</span>
              </div>
            </div>
            <div class="strategy-risk-bar">
              <div class="risk-label">Ban risk:</div>
              <div class="risk-meter">
                <div class="risk-fill risk-low" style="width: 10%;"></div>
              </div>
              <div class="risk-value risk-low-text">&lt;10%</div>
            </div>
          </div>
        </div>
        
        <!-- Automated Strategy (Risky) -->
        <div class="strategy-option strategy-risky selected" onclick="selectRegistrationStrategy('automated')">
          <div class="strategy-icon-wrapper strategy-icon-risky">
            <span class="strategy-icon">ü§ñ</span>
          </div>
          <input type="radio" name="strategy" value="automated"  style="display: none;">
          <div class="strategy-content">
            <div class="strategy-header">
              <strong>Automated (Legacy)</strong>
              <span class="badge badge-danger">‚ö† High risk</span>
            </div>
            <div class="strategy-desc">Automated browser with DrissionPage. Works for some users.</div>
            <div class="strategy-features">
              <div class="strategy-feature feature-pro">
                <span class="feature-icon">‚úì</span>
                <span>Fully automatic</span>
              </div>
              <div class="strategy-feature feature-con">
                <span class="feature-icon">‚ö†</span>
                <span>High detection risk</span>
              </div>
            </div>
            <div class="strategy-risk-bar">
              <div class="risk-label">Ban risk:</div>
              <div class="risk-meter">
                <div class="risk-fill risk-high" style="width: 70%;"></div>
              </div>
              <div class="risk-value risk-high-text">40-90%</div>
            </div>
          </div>
        </div>
        
        <!-- Defer Quota Check (only for Automated) -->
        <div id="deferQuotaCheckOption" class="setting-row" style="margin-top: 16px; display: none;">
          <div>
            <div class="setting-label">Defer quota check</div>
            <div class="setting-desc">Do NOT check quota immediately after registration (reduces ban risk)</div>
          </div>
          <label class="toggle">
            <input type="checkbox" checked onchange="toggleSetting('deferQuotaCheck', this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <!-- OAuth Provider (only for WebView) -->
        <div id="oauthProviderOption" class="setting-row" style="margin-top: 16px; ">
          <div>
            <div class="setting-label">OAuth Provider</div>
            <div class="setting-desc">Choose provider for WebView registration</div>
          </div>
          <select class="select" id="oauthProviderSelect" onchange="updateSetting('oauthProvider', this.value)">
            <option value="ask" selected>Ask every time</option>
            <option value="Google" >Google</option>
            <option value="Github" >GitHub</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Interface Card -->
    <div class="settings-card">
      <div class="settings-card-header">
        <span class="settings-card-icon">üé®</span>
        <span class="settings-card-title">Interface</span>
      </div>
      <div class="settings-card-body">
        <div class="setting-row">
          <div>
            <div class="setting-label">Language</div>
            <div class="setting-desc">Interface language</div>
          </div>
          <select class="select" onchange="changeLanguage(this.value)"><option value="en" selected>EN</option><option value="ru" >RU</option><option value="zh" >ZH</option><option value="es" >ES</option><option value="pt" >PT</option><option value="ja" >JA</option><option value="de" >DE</option><option value="fr" >FR</option><option value="ko" >KO</option><option value="hi" >HI</option></select>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">Verbose logging</div>
            <div class="setting-desc">Show detailed logs</div>
          </div>
          <label class="toggle">
            <input type="checkbox"  onchange="toggleSetting('verbose', this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">Screenshots on error</div>
            <div class="setting-desc">Save screenshots when errors occur</div>
          </div>
          <label class="toggle">
            <input type="checkbox"  onchange="toggleSetting('screenshotsOnError', this.checked)">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>

    
    <div class="settings-card collapsed">
      <div class="settings-card-header" onclick="toggleSettingsCard(this)">
        <span class="settings-card-icon">üåê</span>
        <span class="settings-card-title">Proxy</span>
        <div class="proxy-status-badge proxy-status-unknown">
          <span>‚ö™</span>
          <span>Proxy not configured</span>
        </div>
        <span class="settings-card-toggle"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M10.3 2.3L4.6 8l5.7 5.7.7-.7L6 8l5-5-.7-.7z"/></svg></span>
      </div>
      <div class="settings-card-body">
        <div class="setting-desc" style="margin-bottom: 12px;">Route browser traffic through proxy server</div>
        
        <!-- Proxy Address Input -->
        <div class="form-group">
          <label class="form-label">Proxy Address</label>
          <div class="proxy-input-row">
            <input 
              type="text" 
              class="form-input proxy-input" 
              id="proxyAddressInput"
              placeholder="http://user:pass@host:port"
              value=""
              onchange="updateProxyAddress(this.value)"
            />
            <button 
              class="btn btn-secondary" 
              id="testProxyBtn"
              onclick="testProxy()"
              disabled
              
            >
              üîç Test Proxy
            </button>
          </div>
          <div class="form-hint">Formats: host:port:user:pass, socks5://user:pass@host:port</div>
          
          
        </div>
        
        <!-- Use Proxy for Registration -->
        <div class="setting-row" style="margin-top: 16px;">
          <div>
            <div class="setting-label">Use proxy for registration</div>
            <div class="setting-desc">Route registration traffic through proxy</div>
          </div>
          <label class="toggle">
            <input 
              type="checkbox" 
              id="useProxyToggle"
               
              disabled
              onchange="toggleSetting('useProxyForRegistration', this.checked)"
            >
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>
  
    
    <div class="settings-card collapsed">
      <div class="settings-card-header" onclick="toggleSettingsCard(this)">
        <span class="settings-card-icon">üõ°Ô∏è</span>
        <span class="settings-card-title">Spoofing mode</span>
        <label class="toggle" onclick="event.stopPropagation()">
          <input type="checkbox" id="spoofingToggle" checked onchange="toggleSpoofing(this.checked)">
          <span class="toggle-slider"></span>
        </label>
        <span class="settings-card-toggle"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M10.3 2.3L4.6 8l5.7 5.7.7-.7L6 8l5-5-.7-.7z"/></svg></span>
      </div>
      <div class="settings-card-body">
        <div class="setting-desc" style="margin-bottom: 12px;">Randomize browser fingerprint</div>
        <div class="spoof-details" id="spoofDetails" style="margin-top: 0;">
        <div class="spoof-modules">
          <div class="spoof-module">
            <span class="module-icon">ü§ñ</span>
            <div class="module-info">
              <div class="module-name">Automation</div>
              <div class="module-desc">Hides webdriver flags</div>
            </div>
          </div>
          <div class="spoof-module">
            <span class="module-icon">üé®</span>
            <div class="module-info">
              <div class="module-name">Canvas/WebGL</div>
              <div class="module-desc">Randomizes fingerprint</div>
            </div>
          </div>
          <div class="spoof-module">
            <span class="module-icon">üñ•Ô∏è</span>
            <div class="module-info">
              <div class="module-name">Navigator</div>
              <div class="module-desc">Spoofs hardware info</div>
            </div>
          </div>
          <div class="spoof-module">
            <span class="module-icon">üîä</span>
            <div class="module-info">
              <div class="module-name">Audio/Fonts</div>
              <div class="module-desc">Masks audio context</div>
            </div>
          </div>
          <div class="spoof-module">
            <span class="module-icon">üåê</span>
            <div class="module-info">
              <div class="module-name">WebRTC</div>
              <div class="module-desc">Hides local IP</div>
            </div>
          </div>
          <div class="spoof-module">
            <span class="module-icon">üñ±Ô∏è</span>
            <div class="module-info">
              <div class="module-name">Behavior</div>
              <div class="module-desc">Human-like actions</div>
            </div>
          </div>
        </div>
        <div class="spoof-warning">
          <span>‚ö†Ô∏è</span>
          <span>Disabling may cause bot detection failures</span>
        </div>
      </div>
      </div>
    </div>
  
    
    
    <div class="settings-card collapsed">
      <div class="settings-card-header" onclick="toggleSettingsCard(this)">
        <span class="settings-card-icon">üì¶</span>
        <span class="settings-card-title">Export Accounts</span>
        <span class="settings-card-toggle"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M10.3 2.3L4.6 8l5.7 5.7.7-.7L6 8l5-5-.7-.7z"/></svg></span>
      </div>
      <div class="settings-card-body">
        <div class="section-desc" style="margin-bottom: 12px;">Export accounts with tokens for transfer</div>
        <div class="import-export-actions">
          <button class="btn btn-primary btn-full" onclick="exportAllAccounts()">
            üì§ Export All
          </button>
          <button class="btn btn-secondary btn-full" onclick="importAccounts()">
            üì• Import Accounts
          </button>
        </div>
      </div>
    </div>
  
    
    <div class="settings-card collapsed danger-card">
      <div class="settings-card-header" onclick="toggleSettingsCard(this)">
        <span class="settings-card-icon">‚ö†Ô∏è</span>
        <span class="settings-card-title">Danger Zone</span>
        <span class="settings-card-toggle"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M10.3 2.3L4.6 8l5.7 5.7.7-.7L6 8l5-5-.7-.7z"/></svg></span>
      </div>
      <div class="settings-card-body">
        <div class="danger-zone-card patch-card">
          <div class="danger-zone-info">
            <div class="danger-zone-label">Kiro Patch</div>
            <div class="danger-zone-desc">Patches Kiro to use custom Machine ID</div>
            <div class="patch-status-row">
              <span id="patchStatusText" class="patch-status">Loading...</span>
              <span id="patchVersionInfo" class="patch-version-info"></span>
            </div>
            <div class="patch-machine-id-row">
              <span id="currentMachineId" class="machine-id-preview"></span>
            </div>
          </div>
          <div class="danger-zone-actions">
            <button id="patchKiroBtn" class="btn btn-warning btn-sm" onclick="confirmPatchKiro()" title="Patch Kiro">
              üîß Patch
            </button>
            <button id="updatePatchBtn" class="btn btn-primary btn-sm" onclick="confirmPatchKiro()" style="display:none" title="Update available">
              ‚¨ÜÔ∏è Update
            </button>
            <button id="unpatchKiroBtn" class="btn btn-secondary btn-sm" onclick="confirmUnpatchKiro()" style="display:none" title="Remove Patch">
              ‚Ü©Ô∏è Remove
            </button>
            <button id="generateIdBtn" class="btn btn-secondary btn-sm" onclick="generateNewMachineId()" title="New ID">
              üé≤ New ID
            </button>
          </div>
        </div>
        
        <div class="danger-zone-card">
          <div class="danger-zone-info">
            <div class="danger-zone-label">Reset Machine ID</div>
            <div class="danger-zone-desc">Generate new telemetry IDs for Kiro. Use if account is banned.</div>
          </div>
          <button class="btn btn-danger btn-sm" onclick="confirmResetMachineId()" title="Reset machineId, sqmId, devDeviceId and serviceMachineId">
            üîÑ Reset
          </button>
        </div>
        <div class="danger-zone-hint">
          üí° Restart Kiro after reset
        </div>
      </div>
    </div>
  
    
    <div class="settings-footer">
      <span class="settings-version">vstandalone</span>
      <a href="https://t.me/whitebite_devsoft" class="btn btn-secondary" style="text-decoration:none" title="Telegram">üì¢ TG</a>
      <button class="btn btn-secondary" onclick="checkUpdates()">Check Updates</button>
    </div>
  </div>
      </div>
    </div>
  
    
    
    <div class="modal-overlay" id="ssoModal" onclick="if(event.target === this) closeSsoModal()">
      <div class="modal">
        <div class="modal-header">
          <span class="modal-title">SSO Import</span>
          <button class="modal-close" onclick="closeSsoModal()">√ó</button>
        </div>
        <div class="modal-body">
          <div class="modal-hint">1. Open view.awsapps.com/start
2. DevTools ‚Üí Application ‚Üí Cookies
3. Copy x-amz-sso_authn</div>
          <textarea class="modal-textarea" id="ssoTokenInput" placeholder="Paste cookie..."></textarea>
          <button class="btn btn-primary" style="width:100%" onclick="importSsoToken()">Import</button>
        </div>
      </div>
    </div>
  
    
    <div class="dialog-overlay" id="dialogOverlay" onclick="if(event.target === this) closeDialog()">
      <div class="dialog">
        <div class="dialog-title" id="dialogTitle">Delete Account</div>
        <div class="dialog-text" id="dialogText">Are you sure you want to delete this account?</div>
        <div class="dialog-actions">
          <button class="btn btn-secondary" onclick="closeDialog()">Cancel</button>
          <button class="btn btn-danger" id="dialogConfirmBtn" onclick="dialogAction()">Delete</button>
        </div>
      </div>
    </div>
  
    <div class="toast-container" id="toastContainer"></div>
  
    
    
    <div class="profiles-panel" id="profilesPanel">
      <div class="profiles-panel-header">
        <button class="overlay-back" onclick="closeProfilesPanel()">‚Üê Back</button>
        <span class="profiles-panel-title">Email Profiles</span>
      </div>
      <div class="profiles-panel-content" id="profilesContent">
        <div class="profiles-empty">
          <div class="empty-icon">üìß</div>
          <div class="empty-text">No profiles configured</div>
          <button class="btn btn-primary" onclick="createProfile()">
            <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M7 7V1h2v6h6v2H9v6H7V9H1V7h6z"/></svg> Add Profile
          </button>
        </div>
      </div>
    </div>
  
    
    <div class="profile-editor" id="profileEditor">
      <div class="editor-header">
        <button class="overlay-back" onclick="closeProfileEditor()">‚Üê Back</button>
        <span class="editor-title">New Profile</span>
      </div>
      <div class="editor-content">
        <div class="form-group">
          <label class="form-label">Profile Name</label>
          <input type="text" class="form-input" id="profileName" placeholder="My Gmail">
        </div>
        
        <div class="form-section" id="imapSection">
          <div class="form-section-title">IMAP</div>
          <div class="form-group" id="imapEmailGroup">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="imapUser" placeholder="your@email.com" oninput="onEmailInput(this.value)">
            <div class="form-hint" id="providerHint"></div>
          </div>
          <div class="form-row">
            <div class="form-group flex-2">
              <label class="form-label">Server</label>
              <input type="text" class="form-input" id="imapServer" placeholder="imap.gmail.com">
            </div>
            <div class="form-group flex-1">
              <label class="form-label">Port</label>
              <input type="number" class="form-input" id="imapPort" value="993">
            </div>
          </div>
          <div class="form-group" id="imapPasswordGroup">
            <label class="form-label">Password</label>
            <div class="password-input-wrapper">
              <input type="password" class="form-input" id="imapPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
              <button class="password-toggle" onclick="togglePasswordVisibility('imapPassword')"><svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 4C4.5 4 1.6 6.5.5 8c1.1 1.5 4 4 7.5 4s6.4-2.5 7.5-4c-1.1-1.5-4-4-7.5-4zm0 7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg></button>
            </div>
          </div>
          <button class="btn btn-secondary" id="testConnectionBtn" onclick="testImapConnection()">üîå Test</button>
        </div>
        
        <div class="form-section" id="proxySection">
          <div class="form-section-title">Proxy</div>
          <div class="form-section-desc">Route browser traffic through proxy server</div>
          <div class="form-group">
            <label class="toggle-label">
              <input type="checkbox" id="proxyEnabled" onchange="toggleProxyFields()">
              <span class="toggle-text">Use Proxy</span>
            </label>
          </div>
          <div class="form-group proxy-fields" id="proxyFields" style="display: none;">
            <label class="form-label">Proxy URL</label>
            <textarea class="form-input form-textarea" id="proxyUrls" rows="4" placeholder="socks5://user:pass@host:port"></textarea>
            <div class="form-hint">Formats: host:port:user:pass, socks5://user:pass@host:port</div>
            <div class="proxy-stats" id="proxyStats"></div>
          </div>
        </div>
        
        <div class="form-section">
          <div class="form-section-title">Email Strategy</div>
          <div class="form-section-desc">Choose how to generate emails for registration</div>
          
    <div class="strategy-selector">
      <div class="strategy-option selected" data-strategy="single" onclick="selectStrategy('single')">
        <div class="strategy-icon">üìß</div>
        <div class="strategy-content">
          <div class="strategy-label">Single Email</div>
          <div class="strategy-desc">Uses your IMAP email directly. Only 1 account per email.</div>
          <div class="strategy-example">Example: your@gmail.com ‚Üí your@gmail.com</div>
        </div>
        <div class="strategy-check">‚úì</div>
      </div>
      <div class="strategy-option" data-strategy="plus_alias" onclick="selectStrategy('plus_alias')">
        <div class="strategy-icon">‚ûï</div>
        <div class="strategy-content">
          <div class="strategy-label">Plus Alias</div>
          <div class="strategy-desc">Adds +random to your email. All emails arrive to same inbox. Works with Gmail, Outlook, Yandex.</div>
          <div class="strategy-example">Example: your@gmail.com ‚Üí your+kiro5x7@gmail.com</div>
        </div>
        <div class="strategy-check">‚úì</div>
      </div>
      <div class="strategy-option" data-strategy="catch_all" onclick="selectStrategy('catch_all')">
        <div class="strategy-icon">üåê</div>
        <div class="strategy-content">
          <div class="strategy-label">Catch-All Domain</div>
          <div class="strategy-desc">Generates random emails on your domain. Requires catch-all configured on mail server.</div>
          <div class="strategy-example">Example: JohnSmith4521@yourdomain.com</div>
        </div>
        <div class="strategy-check">‚úì</div>
      </div>
      <div class="strategy-option" data-strategy="pool" onclick="selectStrategy('pool')">
        <div class="strategy-icon">üìã</div>
        <div class="strategy-content">
          <div class="strategy-label">Email Pool</div>
          <div class="strategy-desc">Use a list of your email addresses. Each email is used once in order.</div>
        </div>
        <div class="strategy-check">‚úì</div>
      </div>
    </div>
    
    <div class="strategy-config" id="catchAllConfig" style="display: none;">
      <div class="config-hint">Enter domain with catch-all configured. All emails to any@domain will arrive to your IMAP inbox.</div>
      <div class="form-group">
        <label class="form-label">Registration Domain</label>
        <input type="text" class="form-input" id="catchAllDomain" placeholder="your-domain.com">
      </div>
    </div>
    
    <div class="strategy-config" id="poolConfig" style="display: none;">
      <div class="config-hint">Add email addresses to use in order. Each email = 1 account. Format: email:password</div>
      <div class="email-pool-editor">
        <div class="pool-stats" id="poolStats"></div>
        <div class="pool-list" id="poolList"></div>
        <div class="pool-add">
          <input type="text" class="form-input" id="newPoolEmail" placeholder="email:password or email..." onkeypress="if(event.key==='Enter') addEmailToPool()" onpaste="handlePoolPaste(event)">
          <button class="btn btn-secondary" onclick="addEmailToPool()"><svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M7 7V1h2v6h6v2H9v6H7V9H1V7h6z"/></svg></button>
        </div>
        <div class="pool-actions">
          <button class="btn btn-secondary" onclick="importEmailsFromFile()">üìÅ From file</button>
          <button class="btn btn-secondary" onclick="pasteEmails()">üìã Paste</button>
        </div>
      </div>
    </div>
  
        </div>
      </div>
      <div class="editor-footer">
        <button class="btn btn-secondary" onclick="closeProfileEditor()">Cancel</button>
        <button class="btn btn-primary" onclick="saveProfile()">Save</button>
      </div>
    </div>
  
  </div>
  <div id="toastContainer" class="toast-container"></div>
  <script>
    // Standalone Web App Script
    // Auto-generated from VS Code extension components
    
    const T = {"kiroAccounts":"Kiro Accounts","accounts":"Accounts","registration":"Registration","llm":"AI/LLM","profiles":"Profiles","settings":"Settings","compactViewTip":"Shrink cards to show more accounts","settingsTip":"Configure auto-switch, browser mode, logging","back":"Back","valid":"valid","expired":"expired","total":"total","noActive":"No active","validFilter":"Valid","expiredFilter":"Expired","activeGroup":"Active","readyGroup":"Ready","badGroup":"Expired / Exhausted","expiredGroup":"Expired","exhaustedGroup":"Exhausted","bannedGroup":"Banned","banned":"BANNED","refreshAll":"Refresh all","deleteAll":"Delete all","todaysUsage":"Today's Usage","used":"used","daysLeft":"days left","remaining":"remaining","resetsAtMidnight":"Resets at midnight","autoReg":"Auto-Register","autoRegTip":"Start automatic account registration","autoRegCountLabel":"Count","autoRegCountPlaceholder":"Number of accounts","import":"Import","importTip":"Import existing token from JSON file","refresh":"Refresh","refreshTip":"Reload accounts and update token status","export":"Export","exportTip":"Save all accounts to JSON file","running":"Running...","stop":"Stop","all":"All","byUsage":"By Usage","byExpiry":"By Expiry","byDate":"By Date","searchPlaceholder":"Search accounts...","newBadge":"NEW","filterByTokens":"Filter","fresh":"Fresh","partial":"Partial","trial":"Trial","empty":"Empty","more":"More","active":"Active","copyTokenTip":"Copy access token to clipboard","refreshTokenTip":"Refresh expired token","viewQuotaTip":"Show usage statistics for this account","deleteTip":"Remove account and token file","noAccounts":"No accounts yet","createFirst":"Create First Account","console":"Console","clearTip":"Clear console output","openLogTip":"Open full log file in editor","copyLogsTip":"Copy logs to clipboard","scrollToBottom":"Scroll to bottom","newMessagesBelow":"New messages below","step":"Step","connected":"Connected","confirm":"Confirm","apply":"Apply","cancel":"Cancel","deleteTitle":"Delete Account","deleteConfirm":"Are you sure you want to delete this account?","areYouSure":"Are you sure?","settingsTitle":"Settings","autoSwitch":"Auto-switch on expiry","autoSwitchDesc":"Automatically switch to next valid account","hideExhausted":"Hide exhausted","hideExhaustedDesc":"Hide accounts with 100% usage","headless":"Headless mode","headlessDesc":"Run browser in background","verbose":"Verbose logging","verboseDesc":"Show detailed logs","screenshots":"Screenshots on error","screenshotsDesc":"Save screenshots when errors occur","spoofing":"Spoofing mode","spoofingDesc":"Randomize browser fingerprint","deviceFlow":"Device Flow auth","deviceFlowDesc":"Use device code instead of local server","language":"Language","languageDesc":"Interface language","spoofAutomation":"Automation","spoofAutomationDesc":"Hides webdriver flags","spoofCanvas":"Canvas/WebGL","spoofCanvasDesc":"Randomizes fingerprint","spoofNavigator":"Navigator","spoofNavigatorDesc":"Spoofs hardware info","spoofAudio":"Audio/Fonts","spoofAudioDesc":"Masks audio context","spoofWebrtc":"WebRTC","spoofWebrtcDesc":"Hides local IP","spoofBehavior":"Behavior","spoofBehaviorDesc":"Human-like actions","spoofWarning":"Disabling may cause bot detection failures","kiroPatch":"Kiro Patch","kiroPatchDesc":"Patches Kiro to use custom Machine ID","patchStatusLoading":"Loading...","patchStatusActive":"Patched","patchStatusNotPatched":"Not patched","patchStatusOutdated":"Outdated","patchVersion":"Patch","patchVersionInstalled":"installed","patchVersionLatest":"latest","patchUpdateAvailable":"Update available","kiroVersion":"Kiro","patch":"Patch","removePatch":"Remove","updatePatch":"Update","newMachineId":"New ID","patchKiroTitle":"Patch Kiro","patchKiroConfirm":"This will patch Kiro to use custom Machine ID. Restart Kiro after patching. Continue?","removePatchTitle":"Remove Patch","removePatchConfirm":"This will restore original Kiro files. Continue?","newProfile":"New Profile","editProfile":"Edit Profile","profileName":"Profile Name","profileNamePlaceholder":"My Gmail","server":"Server","port":"Port","password":"Password","testConnection":"Test","proxy":"Proxy","proxyEnabled":"Use Proxy","proxyUrl":"Proxy URL","proxyUrlPlaceholder":"socks5://user:pass@host:port","proxyHint":"Supports: socks5://user:pass@host:port or host:port:user:pass","testing":"Testing...","emailStrategy":"Email Strategy","emailStrategyDesc":"Choose how to generate emails for registration","save":"Save","createProfile":"Create Profile","enterYourEmail":"Enter your email","detected":"Detected","chooseStrategy":"Choose strategy","recommended":"Recommended","otherOptions":"Other options","useAppPassword":"Use App Password","imapConnection":"IMAP Connection","optional":"optional","checkConnection":"Check connection","strategySingleName":"Single Email","strategySingleDesc":"Uses your IMAP email directly. Only 1 account per email.","strategySingleExample":"your@gmail.com ‚Üí your@gmail.com","strategyPlusAliasName":"Plus Alias","strategyPlusAliasDesc":"Adds +random to your email. All emails arrive to same inbox. Works with Gmail, Outlook, Yandex.","strategyPlusAliasExample":"your@gmail.com ‚Üí your+kiro5x7@gmail.com","strategyCatchAllName":"Catch-All Domain","strategyCatchAllDesc":"Generates random emails on your domain. Requires catch-all configured on mail server.","strategyCatchAllExample":"JohnSmith4521@yourdomain.com","strategyCatchAllHint":"Enter domain with catch-all configured. All emails to any@domain will arrive to your IMAP inbox.","strategyCatchAllDomain":"Registration Domain","strategyPoolName":"Email Pool","strategyPoolDesc":"Use a list of your email addresses. Each email is used once in order.","strategyPoolHint":"Add email addresses to use in order. Each email = 1 account. Format: email:password","strategyPoolAdd":"email:password or email...","strategyPoolFromFile":"From file","strategyPoolPaste":"Paste","poolEmpty":"Add at least one email to pool","emailsAdded":"{count} emails added","example":"Example","unlimitedAccounts":"Unlimited accounts","allEmailsOneInbox":"All emails in one inbox","noOwnDomain":"No own domain needed","notAllProvidersSupport":"Not all providers support","uniqueEmails":"Unique email addresses","needOwnDomain":"Need own domain","needCatchAllSetup":"Need catch-all setup","easyToSetup":"Easy to setup","worksEverywhere":"Works everywhere","oneAccountPerEmail":"Only 1 account per email","worksWithAnyProvider":"Works with any provider","controlOverList":"Control over list","needManyEmails":"Need many emails","requiresDomain":"Requires own domain","providerNoAlias":"does not support aliases","activeProfile":"Active Profile","change":"Change","noProfileConfigured":"No profile configured","configure":"Configure","emailProfiles":"Email Profiles","noProfiles":"No profiles configured","addProfile":"Add Profile","success":"Success","failed":"Failed","strategySingleShort":"One account per email","strategyPlusAliasShort":"user+random@domain","strategyCatchAllShort":"Any email on domain","strategyPoolShort":"Your email list","dangerZone":"Danger Zone","resetMachineId":"Reset Machine ID","resetMachineIdDesc":"Generate new telemetry IDs for Kiro. Use if account is banned.","resetMachineIdTip":"Reset machineId, sqmId, devDeviceId and serviceMachineId","reset":"Reset","restartAfterReset":"Restart Kiro after reset","resetMachineIdTitle":"Reset Machine ID","resetMachineIdConfirm":"This will reset Kiro telemetry IDs. You need to restart Kiro after. Continue?","llmSettings":"LLM API","llmBaseUrl":"Base URL","llmPort":"Port","llmApiKey":"API Key (optional)","llmApiKeyDesc":"If set, all requests must include this key in the Authorization header.","llmModel":"Default Model","llmModelDesc":"Default chat model to use for completions.","llmServer":"LLM Server","llmServerDesc":"Start or stop the local OpenAI-compatible server.","startServer":"Start Server","stopServer":"Stop Server","restartServer":"Restart Server","starting":"Starting...","stopping":"Stopping...","restarting":"Restarting...","serverStatus":"Server Status","serverStatusRunning":"Running","serverStatusStopped":"Stopped","serverStatusError":"Error","proxySettings":"Proxy","proxySettingsDesc":"Route browser traffic through proxy server","proxyUrlHint":"Formats: host:port:user:pass, socks5://user:pass@host:port","delete":"Delete","checkUpdates":"Check Updates","newVersion":"New version!","download":"Download","edit":"Edit","unnamed":"Unnamed","customDomain":"Custom Domain","emailPasswordHint":"Use your email password","ssoImport":"SSO Import","ssoHint":"1. Open view.awsapps.com/start\n2. DevTools ‚Üí Application ‚Üí Cookies\n3. Copy x-amz-sso_authn","pasteCookie":"Paste cookie...","providerGmail":"Gmail","providerYandex":"Yandex","providerMailru":"Mail.ru","providerOutlook":"Outlook","providerCustom":"Custom Domain","gmailPasswordHint":"Use App Password from Google Account settings","yandexPasswordHint":"Use app password from Yandex settings","mailruPasswordHint":"Create app password in Mail.ru settings","outlookPasswordHint":"Use your Microsoft account password","accountDeleted":"Account deleted","badAccountsDeleted":"Bad accounts deleted","resettingMachineId":"Resetting Machine ID...","patchingKiro":"Patching Kiro...","removingPatch":"Removing patch...","profileCreated":"Profile created","profileUpdated":"Profile updated","profileDeleted":"Profile deleted","tokenCopied":"Token copied to clipboard","logsCopied":"Logs copied to clipboard","fillAllFields":"Please fill all IMAP fields","clipboardError":"Failed to read clipboard","deleteProfileConfirm":"Delete this profile?","deleteBadAccountsConfirm":"Delete all expired/exhausted accounts?","deleteBannedAccountsConfirm":"Delete all banned accounts?","bannedAccountsDeleted":"Banned accounts deleted","emailsImported":"Imported {count} emails","exportAccounts":"Export Accounts","exportAccountsDesc":"Export accounts with tokens for transfer","importAccounts":"Import Accounts","importAccountsDesc":"Import accounts from export file","exportSelected":"Export Selected","exportAll":"Export All","selectMode":"Select","selected":"selected","selectAll":"Select All","deselectAll":"Deselect All","refreshSelected":"Refresh Tokens","deleteSelected":"Delete Selected","deleteSelectedConfirm":"Delete {count} selected accounts?","selectedAccountsDeleted":"{count} accounts deleted","refreshingTokens":"Refreshing tokens...","checkHealth":"Check Health","checkingHealth":"Checking accounts health...","ready":"Ready","clickToConfigure":"Click to configure","noAccountsFound":"No accounts found","clearSearch":"Clear search","emptyAccountsTitle":"No accounts yet","emptyAccountsDesc":"Create your first account to get started with Kiro","emptySearchTitle":"No results found","emptySearchDesc":"Try a different search term","emptyBannedTitle":"No banned accounts","emptyBannedDesc":"All your accounts are in good standing","automation":"Automation","interface":"Interface","autoSwitchThreshold":"Switch threshold","autoSwitchThresholdDesc":"Switch when remaining < this value","pause":"Pause","statistics":"Statistics","weeklyUsage":"Weekly Usage","avgPerAccount":"Avg per account","accountHealth":"Account Health","registrationStrategy":"Registration Strategy","registrationStrategyDesc":"Choose how to register accounts (affects ban risk)","strategyWebView":"WebView (Recommended)","strategyWebViewDesc":"Opens real browser, you enter credentials manually. Minimal ban risk.","strategyWebViewBanRisk":"Low ban risk (<10%)","strategyWebViewFeature1":"Real browser fingerprint","strategyWebViewFeature2":"Human-like behavior","strategyAutomated":"Automated (Legacy)","strategyAutomatedDesc":"Automated browser with DrissionPage. Works for some users.","strategyAutomatedBanRisk":"Medium-High ban risk (40-90%)","strategyAutomatedFeature1":"Fully automatic","strategyAutomatedFeature2":"High detection risk","deferQuotaCheck":"Defer quota check","deferQuotaCheckDesc":"Do NOT check quota immediately after registration (reduces ban risk)","manualInputRequired":"Manual input required","lowBanRisk":"Low risk","mediumBanRisk":"Medium risk","highBanRisk":"High risk","banRiskLabel":"Ban risk","auto":"Auto","manual":"Manual","oauthProvider":"OAuth Provider","oauthProviderDesc":"Choose provider for WebView registration","oauthProviderGoogle":"Google","oauthProviderGithub":"GitHub","oauthProviderAsk":"Ask every time","oauthProviderAskDesc":"Show provider selection dialog","selectOAuthProvider":"Select OAuth Provider","selectOAuthProviderDesc":"Choose how to sign in to Kiro","batchRegistration":"Batch Registration","scheduledRegistration":"Scheduled Registration","scheduledRegistrationDesc":"Auto-register accounts at intervals","loginTemplate":"Login Template","loginTemplatePlaceholder":"Account_{N}","loginTemplateHint":"Use {N} for number (001, 002...)","startNumber":"Start #","scheduleInterval":"Interval","scheduleIntervalManual":"Manual","scheduleIntervalMinutes":"min","maxAccounts":"Limit","maxAccountsHint":"Max accounts to register","startSchedule":"Start","stopSchedule":"Stop","scheduleActive":"Active","scheduleNextIn":"Next in","complete":"Complete","preview":"Preview","nextNumber":"Next #","interval":"Interval","minutes":"min","hour":"hour","hours":"hours","startScheduled":"Start","resetProgress":"Reset counter to start","noTimer":"No timer","noTimerHint":"Click Start for each registration","custom":"Custom","upcoming":"Upcoming","startFrom":"Start #","enableFirst":"Enable toggle first","registerOne":"Register","accountsToRegister":"Accounts to register","intervalBetween":"Interval between registrations","noDelay":"No delay","noDelayHint":"Registrations will run one after another","withDelayHint":"Safer for avoiding rate limits","accountNames":"Account names","randomNames":"Random names","randomNamesDesc":"Realistic first + last names","customPrefix":"Custom prefix","customPrefixDesc":"Your prefix + number","enterPrefix":"Enter prefix (e.g. MyAcc)","exampleNames":"Example names","previousProgress":"Previous progress","startBatchReg":"Start Registration","stopRegistration":"Stop Registration","completed":"Completed","batchRemaining":"Remaining","nextIn":"Next in","proxyAddress":"Proxy Address","proxyAddressPlaceholder":"http://user:pass@host:port","testProxy":"Test Proxy","testingProxy":"Testing...","proxyWorking":"Proxy is working","proxyNotWorking":"Proxy is not working","proxyNotConfigured":"Proxy not configured","proxyResponseTime":"Response time","proxyIpAddress":"IP Address","useProxyForRegistration":"Use proxy for registration","useProxyForRegistrationDesc":"Route registration traffic through proxy","proxyTestSuccess":"Proxy test successful","proxyTestFailed":"Proxy test failed"};
    
    // WebSocket connection
    let ws = null;
    let reconnectAttempts = 0;
    
    function connectWebSocket() {
      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
      ws = new WebSocket(protocol + '//' + window.location.host + '/ws');
      
      ws.onopen = () => {
        console.log('WebSocket connected');
        reconnectAttempts = 0;
        sendCommand('refresh');
        sendCommand('getPatchStatus');
        sendCommand('getActiveProfile');
      };
      
      ws.onmessage = (event) => {
        try {
          const msg = JSON.parse(event.data);
          handleMessage(msg);
        } catch (e) {
          console.error('Failed to parse message:', e);
        }
      };
      
      ws.onclose = () => {
        console.log('WebSocket disconnected');
        if (reconnectAttempts < 5) {
          reconnectAttempts++;
          setTimeout(connectWebSocket, 1000 * reconnectAttempts);
        }
      };
      
      ws.onerror = (error) => {
        console.error('WebSocket error:', error);
      };
    }
    
    function sendCommand(command, data = {}) {
      if (ws && ws.readyState === WebSocket.OPEN) {
        ws.send(JSON.stringify({ command, ...data }));
      }
    }
    
    // Message handler - same as extension
    function handleMessage(msg) {
      switch (msg.type) {
        case 'accountsLoaded':
          renderAccounts(msg.accounts);
          break;
        case 'appendLog':
          appendLogLine(msg.log);
          break;
        case 'updateStatus':
          updateStatus(msg.status);
          break;
        case 'toast':
          showToast(msg.message, msg.toastType || 'success');
          break;
        case 'profilesLoaded':
          renderProfilesList(msg.profiles, msg.activeProfileId);
          break;
        case 'activeProfileLoaded':
          renderActiveProfile(msg.profile);
          break;
        case 'profileLoaded':
          populateProfileEditor(msg.profile);
          break;
        case 'patchStatus':
          updatePatchStatus(msg);
          break;
      }
    }
    
    // UI Functions (same as extension, but using sendCommand instead of vscode.postMessage)
    let pendingAction = null;
    let currentPoolEmails = [];
    let editingProfileId = null;
    
    function openSettings() {
      document.getElementById('settingsOverlay')?.classList.add('visible');
      sendCommand('getActiveProfile');
      sendCommand('getPatchStatus');
    }
    
    function closeSettings() {
      document.getElementById('settingsOverlay')?.classList.remove('visible');
    }
    
    function toggleLogs() {
      document.getElementById('logsDrawer')?.classList.toggle('open');
    }
    
    function startAutoReg() {
      sendCommand('startAutoReg');
    }
    
    function stopAutoReg() {
      sendCommand('stopAutoReg');
    }
    
    function refresh() {
      sendCommand('refresh');
    }
    
    function switchAccount(filename) {
      sendCommand('switchAccount', { email: filename });
    }
    
    function copyToken(filename) {
      sendCommand('copyToken', { email: filename });
    }
    
    function refreshToken(filename) {
      sendCommand('refreshToken', { email: filename });
    }
    
    function confirmDelete(filename) {
      pendingAction = { type: 'delete', filename };
      document.getElementById('dialogTitle').textContent = T.deleteTitle;
      document.getElementById('dialogText').textContent = T.areYouSure;
      document.getElementById('dialogOverlay').classList.add('visible');
    }
    
    function closeDialog() {
      document.getElementById('dialogOverlay').classList.remove('visible');
      pendingAction = null;
    }
    
    function dialogAction() {
      if (pendingAction?.type === 'delete') {
        sendCommand('deleteAccount', { email: pendingAction.filename });
        showToast(T.accountDeleted, 'success');
      } else if (pendingAction?.type === 'deleteExhausted') {
        sendCommand('deleteExhaustedAccounts');
        showToast(T.badAccountsDeleted || 'Bad accounts deleted', 'success');
      } else if (pendingAction?.type === 'deleteBanned') {
        sendCommand('deleteBannedAccounts');
        showToast(T.bannedAccountsDeleted || 'Banned accounts deleted', 'success');
      } else if (pendingAction?.type === 'deleteSelected') {
        sendCommand('deleteSelectedAccounts', { filenames: pendingAction.filenames });
        showToast((T.selectedAccountsDeleted || '{count} accounts deleted').replace('{count}', pendingAction.filenames.length), 'success');
        selectionMode = false;
        selectedAccounts.clear();
        const bar = document.getElementById('bulkActionsBar');
        if (bar) bar.classList.add('hidden');
      }
      closeDialog();
    }
    
    function showToast(message, type = 'success') {
      const container = document.getElementById('toastContainer');
      if (!container) return;
      
      const toast = document.createElement('div');
      toast.className = 'toast ' + type;
      const icons = { success: '‚úì', error: '‚úó', warning: '‚ö†Ô∏è' };
      toast.innerHTML = '<span class="toast-icon">' + (icons[type] || '‚Ä¢') + '</span><span class="toast-message">' + message + '</span>';
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('removing');
        setTimeout(() => toast.remove(), 200);
      }, 3000);
    }
    
    function appendLogLine(log) {
      const content = document.getElementById('logsContent');
      if (!content) return;
      
      document.getElementById('logsDrawer')?.classList.add('open');
      
      const line = document.createElement('div');
      line.className = 'log-line';
      if (log.includes('‚úì') || log.includes('SUCCESS') || log.includes('[OK]')) line.classList.add('success');
      else if (log.includes('‚úó') || log.includes('ERROR') || log.includes('[X]')) line.classList.add('error');
      else if (log.includes('‚ö†') || log.includes('WARN') || log.includes('[!]')) line.classList.add('warning');
      line.textContent = log;
      content.appendChild(line);
      
      while (content.children.length > 200) content.removeChild(content.firstChild);
      content.scrollTop = content.scrollHeight;
      
      const countEl = document.getElementById('logsCount');
      if (countEl) countEl.textContent = content.children.length.toString();
    }
    
    function updateStatus(status) {
      const btn = document.querySelector('.btn-primary');
      if (!status) {
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = '‚ö° ' + T.autoReg;
        }
        sendCommand('refresh');
        return;
      }
      
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> ' + T.running;
      }
    }
    
    function renderAccounts(accounts) {
      const list = document.getElementById('accountList');
      if (!list || !accounts) return;
      
      // Group accounts
      const active = accounts.filter(a => a.isActive);
      const ready = accounts.filter(a => !a.isActive && !a.isExpired);
      const expired = accounts.filter(a => a.isExpired);
      
      let html = '';
      
      if (active.length > 0) {
        html += '<div class="account-group"><div class="account-group-header"><span class="account-group-title">Active</span><span class="account-group-count">' + active.length + '</span></div>';
        active.forEach(a => { html += renderAccountCard(a); });
        html += '</div>';
      }
      
      if (ready.length > 0) {
        html += '<div class="account-group"><div class="account-group-header"><span class="account-group-title">Ready</span><span class="account-group-count">' + ready.length + '</span></div>';
        ready.forEach(a => { html += renderAccountCard(a); });
        html += '</div>';
      }
      
      if (expired.length > 0) {
        html += '<div class="account-group collapsed"><div class="account-group-header"><span class="account-group-title">Expired</span><span class="account-group-count">' + expired.length + '</span></div>';
        expired.forEach(a => { html += renderAccountCard(a); });
        html += '</div>';
      }
      
      list.innerHTML = html;
    }
    
    function renderAccountCard(account) {
      const initial = (account.email || account.filename || '?')[0].toUpperCase();
      const name = account.email?.split('@')[0] || account.filename?.replace('.json', '') || 'Unknown';
      const status = account.isExpired ? 'expired' : (account.isActive ? 'active' : 'ready');
      
      return '<div class="account ' + status + '" onclick="switchAccount(\'' + account.filename + '\')">' +
        '<div class="account-avatar">' + initial + '</div>' +
        '<div class="account-info">' +
          '<div class="account-email">' + name + '</div>' +
          '<div class="account-meta">' +
            '<span class="account-usage">üìä ' + (account.isExpired ? 'expired' : '0h') + '</span>' +
            '<span class="account-region">üåç ' + (account.region || 'us-east-1') + '</span>' +
          '</div>' +
        '</div>' +
        '<div class="account-actions">' +
          '<button class="icon-btn" onclick="event.stopPropagation(); refreshToken(\'' + account.filename + '\')">üîÑ</button>' +
          '<button class="icon-btn danger" onclick="event.stopPropagation(); confirmDelete(\'' + account.filename + '\')">üóëÔ∏è</button>' +
        '</div>' +
      '</div>';
    }
    
    // Profile functions
    function openProfilesPanel() {
      // Close settings first to avoid overlap
      document.getElementById('settingsOverlay')?.classList.remove('visible');
      document.getElementById('profilesPanel')?.classList.add('visible');
      sendCommand('loadProfiles');
    }
    
    function closeProfilesPanel() {
      document.getElementById('profilesPanel')?.classList.remove('visible');
      // Reopen settings
      document.getElementById('settingsOverlay')?.classList.add('visible');
    }
    
    function createProfile() {
      editingProfileId = null;
      currentPoolEmails = [];
      // Close profiles panel first
      document.getElementById('profilesPanel')?.classList.remove('visible');
      document.getElementById('profileEditor')?.classList.add('visible');
      document.getElementById('profileName').value = '';
      document.getElementById('imapUser').value = '';
      document.getElementById('imapServer').value = '';
      document.getElementById('imapPort').value = '993';
      document.getElementById('imapPassword').value = '';
      selectStrategy('single');
    }
    
    function selectStrategy(strategy) {
      document.querySelectorAll('.strategy-option').forEach(el => {
        el.classList.toggle('selected', el.dataset.strategy === strategy);
      });
      const catchAllConfig = document.getElementById('catchAllConfig');
      const poolConfig = document.getElementById('poolConfig');
      const imapEmailGroup = document.getElementById('imapEmailGroup');
      const imapPasswordGroup = document.getElementById('imapPasswordGroup');
      
      if (catchAllConfig) catchAllConfig.style.display = strategy === 'catch_all' ? 'block' : 'none';
      if (poolConfig) poolConfig.style.display = strategy === 'pool' ? 'block' : 'none';
      
      const isPool = strategy === 'pool';
      if (imapEmailGroup) imapEmailGroup.style.display = isPool ? 'none' : 'block';
      if (imapPasswordGroup) imapPasswordGroup.style.display = isPool ? 'none' : 'block';
    }
    
    function closeProfileEditor() {
      document.getElementById('profileEditor')?.classList.remove('visible');
      editingProfileId = null;
      // Reopen profiles panel
      document.getElementById('profilesPanel')?.classList.add('visible');
      sendCommand('loadProfiles');
    }
    
    function saveProfile() {
      const name = document.getElementById('profileName')?.value?.trim() || T.unnamed;
      const server = document.getElementById('imapServer')?.value?.trim();
      const user = document.getElementById('imapUser')?.value?.trim();
      const password = document.getElementById('imapPassword')?.value;
      const port = parseInt(document.getElementById('imapPort')?.value) || 993;
      
      const selectedStrategy = document.querySelector('.strategy-option.selected');
      const strategyType = selectedStrategy?.dataset?.strategy || 'single';
      
      const strategy = { type: strategyType };
      if (strategyType === 'catch_all') {
        strategy.domain = document.getElementById('catchAllDomain')?.value?.trim();
      } else if (strategyType === 'pool') {
        strategy.emails = currentPoolEmails.map(item => ({
          email: item.email || item,
          password: item.password,
          status: 'pending'
        }));
      }
      
      const isPool = strategyType === 'pool';
      
      if (isPool) {
        if (!currentPoolEmails || currentPoolEmails.length === 0) {
          showToast(T.poolEmpty || 'Add at least one email to pool', 'error');
          return;
        }
        const firstEntry = currentPoolEmails[0];
        sendCommand(editingProfileId ? 'updateProfile' : 'createProfile', {
          profile: {
            id: editingProfileId,
            name,
            imap: { server, user: firstEntry.email || firstEntry, password: firstEntry.password || '', port },
            strategy
          }
        });
      } else {
        if (!server || !user || !password) {
          showToast(T.fillAllFields, 'error');
          return;
        }
        sendCommand(editingProfileId ? 'updateProfile' : 'createProfile', {
          profile: {
            id: editingProfileId,
            name,
            imap: { server, user, password, port },
            strategy
          }
        });
      }
      
      closeProfileEditor();
    }
    
    function renderProfilesList(profiles, activeId) {
      const container = document.getElementById('profilesContent');
      if (!container) return;
      
      if (!profiles || profiles.length === 0) {
        container.innerHTML = '<div class="profiles-empty"><div class="empty-icon">üìß</div><div class="empty-text">' + T.noProfiles + '</div><button class="btn btn-primary" onclick="createProfile()">+ ' + T.addProfile + '</button></div>';
        return;
      }
      
      let html = '<div class="profiles-list">';
      profiles.forEach(profile => {
        const isActive = profile.id === activeId;
        html += '<div class="profile-card ' + (isActive ? 'active' : '') + '">' +
          '<div class="profile-card-header">' +
            '<div class="profile-card-radio" onclick="selectProfile(\'' + profile.id + '\')">' +
              '<span class="radio-dot ' + (isActive ? 'checked' : '') + '"></span>' +
            '</div>' +
            '<div class="profile-card-info">' +
              '<div class="profile-card-name">' + (profile.name || T.unnamed) + '</div>' +
              '<div class="profile-card-email">' + (profile.imap?.user || '') + '</div>' +
            '</div>' +
          '</div>' +
        '</div>';
      });
      html += '</div>';
      html += '<button class="btn btn-primary profiles-add-btn" onclick="createProfile()">+ ' + T.addProfile + '</button>';
      container.innerHTML = html;
    }
    
    function selectProfile(profileId) {
      sendCommand('setActiveProfile', { profileId });
    }
    
    // Store current active profile for Hero display
    let currentActiveProfile = null;
    
    function renderActiveProfile(profile) {
      currentActiveProfile = profile;
      
      // Update Settings panel
      const container = document.getElementById('activeProfileContent');
      if (container) {
        if (!profile) {
          container.innerHTML = '<div class="active-profile-empty"><span class="empty-icon">üìß</span><span class="empty-text">' + T.noProfileConfigured + '</span><button class="btn btn-primary btn-sm" onclick="openProfilesPanel()">' + T.configure + '</button></div>';
        } else {
          container.innerHTML = '<div class="active-profile-info"><div class="active-profile-name">' + (profile.name || T.unnamed) + '</div><div class="active-profile-email">' + (profile.imap?.user || '') + '</div></div>';
        }
      }
      
      // Update Hero section to show profile info
      updateHeroWithProfile(profile);
    }
    
    function updateHeroWithProfile(profile) {
      const hero = document.querySelector('.hero');
      if (!hero) return;
      
      // Don't update if registration is running (hero shows progress)
      if (hero.classList.contains('progress')) return;
      
      if (!profile) {
        hero.className = 'hero empty';
        hero.setAttribute('onclick', 'openSettings()');
        hero.innerHTML = '<div class="hero-email">' + T.noActive + '</div><div class="hero-hint">' + (T.clickToConfigure || 'Click to configure') + '</div>';
        return;
      }
      
      const profileName = profile.name || T.unnamed || 'Unnamed';
      const email = profile.imap?.user || '';
      const strategyType = profile.strategy?.type || 'single';
      const strategyIcon = strategyType === 'pool' ? 'üì¶' : strategyType === 'catch_all' ? 'üéØ' : 'üìß';
      const registered = profile.stats?.registered || 0;
      const failed = profile.stats?.failed || 0;
      
      hero.className = 'hero profile';
      hero.setAttribute('onclick', 'openSettings()');
      hero.innerHTML = 
        '<div class="hero-header">' +
          '<span class="hero-email" title="' + email + '">' + strategyIcon + ' ' + profileName + '</span>' +
          '<span class="hero-days">' + (T.ready || 'Ready') + '</span>' +
        '</div>' +
        '<div class="hero-profile-info">' +
          '<span class="hero-profile-email">' + email + '</span>' +
        '</div>' +
        '<div class="hero-stats">' +
          '<span class="hero-usage font-mono">‚úÖ ' + registered + ' / ‚ùå ' + failed + '</span>' +
          '<span class="hero-percent">' + (T.clickToConfigure || 'Click to configure') + '</span>' +
        '</div>';
    }
    
    function updatePatchStatus(status) {
      const statusEl = document.getElementById('patchStatusText');
      if (statusEl) {
        if (status.isPatched) {
          statusEl.textContent = T.patchStatusActive + ' ‚úì';
          statusEl.className = 'patch-status success';
        } else {
          statusEl.textContent = T.patchStatusNotPatched;
          statusEl.className = 'patch-status warning';
        }
      }
    }
    
    // Settings toggles
    function toggleAutoSwitch(enabled) {
      sendCommand('toggleAutoSwitch', { enabled });
    }
    
    function toggleSetting(key, value) {
      sendCommand('updateSetting', { key, value });
    }
    
    function changeLanguage(lang) {
      sendCommand('setLanguage', { language: lang });
    }
    
    // Pool email functions
    function addEmailToPool() {
      const input = document.getElementById('newPoolEmail');
      const value = input?.value?.trim();
      if (!value || !value.includes('@')) return;
      
      let email, password;
      if (value.includes(':') && value.indexOf(':') > value.indexOf('@')) {
        const colonPos = value.lastIndexOf(':');
        email = value.substring(0, colonPos);
        password = value.substring(colonPos + 1);
      } else {
        email = value;
      }
      
      if (!currentPoolEmails.find(e => (e.email || e).toLowerCase() === email.toLowerCase())) {
        currentPoolEmails.push(password ? { email, password } : { email });
        renderPoolList();
      }
      if (input) input.value = '';
    }
    
    function removeEmailFromPool(index) {
      currentPoolEmails.splice(index, 1);
      renderPoolList();
    }
    
    function renderPoolList() {
      const list = document.getElementById('poolList');
      if (!list) return;
      list.innerHTML = currentPoolEmails.map((item, i) => {
        const email = item.email || item;
        const hasPassword = item.password ? ' üîë' : '';
        return '<div class="pool-item pending"><span class="pool-status">‚¨ú</span><span class="pool-email">' + email + hasPassword + '</span><button class="pool-remove" onclick="removeEmailFromPool(' + i + ')">‚úï</button></div>';
      }).join('');
    }
    
    function pasteEmails() {
      navigator.clipboard.readText().then(text => {
        const lines = text.split(/[\r\n]+/).filter(e => e.includes('@'));
        lines.forEach(line => {
          const trimmed = line.trim();
          let email, password;
          if (trimmed.includes(':') && trimmed.indexOf(':') > trimmed.indexOf('@')) {
            const colonPos = trimmed.lastIndexOf(':');
            email = trimmed.substring(0, colonPos);
            password = trimmed.substring(colonPos + 1);
          } else {
            email = trimmed;
          }
          if (!currentPoolEmails.find(e => (e.email || e).toLowerCase() === email.toLowerCase())) {
            currentPoolEmails.push(password ? { email, password } : { email });
          }
        });
        renderPoolList();
      }).catch(() => showToast('Clipboard error', 'error'));
    }
    
    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      connectWebSocket();
    });
    
    // Additional functions
    function editProfile(profileId) {
      editingProfileId = profileId;
      sendCommand('getProfile', { profileId });
    }
    
    function deleteProfile(profileId) {
      if (confirm(T.deleteProfileConfirm || 'Delete this profile?')) {
        sendCommand('deleteProfile', { profileId });
      }
    }
    
    function populateProfileEditor(profile) {
      if (!profile) return;
      
      editingProfileId = profile.id;
      
      const nameEl = document.getElementById('profileName');
      const userEl = document.getElementById('imapUser');
      const serverEl = document.getElementById('imapServer');
      const portEl = document.getElementById('imapPort');
      const passwordEl = document.getElementById('imapPassword');
      
      if (nameEl) nameEl.value = profile.name || '';
      if (userEl) userEl.value = profile.imap?.user || '';
      if (serverEl) serverEl.value = profile.imap?.server || '';
      if (portEl) portEl.value = profile.imap?.port || 993;
      if (passwordEl) passwordEl.value = profile.imap?.password || '';
      
      const strategyType = profile.strategy?.type || 'single';
      selectStrategy(strategyType);
      
      if (strategyType === 'catch_all' && profile.strategy?.domain) {
        const domainEl = document.getElementById('catchAllDomain');
        if (domainEl) domainEl.value = profile.strategy.domain;
      }
      
      if (strategyType === 'pool' && profile.strategy?.emails) {
        currentPoolEmails = profile.strategy.emails.map(e => 
          typeof e === 'string' ? { email: e } : e
        );
        renderPoolList();
      }
      
      document.getElementById('profileEditor')?.classList.add('visible');
    }
    
    function clearConsole() {
      const content = document.getElementById('logsContent');
      if (content) content.innerHTML = '';
      const countEl = document.getElementById('logsCount');
      if (countEl) countEl.textContent = '0';
    }
    
    function copyLogs() {
      const content = document.getElementById('logsContent');
      if (content) {
        const logs = Array.from(content.querySelectorAll('.log-line'))
          .map(el => el.textContent)
          .join('\n');
        navigator.clipboard.writeText(logs).then(() => {
          showToast('Logs copied', 'success');
        });
      }
    }
    
    function togglePasswordVisibility(inputId) {
      const input = document.getElementById(inputId);
      if (input) input.type = input.type === 'password' ? 'text' : 'password';
    }
    
    function testImapConnection() {
      const server = document.getElementById('imapServer')?.value?.trim();
      const user = document.getElementById('imapUser')?.value?.trim();
      const password = document.getElementById('imapPassword')?.value;
      const port = document.getElementById('imapPort')?.value || '993';
      
      // Validate fields before testing
      if (!server || !user || !password) {
        showToast('Please fill all IMAP fields', 'error');
        return;
      }
      
      sendCommand('testImap', { server, user, password, port: parseInt(port) });
    }
    
    function importEmailsFromFile() {
      // Create file input
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.txt,.csv';
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (ev) => {
            const text = ev.target.result;
            const lines = text.split(/[\r\n]+/).filter(e => e.includes('@'));
            lines.forEach(line => {
              const trimmed = line.trim();
              let email, password;
              if (trimmed.includes(':') && trimmed.indexOf(':') > trimmed.indexOf('@')) {
                const colonPos = trimmed.lastIndexOf(':');
                email = trimmed.substring(0, colonPos);
                password = trimmed.substring(colonPos + 1);
              } else {
                email = trimmed;
              }
              if (!currentPoolEmails.find(e => (e.email || e).toLowerCase() === email.toLowerCase())) {
                currentPoolEmails.push(password ? { email, password } : { email });
              }
            });
            renderPoolList();
            showToast('Imported ' + lines.length + ' emails', 'success');
          };
          reader.readAsText(file);
        }
      };
      input.click();
    }
    
    function refreshUsage() {
      sendCommand('refreshUsage');
    }
    
    function onEmailInput(email) {
      // Auto-detect provider (simplified for standalone)
      if (email.includes('@gmail.com')) {
        document.getElementById('imapServer').value = 'imap.gmail.com';
      } else if (email.includes('@gmx.')) {
        document.getElementById('imapServer').value = 'imap.gmx.com';
      } else if (email.includes('@outlook.') || email.includes('@hotmail.')) {
        document.getElementById('imapServer').value = 'outlook.office365.com';
      }
    }
    
    function confirmDeleteExhausted() {
      pendingAction = { type: 'deleteExhausted' };
      document.getElementById('dialogTitle').textContent = T.deleteTitle;
      document.getElementById('dialogText').textContent = T.deleteBadAccountsConfirm || 'Delete all exhausted accounts?';
      document.getElementById('dialogOverlay').classList.add('visible');
    }
    
    function confirmDeleteBanned() {
      pendingAction = { type: 'deleteBanned' };
      document.getElementById('dialogTitle').textContent = T.deleteTitle;
      document.getElementById('dialogText').textContent = T.deleteBannedAccountsConfirm || 'Delete all banned accounts?';
      document.getElementById('dialogOverlay').classList.add('visible');
    }
    
    function refreshAllExpired() {
      sendCommand('refreshAllExpired');
    }
    
    function checkAllAccountsHealth() {
      sendCommand('checkAllAccountsHealth');
      showToast(T.checkingHealth || 'Checking accounts health...', 'success');
    }
    
    function exportAllAccounts() {
      sendCommand('exportAccounts');
    }
    
    function importAccounts() {
      sendCommand('importAccounts');
    }
    
    // === Selection Mode (Bulk Actions) ===
    
    let selectionMode = false;
    let selectedAccounts = new Set();
    
    function toggleSelectionMode() {
      selectionMode = !selectionMode;
      selectedAccounts.clear();
      
      // Toggle bulk actions bar visibility
      const bar = document.getElementById('bulkActionsBar');
      const selectBtn = document.getElementById('selectModeBtn');
      if (bar) bar.classList.toggle('hidden', !selectionMode);
      if (selectBtn) selectBtn.classList.toggle('active', selectionMode);
      
      // Toggle checkbox visibility - add/remove checkboxes dynamically
      document.querySelectorAll('.account').forEach(card => {
        let checkbox = card.querySelector('.account-checkbox');
        if (selectionMode) {
          if (!checkbox) {
            const filename = card.dataset.filename;
            checkbox = document.createElement('label');
            checkbox.className = 'account-checkbox';
            checkbox.onclick = (e) => e.stopPropagation();
            checkbox.innerHTML = '<input type="checkbox" data-filename="' + filename + '" onchange="toggleAccountSelection(\'' + filename + '\', this.checked)"><span class="checkmark"></span>';
            card.insertBefore(checkbox, card.firstChild);
          }
        } else {
          if (checkbox) checkbox.remove();
          card.classList.remove('selected');
        }
      });
      
      updateBulkActionsBar();
    }
    
    function toggleAccountSelection(filename, checked) {
      if (checked) {
        selectedAccounts.add(filename);
      } else {
        selectedAccounts.delete(filename);
      }
      
      const card = document.querySelector('.account[data-filename="' + filename + '"]');
      if (card) card.classList.toggle('selected', checked);
      
      updateBulkActionsBar();
    }
    
    function selectAllAccounts() {
      document.querySelectorAll('.account-checkbox input').forEach(cb => {
        cb.checked = true;
        const filename = cb.dataset.filename;
        if (filename) selectedAccounts.add(filename);
      });
      document.querySelectorAll('.account').forEach(card => card.classList.add('selected'));
      updateBulkActionsBar();
    }
    
    function deselectAllAccounts() {
      document.querySelectorAll('.account-checkbox input').forEach(cb => {
        cb.checked = false;
      });
      document.querySelectorAll('.account').forEach(card => card.classList.remove('selected'));
      selectedAccounts.clear();
      updateBulkActionsBar();
    }
    
    function updateBulkActionsBar() {
      const countEl = document.getElementById('bulkCount');
      if (countEl) {
        countEl.textContent = selectedAccounts.size.toString();
      }
    }
    
    function exportSelectedAccounts() {
      if (selectedAccounts.size === 0) return;
      sendCommand('exportSelectedAccounts', { filenames: Array.from(selectedAccounts) });
    }
    
    function refreshSelectedTokens() {
      if (selectedAccounts.size === 0) return;
      sendCommand('refreshSelectedTokens', { filenames: Array.from(selectedAccounts) });
      showToast(T.refreshingTokens || 'Refreshing tokens...', 'success');
    }
    
    function deleteSelectedAccounts() {
      if (selectedAccounts.size === 0) return;
      pendingAction = { type: 'deleteSelected', filenames: Array.from(selectedAccounts) };
      document.getElementById('dialogTitle').textContent = T.deleteTitle;
      document.getElementById('dialogText').textContent = (T.deleteSelectedConfirm || 'Delete {count} selected accounts?').replace('{count}', selectedAccounts.size);
      document.getElementById('dialogOverlay').classList.add('visible');
    }
    
    // Export to window
    window.openSettings = openSettings;
    window.closeSettings = closeSettings;
    window.toggleLogs = toggleLogs;
    window.startAutoReg = startAutoReg;
    window.stopAutoReg = stopAutoReg;
    window.refresh = refresh;
    window.switchAccount = switchAccount;
    window.copyToken = copyToken;
    window.refreshToken = refreshToken;
    window.confirmDelete = confirmDelete;
    window.closeDialog = closeDialog;
    window.dialogAction = dialogAction;
    window.showToast = showToast;
    window.openProfilesPanel = openProfilesPanel;
    window.closeProfilesPanel = closeProfilesPanel;
    window.createProfile = createProfile;
    window.selectStrategy = selectStrategy;
    window.closeProfileEditor = closeProfileEditor;
    window.saveProfile = saveProfile;
    window.selectProfile = selectProfile;
    window.toggleAutoSwitch = toggleAutoSwitch;
    window.toggleSetting = toggleSetting;
    window.changeLanguage = changeLanguage;
    window.addEmailToPool = addEmailToPool;
    window.removeEmailFromPool = removeEmailFromPool;
    window.pasteEmails = pasteEmails;
    window.editProfile = editProfile;
    window.deleteProfile = deleteProfile;
    window.clearConsole = clearConsole;
    window.copyLogs = copyLogs;
    window.togglePasswordVisibility = togglePasswordVisibility;
    window.testImapConnection = testImapConnection;
    window.importEmailsFromFile = importEmailsFromFile;
    window.refreshUsage = refreshUsage;
    window.onEmailInput = onEmailInput;
    window.confirmDeleteExhausted = confirmDeleteExhausted;
    window.confirmDeleteBanned = confirmDeleteBanned;
    window.checkAllAccountsHealth = checkAllAccountsHealth;
    window.refreshAllExpired = refreshAllExpired;
    window.exportAllAccounts = exportAllAccounts;
    window.importAccounts = importAccounts;
    window.renderActiveProfile = renderActiveProfile;
    window.toggleSelectionMode = toggleSelectionMode;
    window.toggleAccountSelection = toggleAccountSelection;
    window.selectAllAccounts = selectAllAccounts;
    window.deselectAllAccounts = deselectAllAccounts;
    window.exportSelectedAccounts = exportSelectedAccounts;
    window.refreshSelectedTokens = refreshSelectedTokens;
    window.deleteSelectedAccounts = deleteSelectedAccounts;
  </script>
</body>
</html>